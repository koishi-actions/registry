var h=Object.defineProperty;var N=Object.getOwnPropertyDescriptor;var M=Object.getOwnPropertyNames;var k=Object.prototype.hasOwnProperty;var y=(r,e)=>()=>(r&&(e=r(r=0)),e);var z=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports);var f=(r,e,t,a)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of M(e))!k.call(r,o)&&o!==t&&h(r,o,{get:()=>e[o],enumerable:!(a=N(e,o))||a.enumerable});return r},c=(r,e,t)=>(f(r,e,"default"),t&&f(t,e,"default"));var D=r=>f(h({},"__esModule",{value:!0}),r);import{Buffer as g}from"https://registry.koishi.chat/modules/buffer/index.js";import v from"https://registry.koishi.chat/modules/process/index.js";var i=y(()=>{});var n={};import*as U from"https://registry.koishi.chat/modules/koishi/index.js";var P=y(()=>{i();c(n,U)});var H=z((V,w)=>{i();var u=Object.defineProperty,S=Object.getOwnPropertyDescriptor,q=Object.getOwnPropertyNames,B=Object.prototype.hasOwnProperty,x=(r,e)=>u(r,"name",{value:e,configurable:!0}),E=(r,e)=>{for(var t in e)u(r,t,{get:e[t],enumerable:!0})},I=(r,e,t,a)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of q(e))!B.call(r,o)&&o!==t&&u(r,o,{get:()=>e[o],enumerable:!(a=S(e,o))||a.enumerable});return r},J=r=>I(u({},"__esModule",{value:!0}),r),b={};E(b,{Config:()=>G,apply:()=>O,name:()=>F,parsePlatform:()=>m});w.exports=J(b);var l=(P(),D(n)),A={commands:{echo:{description:"发送消息",options:{escape:"发送转义消息",unescape:"发送反转义消息",user:"发送到用户",channel:"发送到频道",guild:"指定群组编号"},messages:{"expect-text":"请输入要发送的文本。","platform-not-found":"找不到指定的平台。"}}}};function m(r){let e=r.indexOf(":"),t=r.slice(0,e),a=r.slice(e+1);return[t,a]}x(m,"parsePlatform");var F="echo",G=l.Schema.object({});function O(r,e){r.i18n.define("zh-CN",A),r.command("echo <message:text>").option("escape","-e",{authority:3}).option("unescape","-E",{authority:3}).option("user","-u [user:user]",{authority:3}).option("channel","-c [channel:channel]",{authority:3}).option("guild","-g [guild:string]",{authority:3}).action(async({options:t,session:a},o)=>{if(!o)return a.text(".expect-text");let p=[o];t.unescape?p=l.h.parse(o):t.escape&&(p=[l.h.escape(o)]);let d=t.user||t.channel;if(d){let[j,_]=m(d),s=r.bots.find(C=>C.platform===j);if(s)t.user?await s.sendPrivateMessage(_,p,a.guildId):await s.sendMessage(_,p,t.guild);else return a.text(".platform-not-found");return}return p})}x(O,"apply")});export default H();
