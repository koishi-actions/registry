var At=Object.defineProperty;var Lt=(e,i,f)=>i in e?At(e,i,{enumerable:true,configurable:true,writable:true,value:f}):e[i]=f;var E=(e,i,f)=>(Lt(e,typeof i!="symbol"?i+"":i,f),f);import{defineComponent as Se,resolveComponent as de,openBlock as H,createBlock as _e,unref as Y,withCtx as me,createElementVNode as Z,normalizeClass as It,createVNode as we,createCommentVNode as nt,inject as Bt,computed as Dt,createElementBlock as rt,Fragment as Rt,pushScopeId as Nt,popScopeId as qt}from"../vue.js";import{VirtualList as zt,store as I,Time as Ut,icons as Wt}from"../client.js";var it=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function at(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Tt(e){if(e.__esModule)return e;var i=e.default;if(typeof i=="function"){var f=function o(){return this instanceof o?Reflect.construct(i,arguments,this.constructor):i.apply(this,arguments)};f.prototype=i.prototype}else f={};return Object.defineProperty(f,"__esModule",{value:true}),Object.keys(e).forEach(function(o){var y=Object.getOwnPropertyDescriptor(e,o);Object.defineProperty(f,o,y.get?y:{enumerable:true,get:function(){return e[o]}})}),f}const Ft={},Pt=Object.freeze(Object.defineProperty({__proto__:null,default:Ft},Symbol.toStringTag,{value:"Module"})),Ht=Tt(Pt);var he,Ye;function Vt(){if(Ye)return he;Ye=1;var e=typeof Map=="function"&&Map.prototype,i=Object.getOwnPropertyDescriptor&&e?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,f=e&&i&&typeof i.get=="function"?i.get:null,o=e&&Map.prototype.forEach,y=typeof Set=="function"&&Set.prototype,_=Object.getOwnPropertyDescriptor&&y?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,p=y&&_&&typeof _.get=="function"?_.get:null,u=y&&Set.prototype.forEach,t=typeof WeakMap=="function"&&WeakMap.prototype,a=t?WeakMap.prototype.has:null,s=typeof WeakSet=="function"&&WeakSet.prototype,l=s?WeakSet.prototype.has:null,h=typeof WeakRef=="function"&&WeakRef.prototype,c=h?WeakRef.prototype.deref:null,g=Boolean.prototype.valueOf,S=Object.prototype.toString,C=Function.prototype.toString,A=String.prototype.match,k=String.prototype.slice,$=String.prototype.replace,K=String.prototype.toUpperCase,Ee=String.prototype.toLowerCase,Ce=RegExp.prototype.test,ke=Array.prototype.concat,L=Array.prototype.join,ft=Array.prototype.slice,$e=Math.floor,j=typeof BigInt=="function"?BigInt.prototype.valueOf:null,ee=Object.getOwnPropertySymbols,te=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,z=typeof Symbol=="function"&&typeof Symbol.iterator=="object",x=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===z||"symbol")?Symbol.toStringTag:null,Me=Object.prototype.propertyIsEnumerable,Ae=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(n){return n.__proto__}:null);function Le(n,r){if(n===1/0||n===-1/0||n!==n||n&&n>-1e3&&n<1e3||Ce.call(/e/,r))return r;var v=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof n=="number"){var b=n<0?-$e(-n):$e(n);if(b!==n){var w=String(b),d=k.call(r,w.length+1);return $.call(w,v,"$&_")+"."+$.call($.call(d,/([0-9]{3})/g,"$&_"),/_$/,"")}}return $.call(r,v,"$&_")}var ne=Ht,Ie=ne.custom,Be=Ne(Ie)?Ie:null;he=function n(r,v,b,w){var d=v||{};if(B(d,"quoteStyle")&&d.quoteStyle!=="single"&&d.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(B(d,"maxStringLength")&&(typeof d.maxStringLength=="number"?d.maxStringLength<0&&d.maxStringLength!==1/0:d.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var R=B(d,"customInspect")?d.customInspect:true;if(typeof R!="boolean"&&R!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(B(d,"indent")&&d.indent!==null&&d.indent!=="	"&&!(parseInt(d.indent,10)===d.indent&&d.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(B(d,"numericSeparator")&&typeof d.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var q=d.numericSeparator;if(typeof r>"u")return"undefined";if(r===null)return"null";if(typeof r=="boolean")return r?"true":"false";if(typeof r=="string")return ze(r,d);if(typeof r=="number"){if(r===0)return 1/0/r>0?"0":"-0";var O=String(r);return q?Le(r,O):O}if(typeof r=="bigint"){var N=String(r)+"n";return q?Le(r,N):N}var se=typeof d.depth>"u"?5:d.depth;if(typeof b>"u"&&(b=0),b>=se&&se>0&&typeof r=="object")return re(r)?"[Array]":"[Object]";var U=kt(d,b);if(typeof w>"u")w=[];else if(qe(w,r)>=0)return"[Circular]";function M(W,J,Mt){if(J&&(w=ft.call(w),w.push(J)),Mt){var Je={depth:d.depth};return B(d,"quoteStyle")&&(Je.quoteStyle=d.quoteStyle),n(W,Je,b+1,w)}return n(W,d,b+1,w)}if(typeof r=="function"&&!Re(r)){var We=mt(r),Te=V(r,M);return"[Function"+(We?": "+We:" (anonymous)")+"]"+(Te.length>0?" { "+L.call(Te,", ")+" }":"")}if(Ne(r)){var Fe=z?$.call(String(r),/^(Symbol\(.*\))_[^)]*$/,"$1"):te.call(r);return typeof r=="object"&&!z?F(Fe):Fe}if(Ot(r)){for(var P="<"+Ee.call(String(r.nodeName)),oe=r.attributes||[],G=0;G<oe.length;G++)P+=" "+oe[G].name+"="+De(ct(oe[G].value),"double",d);return P+=">",r.childNodes&&r.childNodes.length&&(P+="..."),P+="</"+Ee.call(String(r.nodeName))+">",P}if(re(r)){if(r.length===0)return"[]";var le=V(r,M);return U&&!Ct(le)?"["+ae(le,U)+"]":"[ "+L.call(le,", ")+" ]"}if(pt(r)){var fe=V(r,M);return!("cause"in Error.prototype)&&"cause"in r&&!Me.call(r,"cause")?"{ ["+String(r)+"] "+L.call(ke.call("[cause]: "+M(r.cause),fe),", ")+" }":fe.length===0?"["+String(r)+"]":"{ ["+String(r)+"] "+L.call(fe,", ")+" }"}if(typeof r=="object"&&R){if(Be&&typeof r[Be]=="function"&&ne)return ne(r,{depth:se-b});if(R!=="symbol"&&typeof r.inspect=="function")return r.inspect()}if(vt(r)){var Pe=[];return o&&o.call(r,function(W,J){Pe.push(M(J,r,true)+" => "+M(W,r))}),Ue("Map",f.call(r),Pe,U)}if(wt(r)){var He=[];return u&&u.call(r,function(W){He.push(M(W,r))}),Ue("Set",p.call(r),He,U)}if(bt(r))return ie("WeakMap");if(xt(r))return ie("WeakSet");if(St(r))return ie("WeakRef");if(gt(r))return F(M(Number(r)));if(dt(r))return F(M(j.call(r)));if(yt(r))return F(g.call(r));if(ht(r))return F(M(String(r)));if(typeof window<"u"&&r===window)return"{ [object Window] }";if(r===it)return"{ [object globalThis] }";if(!ut(r)&&!Re(r)){var ce=V(r,M),Ve=Ae?Ae(r)===Object.prototype:r instanceof Object||r.constructor===Object,ue=r instanceof Object?"":"null prototype",Ge=!Ve&&x&&Object(r)===r&&x in r?k.call(D(r),8,-1):ue?"Object":"",$t=Ve||typeof r.constructor!="function"?"":r.constructor.name?r.constructor.name+" ":"",pe=$t+(Ge||ue?"["+L.call(ke.call([],Ge||[],ue||[]),": ")+"] ":"");return ce.length===0?pe+"{}":U?pe+"{"+ae(ce,U)+"}":pe+"{ "+L.call(ce,", ")+" }"}return String(r)};function De(n,r,v){var b=(v.quoteStyle||r)==="double"?'"':"'";return b+n+b}function ct(n){return $.call(String(n),/"/g,"&quot;")}function re(n){return D(n)==="[object Array]"&&(!x||!(typeof n=="object"&&x in n))}function ut(n){return D(n)==="[object Date]"&&(!x||!(typeof n=="object"&&x in n))}function Re(n){return D(n)==="[object RegExp]"&&(!x||!(typeof n=="object"&&x in n))}function pt(n){return D(n)==="[object Error]"&&(!x||!(typeof n=="object"&&x in n))}function ht(n){return D(n)==="[object String]"&&(!x||!(typeof n=="object"&&x in n))}function gt(n){return D(n)==="[object Number]"&&(!x||!(typeof n=="object"&&x in n))}function yt(n){return D(n)==="[object Boolean]"&&(!x||!(typeof n=="object"&&x in n))}function Ne(n){if(z)return n&&typeof n=="object"&&n instanceof Symbol;if(typeof n=="symbol")return true;if(!n||typeof n!="object"||!te)return false;try{return te.call(n),true}catch{}return false}function dt(n){if(!n||typeof n!="object"||!j)return false;try{return j.call(n),true}catch{}return false}var _t=Object.prototype.hasOwnProperty||function(n){return n in this};function B(n,r){return _t.call(n,r)}function D(n){return S.call(n)}function mt(n){if(n.name)return n.name;var r=A.call(C.call(n),/^function\s*([\w$]+)/);return r?r[1]:null}function qe(n,r){if(n.indexOf)return n.indexOf(r);for(var v=0,b=n.length;v<b;v++)if(n[v]===r)return v;return-1}function vt(n){if(!f||!n||typeof n!="object")return false;try{f.call(n);try{p.call(n)}catch{return true}return n instanceof Map}catch{}return false}function bt(n){if(!a||!n||typeof n!="object")return false;try{a.call(n,a);try{l.call(n,l)}catch{return true}return n instanceof WeakMap}catch{}return false}function St(n){if(!c||!n||typeof n!="object")return false;try{return c.call(n),true}catch{}return false}function wt(n){if(!p||!n||typeof n!="object")return false;try{p.call(n);try{f.call(n)}catch{return true}return n instanceof Set}catch{}return false}function xt(n){if(!l||!n||typeof n!="object")return false;try{l.call(n,l);try{a.call(n,a)}catch{return true}return n instanceof WeakSet}catch{}return false}function Ot(n){return!n||typeof n!="object"?false:typeof HTMLElement<"u"&&n instanceof HTMLElement?true:typeof n.nodeName=="string"&&typeof n.getAttribute=="function"}function ze(n,r){if(n.length>r.maxStringLength){var v=n.length-r.maxStringLength,b="... "+v+" more character"+(v>1?"s":"");return ze(k.call(n,0,r.maxStringLength),r)+b}var w=$.call($.call(n,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,Et);return De(w,"single",r)}function Et(n){var r=n.charCodeAt(0),v={8:"b",9:"t",10:"n",12:"f",13:"r"}[r];return v?"\\"+v:"\\x"+(r<16?"0":"")+K.call(r.toString(16))}function F(n){return"Object("+n+")"}function ie(n){return n+" { ? }"}function Ue(n,r,v,b){var w=b?ae(v,b):L.call(v,", ");return n+" ("+r+") {"+w+"}"}function Ct(n){for(var r=0;r<n.length;r++)if(qe(n[r],`
`)>=0)return false;return true}function kt(n,r){var v;if(n.indent==="	")v="	";else if(typeof n.indent=="number"&&n.indent>0)v=L.call(Array(n.indent+1)," ");else return null;return{base:v,prev:L.call(Array(r+1),v)}}function ae(n,r){if(n.length===0)return"";var v=`
`+r.prev+r.base;return v+L.call(n,","+v)+`
`+r.prev}function V(n,r){var v=re(n),b=[];if(v){b.length=n.length;for(var w=0;w<n.length;w++)b[w]=B(n,w)?r(n[w],n):""}var d=typeof ee=="function"?ee(n):[],R;if(z){R={};for(var q=0;q<d.length;q++)R["$"+d[q]]=d[q]}for(var O in n)B(n,O)&&(v&&String(Number(O))===O&&O<n.length||z&&R["$"+O]instanceof Symbol||(Ce.call(/[^\w$]/,O)?b.push(r(O,n)+": "+r(n[O],n)):b.push(O+": "+r(n[O],n))));if(typeof ee=="function")for(var N=0;N<d.length;N++)Me.call(n,d[N])&&b.push("["+r(d[N])+"]: "+r(n[d[N]],n));return b}return he}var Gt=Vt();const Jt=at(Gt);var ge,Ze;function Yt(){if(Ze)return ge;Ze=1;function e(){const f=/(Chrome|Chromium)\/(?<chromeVersion>\d+)\./.exec(navigator.userAgent);if(f)return Number.parseInt(f.groups.chromeVersion,10)}const i=e()>=69?{level:1,hasBasic:true,has256:false,has16m:false}:false;return ge={stdout:i,stderr:i},ge}var Xe=Yt(),Zt=Object.defineProperty,m=(e,i)=>Zt(e,"name",{value:i,configurable:true});function Xt(){}m(Xt,"noop");function X(e){return e==null}m(X,"isNullable");function Qt(e){return e&&typeof e=="object"&&!Array.isArray(e)}m(Qt,"isPlainObject");function Kt(e,i){return Object.fromEntries(Object.entries(e).filter(([f,o])=>i(f,o)))}m(Kt,"filterKeys");function st(e,i){return Object.fromEntries(Object.entries(e).map(([f,o])=>[f,i(o,f)]))}m(st,"mapValues");function T(e,i){return arguments.length===1?f=>T(e,f):e in globalThis&&i instanceof globalThis[e]||Object.prototype.toString.call(i).slice(8,-1)===e}m(T,"is");function ve(e){return!e||typeof e!="object"?e:Array.isArray(e)?e.map(ve):T("Date",e)?new Date(e.valueOf()):T("RegExp",e)?new RegExp(e.source,e.flags):st(e,ve)}m(ve,"clone");function be(e,i,f){if(e===i||!f&&X(e)&&X(i))return true;if(typeof e!=typeof i||typeof e!="object"||!e||!i)return false;function o(y,_){return y(e)?y(i)?_(e,i):false:y(i)?false:void 0}return m(o,"check"),o(Array.isArray,(y,_)=>y.length===_.length&&y.every((p,u)=>be(p,_[u])))??o(T("Date"),(y,_)=>y.valueOf()===_.valueOf())??o(T("RegExp"),(y,_)=>y.source===_.source&&y.flags===_.flags)??Object.keys({...e,...i}).every(y=>be(e[y],i[y],f))}m(be,"deepEqual");function jt(e,i,f){if(!i)return{...e};const o={};for(const y of i)(f||e[y]!==void 0)&&(o[y]=e[y]);return o}m(jt,"pick");function en(e,i){if(!i)return{...e};const f={...e};for(const o of i)Reflect.deleteProperty(f,o);return f}m(en,"omit");function tn(e,i,f){return Object.defineProperty(e,i,{writable:true,value:f,enumerable:false})}m(tn,"defineProperty");function nn(e,i){return i.every(f=>e.includes(f))}m(nn,"contain");function rn(e,i){return e.filter(f=>i.includes(f))}m(rn,"intersection");function an(e,i){return e.filter(f=>!i.includes(f))}m(an,"difference");function sn(e,i){return Array.from(new Set([...e,...i]))}m(sn,"union");function on(e){return[...new Set(e)]}m(on,"deduplicate");function ln(e,i){const f=e.indexOf(i);return f>=0?(e.splice(f,1),true):false}m(ln,"remove");function fn(e){return Array.isArray(e)?e:X(e)?[]:[e]}m(fn,"makeArray");function cn(e){if(typeof Buffer<"u")return Buffer.from(e).toString("base64");let i="";const f=new Uint8Array(e);for(let o=0;o<f.byteLength;o++)i+=String.fromCharCode(f[o]);return btoa(i)}m(cn,"arrayBufferToBase64");function un(e){if(typeof Buffer<"u"){const o=Buffer.from(e,"base64");return new Uint8Array(o.buffer,o.byteOffset,o.length)}const i=atob(e.replace(/\s/g,"")),f=new Uint8Array(i.length);for(let o=0;o<i.length;o++)f[o]=i.charCodeAt(o);return f}m(un,"base64ToArrayBuffer");function pn(e){return e.charAt(0).toUpperCase()+e.slice(1)}m(pn,"capitalize");function xe(e){return e.charAt(0).toLowerCase()+e.slice(1)}m(xe,"uncapitalize");function hn(e){return e.replace(/[_-][a-z]/g,i=>i.slice(1).toUpperCase())}m(hn,"camelCase");function gn(e){return xe(e).replace(/_/g,"-").replace(/.[A-Z]+/g,i=>i[0]+"-"+i.slice(1).toLowerCase())}m(gn,"paramCase");function yn(e){return xe(e).replace(/-/g,"_").replace(/.[A-Z]+/g,i=>i[0]+"_"+i.slice(1).toLowerCase())}m(yn,"snakeCase");function ot(e){return e.replace(/\/$/,"")}m(ot,"trimSlash");function dn(e){return e.startsWith("/")||(e="/"+e),ot(e)}m(dn,"sanitize");var Q;(e=>{e.millisecond=1,e.second=1e3,e.minute=e.second*60,e.hour=e.minute*60,e.day=e.hour*24,e.week=e.day*7;let i=new Date().getTimezoneOffset();function f(c){i=c}e.setTimezoneOffset=f,m(f,"setTimezoneOffset");function o(){return i}e.getTimezoneOffset=o,m(o,"getTimezoneOffset");function y(c=new Date,g){return typeof c=="number"&&(c=new Date(c)),g===void 0&&(g=i),Math.floor((c.valueOf()/e.minute-g)/1440)}e.getDateNumber=y,m(y,"getDateNumber");function _(c,g){const S=new Date(c*e.day);return g===void 0&&(g=i),new Date(+S+g*e.minute)}e.fromDateNumber=_,m(_,"fromDateNumber");const p=/\d+(?:\.\d+)?/.source,u=new RegExp(`^${["w(?:eek(?:s)?)?","d(?:ay(?:s)?)?","h(?:our(?:s)?)?","m(?:in(?:ute)?(?:s)?)?","s(?:ec(?:ond)?(?:s)?)?"].map(c=>`(${p}${c})?`).join("")}$`);function t(c){const g=u.exec(c);return g?(parseFloat(g[1])*e.week||0)+(parseFloat(g[2])*e.day||0)+(parseFloat(g[3])*e.hour||0)+(parseFloat(g[4])*e.minute||0)+(parseFloat(g[5])*e.second||0):0}e.parseTime=t,m(t,"parseTime");function a(c){const g=t(c);return g?c=Date.now()+g:/^\d{1,2}(:\d{1,2}){1,2}$/.test(c)?c=`${new Date().toLocaleDateString()}-${c}`:/^\d{1,2}-\d{1,2}-\d{1,2}(:\d{1,2}){1,2}$/.test(c)&&(c=`${new Date().getFullYear()}-${c}`),c?new Date(c):new Date}e.parseDate=a,m(a,"parseDate");function s(c){const g=Math.abs(c);return g>=e.day-e.hour/2?Math.round(c/e.day)+"d":g>=e.hour-e.minute/2?Math.round(c/e.hour)+"h":g>=e.minute-e.second/2?Math.round(c/e.minute)+"m":g>=e.second?Math.round(c/e.second)+"s":c+"ms"}e.format=s,m(s,"format");function l(c,g=2){return c.toString().padStart(g,"0")}e.toDigits=l,m(l,"toDigits");function h(c,g=new Date){return c.replace("yyyy",g.getFullYear().toString()).replace("yy",g.getFullYear().toString().slice(2)).replace("MM",l(g.getMonth()+1)).replace("dd",l(g.getDate())).replace("hh",l(g.getHours())).replace("mm",l(g.getMinutes())).replace("ss",l(g.getSeconds())).replace("SSS",l(g.getMilliseconds(),3))}e.template=h,m(h,"template")})(Q||(Q={}));var _n=Object.defineProperty,mn=Object.getOwnPropertyNames,Qe=(e,i)=>_n(e,"name",{value:i,configurable:true}),vn=(e,i)=>function(){return i||(0,e[mn(e)[0]])((i={exports:{}}).exports,i),i.exports},bn=vn({"packages/reggol/src/shared.ts"(e,i){var p;var f=[6,2,3,4,5,1],o=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221];function y(u){return u instanceof Error&&Array.isArray(u.errors)}Qe(y,"isAggregateError");var _=(p=class{constructor(t,a){E(this,"extend",t2=>new p(`${this.name}:${t2}`));E(this,"warning",(t2,...a2)=>{this.warn(t2,...a2)});this.name=t,this.meta=a,this.createMethod("success",p.SUCCESS),this.createMethod("error",p.ERROR),this.createMethod("info",p.INFO),this.createMethod("warn",p.WARN),this.createMethod("debug",p.DEBUG)}static format(t,a){this.formatters[t]=a}static color(t,a,s,l=""){return t.colors?`\x1B[3${a<8?a:"8;5;"+a}${t.colors>=2?l:""}m${s}\x1B[0m`:""+s}static code(t,a){let s=0;for(let h=0;h<t.length;h++)s=(s<<3)-s+t.charCodeAt(h)+13,s|=0;const l=a.colors?a.colors>=2?o:f:[];return l[Math.abs(s)%l.length]}static render(t,a){var A,k,$;const s=`[${a.type[0].toUpperCase()}]`,l=" ".repeat(((A=t.label)==null?void 0:A.margin)??1);let h=3+l.length,c="";t.showTime&&(h+=t.showTime.length+l.length,c+=p.color(t,8,Q.template(t.showTime))+l);const g=p.code(a.name,t),S=p.color(t,g,a.name,";1"),C=(((k=t.label)==null?void 0:k.width)??0)+S.length-a.name.length;if((($=t.label)==null?void 0:$.align)==="right"?(c+=S.padStart(C)+l+s+l,h+=(t.label.width??0)+l.length):c+=s+l+S.padEnd(C)+l,c+=a.content.replace(/\n/g,`
`+" ".repeat(h)),t.showDiff&&t.timestamp){const K=a.timestamp-t.timestamp;c+=p.color(t,g," +"+Q.format(K))}return c}createMethod(t,a){this[t]=(...s)=>{if(s.length===1&&s[0]instanceof Error){if(s[0].cause)this[t](s[0].cause);else if(y(s[0])){s[0].errors.forEach(c=>this[t](c));return}}const l=++p.id,h=Date.now();for(const c of p.targets){if(this.getLevel(c)<a)continue;const g=this.format(c,...s),S={id:l,type:t,level:a,name:this.name,meta:this.meta,content:g,timestamp:h};if(c.record)c.record(S);else{const{print:C=console.log}=c;C(p.render(c,S))}c.timestamp=h}}}format(t,...a){a[0]instanceof Error?(a[0]=a[0].stack||a[0].message,a.unshift("%s")):typeof a[0]!="string"&&a.unshift("%o");let s=a.shift();s=s.replace(/%([a-zA-Z%])/g,(h,c)=>{if(h==="%%")return"%";const g=p.formatters[c];if(typeof g=="function"){const S=a.shift();return g(S,t,this)}return h});for(let h of a)typeof h=="object"&&h&&(h=p.formatters.o(h,t,this)),s+=" "+h;const{maxLength:l=10240}=t;return s.split(/\r?\n/g).map(h=>h.slice(0,l)+(h.length>l?"...":"")).join(`
`)}getLevel(t){const a=this.name.split(":");let s=(t==null?void 0:t.levels)||p.levels;do s=s[a.shift()]??s.base;while(a.length&&typeof s=="object");return s}get level(){return this.getLevel()}set level(t){const a=this.name.split(":");let s=p.levels;for(;a.length>1;){const l=a.shift(),h=s[l];typeof h=="object"?s=h:s=s[l]={base:h??s.base}}s[a[0]]=t}},Qe(p,"Logger"),E(p,"SILENT",0),E(p,"SUCCESS",1),E(p,"ERROR",1),E(p,"INFO",2),E(p,"WARN",2),E(p,"DEBUG",3),E(p,"id",0),E(p,"targets",[{colors:Xe.stdout&&Xe.stdout.level,print(t){console.log(t)}}]),E(p,"formatters",Object.create(null)),E(p,"levels",{base:2}),p);_.format("s",u=>u),_.format("d",u=>+u),_.format("j",u=>JSON.stringify(u)),_.format("c",(u,t,a)=>_.color(t,_.code(a.name,t),u)),_.format("C",(u,t)=>_.color(t,15,u,";1")),i.exports=_}});const Ke=bn();var Sn=Object.getOwnPropertyNames,wn=(e,i)=>function(){return i||(0,e[Sn(e)[0]])((i={exports:{}}).exports,i),i.exports},xn=wn({"packages/reggol/src/browser.ts"(e,i){Ke.format("o",(f,o)=>Jt(f,{depth:1/0}).replace(/\s*\n\s*/g," ")),i.exports=Ke}});const On=xn();var ye={},je;function En(){return je||(je=1,function(e){(function(i,f){if(typeof e.nodeName!="string")f(e);else{var o={};f(o),i.AnsiUp=o.default}})(it,function(i){var f=this&&this.__makeTemplateObject||function(u,t){return Object.defineProperty?Object.defineProperty(u,"raw",{value:t}):u.raw=t,u},o;(function(u){u[u.EOS=0]="EOS",u[u.Text=1]="Text",u[u.Incomplete=2]="Incomplete",u[u.ESC=3]="ESC",u[u.Unknown=4]="Unknown",u[u.SGR=5]="SGR",u[u.OSCURL=6]="OSCURL"})(o||(o={}));var y=function(){function u(){this.VERSION="5.2.1",this.setup_palettes(),this._use_classes=false,this.bold=false,this.italic=false,this.underline=false,this.fg=this.bg=null,this._buffer="",this._url_whitelist={http:1,https:1},this._escape_html=true}return Object.defineProperty(u.prototype,"use_classes",{get:function(){return this._use_classes},set:function(t){this._use_classes=t},enumerable:false,configurable:true}),Object.defineProperty(u.prototype,"url_whitelist",{get:function(){return this._url_whitelist},set:function(t){this._url_whitelist=t},enumerable:false,configurable:true}),Object.defineProperty(u.prototype,"escape_html",{get:function(){return this._escape_html},set:function(t){this._escape_html=t},enumerable:false,configurable:true}),u.prototype.setup_palettes=function(){var t=this;this.ansi_colors=[[{rgb:[0,0,0],class_name:"ansi-black"},{rgb:[187,0,0],class_name:"ansi-red"},{rgb:[0,187,0],class_name:"ansi-green"},{rgb:[187,187,0],class_name:"ansi-yellow"},{rgb:[0,0,187],class_name:"ansi-blue"},{rgb:[187,0,187],class_name:"ansi-magenta"},{rgb:[0,187,187],class_name:"ansi-cyan"},{rgb:[255,255,255],class_name:"ansi-white"}],[{rgb:[85,85,85],class_name:"ansi-bright-black"},{rgb:[255,85,85],class_name:"ansi-bright-red"},{rgb:[0,255,0],class_name:"ansi-bright-green"},{rgb:[255,255,85],class_name:"ansi-bright-yellow"},{rgb:[85,85,255],class_name:"ansi-bright-blue"},{rgb:[255,85,255],class_name:"ansi-bright-magenta"},{rgb:[85,255,255],class_name:"ansi-bright-cyan"},{rgb:[255,255,255],class_name:"ansi-bright-white"}]],this.palette_256=[],this.ansi_colors.forEach(function(A){A.forEach(function(k){t.palette_256.push(k)})});for(var a=[0,95,135,175,215,255],s=0;s<6;++s)for(var l=0;l<6;++l)for(var h=0;h<6;++h){var c={rgb:[a[s],a[l],a[h]],class_name:"truecolor"};this.palette_256.push(c)}for(var g=8,S=0;S<24;++S,g+=10){var C={rgb:[g,g,g],class_name:"truecolor"};this.palette_256.push(C)}},u.prototype.escape_txt_for_html=function(t){return this._escape_html?t.replace(/[&<>"']/gm,function(a){if(a==="&")return"&amp;";if(a==="<")return"&lt;";if(a===">")return"&gt;";if(a==='"')return"&quot;";if(a==="'")return"&#x27;"}):t},u.prototype.append_buffer=function(t){var a=this._buffer+t;this._buffer=a},u.prototype.get_next_packet=function(){var t={kind:o.EOS,text:"",url:""},a=this._buffer.length;if(a==0)return t;var s=this._buffer.indexOf("\x1B");if(s==-1)return t.kind=o.Text,t.text=this._buffer,this._buffer="",t;if(s>0)return t.kind=o.Text,t.text=this._buffer.slice(0,s),this._buffer=this._buffer.slice(s),t;if(s==0){if(a<3)return t.kind=o.Incomplete,t;var l=this._buffer.charAt(1);if(l!="["&&l!="]"&&l!="(")return t.kind=o.ESC,t.text=this._buffer.slice(0,1),this._buffer=this._buffer.slice(1),t;if(l=="["){this._csi_regex||(this._csi_regex=_(f([`
                        ^                           # beginning of line
                                                    #
                                                    # First attempt
                        (?:                         # legal sequence
                          \x1B[                      # CSI
                          ([<-?]?)              # private-mode char
                          ([d;]*)                    # any digits or semicolons
                          ([ -/]?               # an intermediate modifier
                          [@-~])                # the command
                        )
                        |                           # alternate (second attempt)
                        (?:                         # illegal sequence
                          \x1B[                      # CSI
                          [ -~]*                # anything legal
                          ([\0-:])              # anything illegal
                        )
                    `],[`
                        ^                           # beginning of line
                                                    #
                                                    # First attempt
                        (?:                         # legal sequence
                          \\x1b\\[                      # CSI
                          ([\\x3c-\\x3f]?)              # private-mode char
                          ([\\d;]*)                    # any digits or semicolons
                          ([\\x20-\\x2f]?               # an intermediate modifier
                          [\\x40-\\x7e])                # the command
                        )
                        |                           # alternate (second attempt)
                        (?:                         # illegal sequence
                          \\x1b\\[                      # CSI
                          [\\x20-\\x7e]*                # anything legal
                          ([\\x00-\\x1f:])              # anything illegal
                        )
                    `])));var h=this._buffer.match(this._csi_regex);if(h===null)return t.kind=o.Incomplete,t;if(h[4])return t.kind=o.ESC,t.text=this._buffer.slice(0,1),this._buffer=this._buffer.slice(1),t;h[1]!=""||h[3]!="m"?t.kind=o.Unknown:t.kind=o.SGR,t.text=h[2];var c=h[0].length;return this._buffer=this._buffer.slice(c),t}else if(l=="]"){if(a<4)return t.kind=o.Incomplete,t;if(this._buffer.charAt(2)!="8"||this._buffer.charAt(3)!=";")return t.kind=o.ESC,t.text=this._buffer.slice(0,1),this._buffer=this._buffer.slice(1),t;this._osc_st||(this._osc_st=p(f([`
                        (?:                         # legal sequence
                          (\x1B\\)                    # ESC                           |                           # alternate
                          (\x07)                      # BEL (what xterm did)
                        )
                        |                           # alternate (second attempt)
                        (                           # illegal sequence
                          [\0-]                 # anything illegal
                          |                           # alternate
                          [\b-]                 # anything illegal
                          |                           # alternate
                          [-]                 # anything illegal
                        )
                    `],[`
                        (?:                         # legal sequence
                          (\\x1b\\\\)                    # ESC \\
                          |                           # alternate
                          (\\x07)                      # BEL (what xterm did)
                        )
                        |                           # alternate (second attempt)
                        (                           # illegal sequence
                          [\\x00-\\x06]                 # anything illegal
                          |                           # alternate
                          [\\x08-\\x1a]                 # anything illegal
                          |                           # alternate
                          [\\x1c-\\x1f]                 # anything illegal
                        )
                    `]))),this._osc_st.lastIndex=0;{var g=this._osc_st.exec(this._buffer);if(g===null)return t.kind=o.Incomplete,t;if(g[3])return t.kind=o.ESC,t.text=this._buffer.slice(0,1),this._buffer=this._buffer.slice(1),t}{var S=this._osc_st.exec(this._buffer);if(S===null)return t.kind=o.Incomplete,t;if(S[3])return t.kind=o.ESC,t.text=this._buffer.slice(0,1),this._buffer=this._buffer.slice(1),t}this._osc_regex||(this._osc_regex=_(f([`
                        ^                           # beginning of line
                                                    #
                        \x1B]8;                    # OSC Hyperlink
                        [ -:<-~]*       # params (excluding ;)
                        ;                           # end of params
                        ([!-~]{0,512})        # URL capture
                        (?:                         # ST
                          (?:\x1B\\)                  # ESC                           |                           # alternate
                          (?:\x07)                    # BEL (what xterm did)
                        )
                        ([ -~]+)              # TEXT capture
                        \x1B]8;;                   # OSC Hyperlink End
                        (?:                         # ST
                          (?:\x1B\\)                  # ESC                           |                           # alternate
                          (?:\x07)                    # BEL (what xterm did)
                        )
                    `],[`
                        ^                           # beginning of line
                                                    #
                        \\x1b\\]8;                    # OSC Hyperlink
                        [\\x20-\\x3a\\x3c-\\x7e]*       # params (excluding ;)
                        ;                           # end of params
                        ([\\x21-\\x7e]{0,512})        # URL capture
                        (?:                         # ST
                          (?:\\x1b\\\\)                  # ESC \\
                          |                           # alternate
                          (?:\\x07)                    # BEL (what xterm did)
                        )
                        ([\\x20-\\x7e]+)              # TEXT capture
                        \\x1b\\]8;;                   # OSC Hyperlink End
                        (?:                         # ST
                          (?:\\x1b\\\\)                  # ESC \\
                          |                           # alternate
                          (?:\\x07)                    # BEL (what xterm did)
                        )
                    `])));var h=this._buffer.match(this._osc_regex);if(h===null)return t.kind=o.ESC,t.text=this._buffer.slice(0,1),this._buffer=this._buffer.slice(1),t;t.kind=o.OSCURL,t.url=h[1],t.text=h[2];var c=h[0].length;return this._buffer=this._buffer.slice(c),t}else if(l=="(")return t.kind=o.Unknown,this._buffer=this._buffer.slice(3),t}},u.prototype.ansi_to_html=function(t){this.append_buffer(t);for(var a=[];;){var s=this.get_next_packet();if(s.kind==o.EOS||s.kind==o.Incomplete)break;s.kind==o.ESC||s.kind==o.Unknown||(s.kind==o.Text?a.push(this.transform_to_html(this.with_state(s))):s.kind==o.SGR?this.process_ansi(s):s.kind==o.OSCURL&&a.push(this.process_hyperlink(s)))}return a.join("")},u.prototype.with_state=function(t){return{bold:this.bold,italic:this.italic,underline:this.underline,fg:this.fg,bg:this.bg,text:t.text}},u.prototype.process_ansi=function(t){for(var a=t.text.split(";");a.length>0;){var s=a.shift(),l=parseInt(s,10);if(isNaN(l)||l===0)this.fg=this.bg=null,this.bold=false,this.italic=false,this.underline=false;else if(l===1)this.bold=true;else if(l===3)this.italic=true;else if(l===4)this.underline=true;else if(l===22)this.bold=false;else if(l===23)this.italic=false;else if(l===24)this.underline=false;else if(l===39)this.fg=null;else if(l===49)this.bg=null;else if(l>=30&&l<38)this.fg=this.ansi_colors[0][l-30];else if(l>=40&&l<48)this.bg=this.ansi_colors[0][l-40];else if(l>=90&&l<98)this.fg=this.ansi_colors[1][l-90];else if(l>=100&&l<108)this.bg=this.ansi_colors[1][l-100];else if((l===38||l===48)&&a.length>0){var h=l===38,c=a.shift();if(c==="5"&&a.length>0){var g=parseInt(a.shift(),10);g>=0&&g<=255&&(h?this.fg=this.palette_256[g]:this.bg=this.palette_256[g])}if(c==="2"&&a.length>2){var S=parseInt(a.shift(),10),C=parseInt(a.shift(),10),A=parseInt(a.shift(),10);if(S>=0&&S<=255&&C>=0&&C<=255&&A>=0&&A<=255){var k={rgb:[S,C,A],class_name:"truecolor"};h?this.fg=k:this.bg=k}}}}},u.prototype.transform_to_html=function(t){var a=t.text;if(a.length===0||(a=this.escape_txt_for_html(a),!t.bold&&!t.italic&&!t.underline&&t.fg===null&&t.bg===null))return a;var s=[],l=[],h=t.fg,c=t.bg;t.bold&&s.push("font-weight:bold"),t.italic&&s.push("font-style:italic"),t.underline&&s.push("text-decoration:underline"),this._use_classes?(h&&(h.class_name!=="truecolor"?l.push(h.class_name+"-fg"):s.push("color:rgb("+h.rgb.join(",")+")")),c&&(c.class_name!=="truecolor"?l.push(c.class_name+"-bg"):s.push("background-color:rgb("+c.rgb.join(",")+")"))):(h&&s.push("color:rgb("+h.rgb.join(",")+")"),c&&s.push("background-color:rgb("+c.rgb+")"));var g="",S="";return l.length&&(g=' class="'+l.join(" ")+'"'),s.length&&(S=' style="'+s.join(";")+'"'),"<span"+S+g+">"+a+"</span>"},u.prototype.process_hyperlink=function(t){var a=t.url.split(":");if(a.length<1||!this._url_whitelist[a[0]])return"";var s='<a href="'+this.escape_txt_for_html(t.url)+'">'+this.escape_txt_for_html(t.text)+"</a>";return s},u}();function _(u){var t=u.raw[0],a=/^\s+|\s+\n|\s*#[\s\S]*?\n|\n/gm,s=t.replace(a,"");return new RegExp(s)}function p(u){var t=u.raw[0],a=/^\s+|\s+\n|\s*#[\s\S]*?\n|\n/gm,s=t.replace(a,"");return new RegExp(s,"g")}Object.defineProperty(i,"__esModule",{value:true}),i.default=y})}(ye)),ye}var Cn=En();const et=at(Cn),kn=["innerHTML"],tt="yyyy-MM-dd hh:mm:ss",$n=Se({__name:"logs",props:{logs:{},showLink:{type:Boolean},maxHeight:{}},setup(e){const i=e,f=new(et.default||et);function o(p,u,t=""){return`\x1B[3${p<8?p:"8;5;"+p}${t}m${u}\x1B[0m`}function y(p){return p.index&&i.logs[p.index-1].id>p.id&&p.name==="app"}function _(p){const u=`[${p.type[0].toUpperCase()}]`,t=" ";let a=3+t.length,s="";a+=tt.length+t.length,s+=o(8,Ut.template(tt,new Date(p.timestamp)))+t;const l=On.code(p.name,{colors:3}),h=o(l,p.name,";1"),c=h.length-p.name.length;return s+=u+t+h.padEnd(c)+t,s+=p.content.replace(/\n/g,`
`+" ".repeat(a)),f.ansi_to_html(s)}return(p,u)=>{const t=de("k-icon"),a=de("router-link");return H(),_e(Y(zt),{class:"log-list k-text-selectable",data:p.logs,count:300,"max-height":p.maxHeight},{default:me(s=>{var l,h;return[Z("div",{class:It({line:true,start:y(s)})},[Z("code",{innerHTML:_(s)},null,8,kn),p.showLink&&Y(I).config&&Y(I).packages&&((h=(l=s.meta)==null?void 0:l.paths)!=null&&h.length)?(H(),_e(a,{key:0,class:"log-link inline-flex items-center justify-center absolute w-20px h-20px bottom-0 right-0",to:"/plugins/"+s.meta.paths[0].replace(/\./,"/")},{default:me(()=>[we(t,{name:"arrow-right"})]),_:2},1032,["to"])):nt("v-if",true)],2)]}),_:1},8,["data","max-height"])}}});const Oe=(e,i)=>{const f=e.__vccOpts||e;for(const[o,y]of i)f[o]=y;return f},lt=Oe($n,[["__scopeId","data-v-f399e7fe"]]),Mn=Se({__name:"index",setup(e){return(i,f)=>{const o=de("k-layout");return H(),_e(o,null,{default:me(()=>[we(lt,{class:"layout-logger",logs:Y(I).logs,"show-link":""},null,8,["logs"])]),_:1})}}}),An=e=>(Nt("data-v-af449902"),e=e(),qt(),e),Ln=An(()=>Z("h2",{class:"k-schema-header"}," \u8FD0\u884C\u65E5\u5FD7 ",-1)),In=Se({__name:"settings",setup(e){const i=Bt("manager.settings.current"),f=Dt(()=>{var _,p;if(!I.logs)return[];const o=[];let y=1/0;for(let u=I.logs.length-1;u>0&&!(I.logs[u].id>=y);--u)y=I.logs[u].id,(p=(_=I.logs[u].meta)==null?void 0:_.paths)!=null&&p.includes(i.value.path)&&o.unshift(I.logs[u]);return o});return(o,y)=>{var _;return(_=f.value)!=null&&_.length?(H(),rt(Rt,{key:0},[Ln,we(lt,{class:"settings-logger",logs:f.value,"max-height":"216px"},null,8,["logs"])],64)):nt("v-if",true)}}});const Bn=Oe(In,[["__scopeId","data-v-af449902"]]);const Dn={},Rn={class:"k-icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 384 512"},Nn=Z("path",{fill:"currentColor",d:"M304 336h-128C167.2 336 160 343.2 160 352s7.156 16 16 16h128c8.844 0 16-7.156 16-16S312.8 336 304 336zM304 240h-96C199.2 240 192 247.2 192 256s7.156 16 16 16h96C312.8 272 320 264.8 320 256S312.8 240 304 240zM96 328c-13.25 0-24 10.74-24 24c0 13.25 10.75 24 24 24c13.26 0 24-10.75 24-24C120 338.7 109.3 328 96 328zM320 64c-8.844 0-16 7.156-16 16S311.2 96 320 96c17.64 0 32 14.34 32 32v320c0 17.66-14.36 32-32 32H64c-17.64 0-32-14.34-32-32V128c0-17.66 14.36-32 32-32c8.844 0 16-7.156 16-16S72.84 64 64 64C28.7 64 0 92.72 0 128v320c0 35.28 28.7 64 64 64h256c35.3 0 64-28.72 64-64V128C384 92.72 355.3 64 320 64zM112 128h160C280.8 128 288 120.8 288 112S280.8 96 272 96h-24.88C252.6 86.55 256 75.72 256 64c0-35.35-28.65-64-64-64S128 28.65 128 64c0 11.72 3.379 22.55 8.877 32H112C103.2 96 96 103.2 96 112S103.2 128 112 128zM192 32c17.64 0 32 14.36 32 32s-14.36 32-32 32S160 81.64 160 64S174.4 32 192 32zM68.25 229.2c-6 6.5-5.594 16.59 .9062 22.59l34.66 32C106.9 286.6 110.8 288 114.7 288c4.203 0 8.406-1.656 11.55-4.938l61.33-64c6.125-6.375 5.906-16.5-.4844-22.62c-6.359-6.094-16.48-5.906-22.61 .5L113.1 249.6L90.84 228.3C84.39 222.3 74.22 222.6 68.25 229.2z"},null,-1),qn=[Nn];function zn(e,i){return H(),rt("svg",Rn,qn)}const Un=Oe(Dn,[["render",zn]]);Wt.register("activity:logs",Un);const Pn=e=>{e.page({path:"/logs",name:"\u65E5\u5FD7",icon:"activity:logs",order:0,authority:4,fields:["logs"],component:Mn}),e.slot({type:"plugin-details",component:Bn,order:-800})};export{Pn as default};
