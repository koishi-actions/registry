var f=Object.defineProperty;var y=Object.getOwnPropertyDescriptor;var Y=Object.getOwnPropertyNames;var $=Object.prototype.hasOwnProperty;var B=(u,e)=>()=>(u&&(e=u(u=0)),e);var k=(u,e)=>()=>(e||u((e={exports:{}}).exports,e),e.exports);var g=(u,e,n,s)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of Y(e))!$.call(u,r)&&r!==n&&f(u,r,{get:()=>e[r],enumerable:!(s=y(e,r))||s.enumerable});return u},d=(u,e,n)=>(g(u,e,"default"),n&&g(n,e,"default"));var j=u=>g(f({},"__esModule",{value:!0}),u);import{Buffer as D}from"https://registry.koishi.chat/modules/buffer/index.js";import A from"https://registry.koishi.chat/modules/process/index.js";var c=B(()=>{});var C={};import*as L from"https://registry.koishi.chat/modules/@satorijs/element/jsx-runtime/index.js";var h=B(()=>{c();d(C,L)});var p={};import*as P from"https://registry.koishi.chat/modules/koishi/index.js";var w=B(()=>{c();d(p,P)});var R=k(i=>{c();Object.defineProperty(i,"__esModule",{value:!0});i.apply=i.using=i.Config=i.name=void 0;var t=(h(),j(C)),m=(w(),j(p));i.name="cumyou";var I=new m.Logger(i.name);i.Config=m.Schema.object({probability:m.Schema.percent().default(.3).description("社保不怀孕的概率……"),cutprobability:m.Schema.percent().default(.3).description("寸止失败的概率……"),maxCount:m.Schema.number().default(10).description("一个群友的最大社保次数")});i.using=["database"];function S(u,e){u.database.extend("CumYou",{id:"string",time:"unsigned",count:"unsigned"}),u.command("cum <user:user>",`社保你的群友们！！(最多${e.maxCount}次)`).alias("社保").option("cut","-c 寸止").action(async({session:n,options:s},r)=>{let o=m.Random.bool(e.cutprobability),a=r?r.replace(/.*:/gi,""):n.userId,F=new Date,E=new Date(F.getFullYear(),F.getMonth(),F.getDate()).getTime(),b=(await u.database.get("CumYou",{id:a}))[0]?.time,l=(await u.database.get("CumYou",{id:a}))[0]?.count;if(I.info(`${E} | ${b}`),(!b||E-b>0)&&await u.database.upsert("CumYou",[{id:a,time:E,count:0}]),l<e.maxCount||!l)s.cut?s.cut&&!o&&await u.database.upsert("CumYou",[{id:a,count:l?l+1:1}]):await u.database.upsert("CumYou",[{id:a,count:l?l+1:1}]);else return(0,t.jsxs)(t.Fragment,{children:["群友",(0,t.jsx)("at",{id:a}),"的小肚肚已经装不下了，请不要再社了！"]});let x=["一只男娃","一只女娃","一对男娃双胞胎","一对女娃双胞胎","三胞胎！","一个大胖小子","一对龙凤双胞胎","一只小巧小女儿"];return m.Random.bool(e.probability)&&!s.cut?(0,t.jsxs)(t.Fragment,{children:["你社保了群友",(0,t.jsx)("at",{id:a}),", 但她并没有怀孕……"]}):s.cut&&o?(0,t.jsxs)(t.Fragment,{children:["你在cum群友",(0,t.jsx)("at",{id:a}),"的过程中使用了寸止，但你没有忍住，",m.Random.bool(e.probability)?"庆幸的是没有怀孕":`群友诞下了${m.Random.pick(x)}`]}):s.cut&&!o?(0,t.jsxs)(t.Fragment,{children:["你在cum群友",(0,t.jsx)("at",{id:a}),"的过程中成功寸止！"]}):(0,t.jsxs)(t.Fragment,{children:["你社保了群友",(0,t.jsx)("at",{id:a})," 并诞下了",m.Random.pick(x)]})}),u.command("cum/check <user:user>","查看群友被社次数").alias("社保查询").action(async({session:n,options:s},r)=>{let o=r?r.replace(/.*:/gi,""):n.userId,a=(await u.database.get("CumYou",{id:o}))[0]?.count;return(0,t.jsxs)(t.Fragment,{children:["群友",String(o),"今日已被社",`${a||0}/${e.maxCount}次`]})}),u.command("cum/resetcum <user:user> [cnt:number]","重置群友被社次数").alias("社保重置").usage("resetcum @xxxx 2").action(async({session:n,options:s},r,o)=>{let a=r?r.replace(/.*:/gi,""):n.userId,F=!o||o<0?0:o;return await u.database.upsert("CumYou",[{id:a,count:F}]),(0,t.jsxs)(t.Fragment,{children:["群友",String(a),"今日社保次数已重置为",`${F}/${e.maxCount}次`]})})}i.apply=S});export default R();
