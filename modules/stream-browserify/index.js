var Je=Object.defineProperty;var rr=Object.getOwnPropertyDescriptor;var ir=Object.getOwnPropertyNames;var nr=Object.prototype.hasOwnProperty;var Qe=(e,t)=>()=>(e&&(t=e(e=0)),t);var g=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var ye=(e,t,r,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of ir(t))!nr.call(e,n)&&n!==r&&Je(e,n,{get:()=>t[n],enumerable:!(i=rr(t,n))||i.enumerable});return e},ee=(e,t,r)=>(ye(e,t,"default"),r&&ye(r,t,"default"));var te=e=>ye(Je({},"__esModule",{value:!0}),e);import{Buffer as b}from"https://registry.koishi.chat/modules/buffer/index.js";import f from"https://registry.koishi.chat/modules/process/index.js";var u=Qe(()=>{});import ar from"https://registry.koishi.chat/modules/events/index.js";var re=g((gn,Ze)=>{u();Ze.exports=ar});var D=g((_n,ve)=>{u();typeof Object.create=="function"?ve.exports=function(t,r){r&&(t.super_=r,t.prototype=Object.create(r.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:ve.exports=function(t,r){if(r){t.super_=r;var i=function(){};i.prototype=r.prototype,t.prototype=new i,t.prototype.constructor=t}}});var we=g((vn,ze)=>{u();ze.exports=re().EventEmitter});var T={};import*as Rn from"https://registry.koishi.chat/modules/buffer/index.js";var Y=Qe(()=>{u();ee(T,Rn)});import or from"https://registry.koishi.chat/modules/util/index.js";var Ee=g((mn,et)=>{u();et.exports=or});var ot=g((Mn,at)=>{"use strict";u();function tt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,i)}return r}function rt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?tt(Object(r),!0).forEach(function(i){fr(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tt(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}function fr(e,t,r){return t=nt(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function lr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function it(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,nt(i.key),i)}}function ur(e,t,r){return t&&it(e.prototype,t),r&&it(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function nt(e){var t=sr(e,"string");return typeof t=="symbol"?t:String(t)}function sr(e,t){if(typeof e!="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var dr=(Y(),te(T)),ie=dr.Buffer,hr=Ee(),Re=hr.inspect,cr=Re&&Re.custom||"inspect";function pr(e,t,r){ie.prototype.copy.call(e,t,r)}at.exports=(function(){function e(){lr(this,e),this.head=null,this.tail=null,this.length=0}return ur(e,[{key:"push",value:function(r){var i={data:r,next:null};this.length>0?this.tail.next=i:this.head=i,this.tail=i,++this.length}},{key:"unshift",value:function(r){var i={data:r,next:this.head};this.length===0&&(this.tail=i),this.head=i,++this.length}},{key:"shift",value:function(){if(this.length!==0){var r=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,r}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(r){if(this.length===0)return"";for(var i=this.head,n=""+i.data;i=i.next;)n+=r+i.data;return n}},{key:"concat",value:function(r){if(this.length===0)return ie.alloc(0);for(var i=ie.allocUnsafe(r>>>0),n=this.head,a=0;n;)pr(n.data,i,a),a+=n.data.length,n=n.next;return i}},{key:"consume",value:function(r,i){var n;return r<this.head.data.length?(n=this.head.data.slice(0,r),this.head.data=this.head.data.slice(r)):r===this.head.data.length?n=this.shift():n=i?this._getString(r):this._getBuffer(r),n}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(r){var i=this.head,n=1,a=i.data;for(r-=a.length;i=i.next;){var o=i.data,l=r>o.length?o.length:r;if(l===o.length?a+=o:a+=o.slice(0,r),r-=l,r===0){l===o.length?(++n,i.next?this.head=i.next:this.head=this.tail=null):(this.head=i,i.data=o.slice(l));break}++n}return this.length-=n,a}},{key:"_getBuffer",value:function(r){var i=ie.allocUnsafe(r),n=this.head,a=1;for(n.data.copy(i),r-=n.data.length;n=n.next;){var o=n.data,l=r>o.length?o.length:r;if(o.copy(i,i.length-r,0,l),r-=l,r===0){l===o.length?(++a,n.next?this.head=n.next:this.head=this.tail=null):(this.head=n,n.data=o.slice(l));break}++a}return this.length-=a,i}},{key:cr,value:function(r,i){return Re(this,rt(rt({},i),{},{depth:0,customInspect:!1}))}}]),e})()});var me=g((An,lt)=>{"use strict";u();function gr(e,t){var r=this,i=this._readableState&&this._readableState.destroyed,n=this._writableState&&this._writableState.destroyed;return i||n?(t?t(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,f.nextTick(Se,this,e)):f.nextTick(Se,this,e)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(a){!t&&a?r._writableState?r._writableState.errorEmitted?f.nextTick(ne,r):(r._writableState.errorEmitted=!0,f.nextTick(ft,r,a)):f.nextTick(ft,r,a):t?(f.nextTick(ne,r),t(a)):f.nextTick(ne,r)}),this)}function ft(e,t){Se(e,t),ne(e)}function ne(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function br(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function Se(e,t){e.emit("error",t)}function _r(e,t){var r=e._readableState,i=e._writableState;r&&r.autoDestroy||i&&i.autoDestroy?e.destroy(t):e.emit("error",t)}lt.exports={destroy:gr,undestroy:br,errorOrDestroy:_r}});var q=g((Nn,dt)=>{"use strict";u();function yr(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var st={};function y(e,t,r){r||(r=Error);function i(a,o,l){return typeof t=="string"?t:t(a,o,l)}var n=(function(a){yr(o,a);function o(l,h,c){return a.call(this,i(l,h,c))||this}return o})(r);n.prototype.name=r.name,n.prototype.code=e,st[e]=n}function ut(e,t){if(Array.isArray(e)){var r=e.length;return e=e.map(function(i){return String(i)}),r>2?"one of ".concat(t," ").concat(e.slice(0,r-1).join(", "),", or ")+e[r-1]:r===2?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])}else return"of ".concat(t," ").concat(String(e))}function vr(e,t,r){return e.substr(!r||r<0?0:+r,t.length)===t}function wr(e,t,r){return(r===void 0||r>e.length)&&(r=e.length),e.substring(r-t.length,r)===t}function Er(e,t,r){return typeof r!="number"&&(r=0),r+t.length>e.length?!1:e.indexOf(t,r)!==-1}y("ERR_INVALID_OPT_VALUE",function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'},TypeError);y("ERR_INVALID_ARG_TYPE",function(e,t,r){var i;typeof t=="string"&&vr(t,"not ")?(i="must not be",t=t.replace(/^not /,"")):i="must be";var n;if(wr(e," argument"))n="The ".concat(e," ").concat(i," ").concat(ut(t,"type"));else{var a=Er(e,".")?"property":"argument";n='The "'.concat(e,'" ').concat(a," ").concat(i," ").concat(ut(t,"type"))}return n+=". Received type ".concat(typeof r),n},TypeError);y("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF");y("ERR_METHOD_NOT_IMPLEMENTED",function(e){return"The "+e+" method is not implemented"});y("ERR_STREAM_PREMATURE_CLOSE","Premature close");y("ERR_STREAM_DESTROYED",function(e){return"Cannot call "+e+" after a stream was destroyed"});y("ERR_MULTIPLE_CALLBACK","Callback called multiple times");y("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable");y("ERR_STREAM_WRITE_AFTER_END","write after end");y("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);y("ERR_UNKNOWN_ENCODING",function(e){return"Unknown encoding: "+e},TypeError);y("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event");dt.exports.codes=st});var Te=g((Dn,ht)=>{"use strict";u();var Rr=q().codes.ERR_INVALID_OPT_VALUE;function Sr(e,t,r){return e.highWaterMark!=null?e.highWaterMark:t?e[r]:null}function mr(e,t,r,i){var n=Sr(t,i,r);if(n!=null){if(!(isFinite(n)&&Math.floor(n)===n)||n<0){var a=i?r:"highWaterMark";throw new Rr(a,n)}return Math.floor(n)}return e.objectMode?16:16*1024}ht.exports={getHighWaterMark:mr}});var pt=g((xn,ct)=>{u();ct.exports=Tr;function Tr(e,t){if(Me("noDeprecation"))return e;var r=!1;function i(){if(!r){if(Me("throwDeprecation"))throw new Error(t);Me("traceDeprecation"),r=!0}return e.apply(this,arguments)}return i}function Me(e){try{if(!globalThis.localStorage)return!1}catch{return!1}var t=globalThis.localStorage[e];return t==null?!1:String(t).toLowerCase()==="true"}});var Oe=g((jn,wt)=>{"use strict";u();wt.exports=p;function bt(e){var t=this;this.next=null,this.entry=null,this.finish=function(){Zr(t,e)}}var B;p.WritableState=$;var Mr={deprecate:pt()},_t=we(),oe=(Y(),te(T)).Buffer,Lr=(typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function Ar(e){return oe.from(e)}function Or(e){return oe.isBuffer(e)||e instanceof Lr}var Ae=me(),Nr=Te(),Pr=Nr.getHighWaterMark,L=q().codes,Dr=L.ERR_INVALID_ARG_TYPE,qr=L.ERR_METHOD_NOT_IMPLEMENTED,xr=L.ERR_MULTIPLE_CALLBACK,Cr=L.ERR_STREAM_CANNOT_PIPE,jr=L.ERR_STREAM_DESTROYED,Ir=L.ERR_STREAM_NULL_VALUES,kr=L.ERR_STREAM_WRITE_AFTER_END,Wr=L.ERR_UNKNOWN_ENCODING,F=Ae.errorOrDestroy;D()(p,_t);function Ur(){}function $(e,t,r){B=B||x(),e=e||{},typeof r!="boolean"&&(r=t instanceof B),this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.writableObjectMode),this.highWaterMark=Pr(this,e,"writableHighWaterMark",r),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var i=e.decodeStrings===!1;this.decodeStrings=!i,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(n){Kr(t,n)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=e.emitClose!==!1,this.autoDestroy=!!e.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new bt(this)}$.prototype.getBuffer=function(){for(var t=this.bufferedRequest,r=[];t;)r.push(t),t=t.next;return r};(function(){try{Object.defineProperty($.prototype,"buffer",{get:Mr.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}})();var ae;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(ae=Function.prototype[Symbol.hasInstance],Object.defineProperty(p,Symbol.hasInstance,{value:function(t){return ae.call(this,t)?!0:this!==p?!1:t&&t._writableState instanceof $}})):ae=function(t){return t instanceof this};function p(e){B=B||x();var t=this instanceof B;if(!t&&!ae.call(p,this))return new p(e);this._writableState=new $(e,this,t),this.writable=!0,e&&(typeof e.write=="function"&&(this._write=e.write),typeof e.writev=="function"&&(this._writev=e.writev),typeof e.destroy=="function"&&(this._destroy=e.destroy),typeof e.final=="function"&&(this._final=e.final)),_t.call(this)}p.prototype.pipe=function(){F(this,new Cr)};function Br(e,t){var r=new kr;F(e,r),f.nextTick(t,r)}function Fr(e,t,r,i){var n;return r===null?n=new Ir:typeof r!="string"&&!t.objectMode&&(n=new Dr("chunk",["string","Buffer"],r)),n?(F(e,n),f.nextTick(i,n),!1):!0}p.prototype.write=function(e,t,r){var i=this._writableState,n=!1,a=!i.objectMode&&Or(e);return a&&!oe.isBuffer(e)&&(e=Ar(e)),typeof t=="function"&&(r=t,t=null),a?t="buffer":t||(t=i.defaultEncoding),typeof r!="function"&&(r=Ur),i.ending?Br(this,r):(a||Fr(this,i,e,r))&&(i.pendingcb++,n=Gr(this,i,a,e,t,r)),n};p.prototype.cork=function(){this._writableState.corked++};p.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,!e.writing&&!e.corked&&!e.bufferProcessing&&e.bufferedRequest&&yt(this,e))};p.prototype.setDefaultEncoding=function(t){if(typeof t=="string"&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new Wr(t);return this._writableState.defaultEncoding=t,this};Object.defineProperty(p.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function Hr(e,t,r){return!e.objectMode&&e.decodeStrings!==!1&&typeof t=="string"&&(t=oe.from(t,r)),t}Object.defineProperty(p.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function Gr(e,t,r,i,n,a){if(!r){var o=Hr(t,i,n);i!==o&&(r=!0,n="buffer",i=o)}var l=t.objectMode?1:i.length;t.length+=l;var h=t.length<t.highWaterMark;if(h||(t.needDrain=!0),t.writing||t.corked){var c=t.lastBufferedRequest;t.lastBufferedRequest={chunk:i,encoding:n,isBuf:r,callback:a,next:null},c?c.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else Le(e,t,!1,l,i,n,a);return h}function Le(e,t,r,i,n,a,o){t.writelen=i,t.writecb=o,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new jr("write")):r?e._writev(n,t.onwrite):e._write(n,a,t.onwrite),t.sync=!1}function Vr(e,t,r,i,n){--t.pendingcb,r?(f.nextTick(n,i),f.nextTick(K,e,t),e._writableState.errorEmitted=!0,F(e,i)):(n(i),e._writableState.errorEmitted=!0,F(e,i),K(e,t))}function Yr(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function Kr(e,t){var r=e._writableState,i=r.sync,n=r.writecb;if(typeof n!="function")throw new xr;if(Yr(r),t)Vr(e,r,i,t,n);else{var a=vt(r)||e.destroyed;!a&&!r.corked&&!r.bufferProcessing&&r.bufferedRequest&&yt(e,r),i?f.nextTick(gt,e,r,a,n):gt(e,r,a,n)}}function gt(e,t,r,i){r||$r(e,t),t.pendingcb--,i(),K(e,t)}function $r(e,t){t.length===0&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function yt(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var i=t.bufferedRequestCount,n=new Array(i),a=t.corkedRequestsFree;a.entry=r;for(var o=0,l=!0;r;)n[o]=r,r.isBuf||(l=!1),r=r.next,o+=1;n.allBuffers=l,Le(e,t,!0,t.length,n,"",a.finish),t.pendingcb++,t.lastBufferedRequest=null,a.next?(t.corkedRequestsFree=a.next,a.next=null):t.corkedRequestsFree=new bt(t),t.bufferedRequestCount=0}else{for(;r;){var h=r.chunk,c=r.encoding,_=r.callback,S=t.objectMode?1:h.length;if(Le(e,t,!1,S,h,c,_),r=r.next,t.bufferedRequestCount--,t.writing)break}r===null&&(t.lastBufferedRequest=null)}t.bufferedRequest=r,t.bufferProcessing=!1}p.prototype._write=function(e,t,r){r(new qr("_write()"))};p.prototype._writev=null;p.prototype.end=function(e,t,r){var i=this._writableState;return typeof e=="function"?(r=e,e=null,t=null):typeof t=="function"&&(r=t,t=null),e!=null&&this.write(e,t),i.corked&&(i.corked=1,this.uncork()),i.ending||Qr(this,i,r),this};Object.defineProperty(p.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function vt(e){return e.ending&&e.length===0&&e.bufferedRequest===null&&!e.finished&&!e.writing}function Xr(e,t){e._final(function(r){t.pendingcb--,r&&F(e,r),t.prefinished=!0,e.emit("prefinish"),K(e,t)})}function Jr(e,t){!t.prefinished&&!t.finalCalled&&(typeof e._final=="function"&&!t.destroyed?(t.pendingcb++,t.finalCalled=!0,f.nextTick(Xr,e,t)):(t.prefinished=!0,e.emit("prefinish")))}function K(e,t){var r=vt(t);if(r&&(Jr(e,t),t.pendingcb===0&&(t.finished=!0,e.emit("finish"),t.autoDestroy))){var i=e._readableState;(!i||i.autoDestroy&&i.endEmitted)&&e.destroy()}return r}function Qr(e,t,r){t.ending=!0,K(e,t),r&&(t.finished?f.nextTick(r):e.once("finish",r)),t.ended=!0,e.writable=!1}function Zr(e,t,r){var i=e.entry;for(e.entry=null;i;){var n=i.callback;t.pendingcb--,n(r),i=i.next}t.corkedRequestsFree.next=e}Object.defineProperty(p.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(t){this._writableState&&(this._writableState.destroyed=t)}});p.prototype.destroy=Ae.destroy;p.prototype._undestroy=Ae.undestroy;p.prototype._destroy=function(e,t){t(e)}});var x=g((kn,Rt)=>{"use strict";u();var zr=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};Rt.exports=E;var Et=De(),Pe=Oe();D()(E,Et);for(Ne=zr(Pe.prototype),fe=0;fe<Ne.length;fe++)le=Ne[fe],E.prototype[le]||(E.prototype[le]=Pe.prototype[le]);var Ne,le,fe;function E(e){if(!(this instanceof E))return new E(e);Et.call(this,e),Pe.call(this,e),this.allowHalfOpen=!0,e&&(e.readable===!1&&(this.readable=!1),e.writable===!1&&(this.writable=!1),e.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",ei)))}Object.defineProperty(E.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});Object.defineProperty(E.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});Object.defineProperty(E.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function ei(){this._writableState.ended||f.nextTick(ti,this)}function ti(e){e.end()}Object.defineProperty(E.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(t){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=t,this._writableState.destroyed=t)}})});var Tt=g((qe,mt)=>{u();var ue=(Y(),te(T)),R=ue.Buffer;function St(e,t){for(var r in e)t[r]=e[r]}R.from&&R.alloc&&R.allocUnsafe&&R.allocUnsafeSlow?mt.exports=ue:(St(ue,qe),qe.Buffer=C);function C(e,t,r){return R(e,t,r)}C.prototype=Object.create(R.prototype);St(R,C);C.from=function(e,t,r){if(typeof e=="number")throw new TypeError("Argument must not be a number");return R(e,t,r)};C.alloc=function(e,t,r){if(typeof e!="number")throw new TypeError("Argument must be a number");var i=R(e);return t!==void 0?typeof r=="string"?i.fill(t,r):i.fill(t):i.fill(0),i};C.allocUnsafe=function(e){if(typeof e!="number")throw new TypeError("Argument must be a number");return R(e)};C.allocUnsafeSlow=function(e){if(typeof e!="number")throw new TypeError("Argument must be a number");return ue.SlowBuffer(e)}});var je=g(Lt=>{"use strict";u();var Ce=Tt().Buffer,Mt=Ce.isEncoding||function(e){switch(e=""+e,e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function ri(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}function ii(e){var t=ri(e);if(typeof t!="string"&&(Ce.isEncoding===Mt||!Mt(e)))throw new Error("Unknown encoding: "+e);return t||e}Lt.StringDecoder=X;function X(e){this.encoding=ii(e);var t;switch(this.encoding){case"utf16le":this.text=ui,this.end=si,t=4;break;case"utf8":this.fillLast=oi,t=4;break;case"base64":this.text=di,this.end=hi,t=3;break;default:this.write=ci,this.end=pi;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=Ce.allocUnsafe(t)}X.prototype.write=function(e){if(e.length===0)return"";var t,r;if(this.lastNeed){if(t=this.fillLast(e),t===void 0)return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<e.length?t?t+this.text(e,r):this.text(e,r):t||""};X.prototype.end=li;X.prototype.text=fi;X.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length};function xe(e){return e<=127?0:e>>5===6?2:e>>4===14?3:e>>3===30?4:e>>6===2?-1:-2}function ni(e,t,r){var i=t.length-1;if(i<r)return 0;var n=xe(t[i]);return n>=0?(n>0&&(e.lastNeed=n-1),n):--i<r||n===-2?0:(n=xe(t[i]),n>=0?(n>0&&(e.lastNeed=n-2),n):--i<r||n===-2?0:(n=xe(t[i]),n>=0?(n>0&&(n===2?n=0:e.lastNeed=n-3),n):0))}function ai(e,t,r){if((t[0]&192)!==128)return e.lastNeed=0,"�";if(e.lastNeed>1&&t.length>1){if((t[1]&192)!==128)return e.lastNeed=1,"�";if(e.lastNeed>2&&t.length>2&&(t[2]&192)!==128)return e.lastNeed=2,"�"}}function oi(e){var t=this.lastTotal-this.lastNeed,r=ai(this,e,t);if(r!==void 0)return r;if(this.lastNeed<=e.length)return e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,t,0,e.length),this.lastNeed-=e.length}function fi(e,t){var r=ni(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=r;var i=e.length-(r-this.lastNeed);return e.copy(this.lastChar,0,i),e.toString("utf8",t,i)}function li(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"�":t}function ui(e,t){if((e.length-t)%2===0){var r=e.toString("utf16le",t);if(r){var i=r.charCodeAt(r.length-1);if(i>=55296&&i<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function si(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,r)}return t}function di(e,t){var r=(e.length-t)%3;return r===0?e.toString("base64",t):(this.lastNeed=3-r,this.lastTotal=3,r===1?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-r))}function hi(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function ci(e){return e.toString(this.encoding)}function pi(e){return e&&e.length?this.write(e):""}});var se=g((Hn,Nt)=>{"use strict";u();var At=q().codes.ERR_STREAM_PREMATURE_CLOSE;function gi(e){var t=!1;return function(){if(!t){t=!0;for(var r=arguments.length,i=new Array(r),n=0;n<r;n++)i[n]=arguments[n];e.apply(this,i)}}}function bi(){}function _i(e){return e.setHeader&&typeof e.abort=="function"}function Ot(e,t,r){if(typeof t=="function")return Ot(e,null,t);t||(t={}),r=gi(r||bi);var i=t.readable||t.readable!==!1&&e.readable,n=t.writable||t.writable!==!1&&e.writable,a=function(){e.writable||l()},o=e._writableState&&e._writableState.finished,l=function(){n=!1,o=!0,i||r.call(e)},h=e._readableState&&e._readableState.endEmitted,c=function(){i=!1,h=!0,n||r.call(e)},_=function(w){r.call(e,w)},S=function(){var w;if(i&&!h)return(!e._readableState||!e._readableState.ended)&&(w=new At),r.call(e,w);if(n&&!o)return(!e._writableState||!e._writableState.ended)&&(w=new At),r.call(e,w)},P=function(){e.req.on("finish",l)};return _i(e)?(e.on("complete",l),e.on("abort",S),e.req?P():e.on("request",P)):n&&!e._writableState&&(e.on("end",a),e.on("close",a)),e.on("end",c),e.on("finish",l),t.error!==!1&&e.on("error",_),e.on("close",S),function(){e.removeListener("complete",l),e.removeListener("abort",S),e.removeListener("request",P),e.req&&e.req.removeListener("finish",l),e.removeListener("end",a),e.removeListener("close",a),e.removeListener("finish",l),e.removeListener("end",c),e.removeListener("error",_),e.removeListener("close",S)}}Nt.exports=Ot});var Dt=g((Vn,Pt)=>{"use strict";u();var de;function A(e,t,r){return t=yi(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function yi(e){var t=vi(e,"string");return typeof t=="symbol"?t:String(t)}function vi(e,t){if(typeof e!="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var wi=se(),O=Symbol("lastResolve"),j=Symbol("lastReject"),J=Symbol("error"),he=Symbol("ended"),I=Symbol("lastPromise"),Ie=Symbol("handlePromise"),k=Symbol("stream");function N(e,t){return{value:e,done:t}}function Ei(e){var t=e[O];if(t!==null){var r=e[k].read();r!==null&&(e[I]=null,e[O]=null,e[j]=null,t(N(r,!1)))}}function Ri(e){f.nextTick(Ei,e)}function Si(e,t){return function(r,i){e.then(function(){if(t[he]){r(N(void 0,!0));return}t[Ie](r,i)},i)}}var mi=Object.getPrototypeOf(function(){}),Ti=Object.setPrototypeOf((de={get stream(){return this[k]},next:function(){var t=this,r=this[J];if(r!==null)return Promise.reject(r);if(this[he])return Promise.resolve(N(void 0,!0));if(this[k].destroyed)return new Promise(function(o,l){f.nextTick(function(){t[J]?l(t[J]):o(N(void 0,!0))})});var i=this[I],n;if(i)n=new Promise(Si(i,this));else{var a=this[k].read();if(a!==null)return Promise.resolve(N(a,!1));n=new Promise(this[Ie])}return this[I]=n,n}},A(de,Symbol.asyncIterator,function(){return this}),A(de,"return",function(){var t=this;return new Promise(function(r,i){t[k].destroy(null,function(n){if(n){i(n);return}r(N(void 0,!0))})})}),de),mi),Mi=function(t){var r,i=Object.create(Ti,(r={},A(r,k,{value:t,writable:!0}),A(r,O,{value:null,writable:!0}),A(r,j,{value:null,writable:!0}),A(r,J,{value:null,writable:!0}),A(r,he,{value:t._readableState.endEmitted,writable:!0}),A(r,Ie,{value:function(a,o){var l=i[k].read();l?(i[I]=null,i[O]=null,i[j]=null,a(N(l,!1))):(i[O]=a,i[j]=o)},writable:!0}),r));return i[I]=null,wi(t,function(n){if(n&&n.code!=="ERR_STREAM_PREMATURE_CLOSE"){var a=i[j];a!==null&&(i[I]=null,i[O]=null,i[j]=null,a(n)),i[J]=n;return}var o=i[O];o!==null&&(i[I]=null,i[O]=null,i[j]=null,o(N(void 0,!0))),i[he]=!0}),t.on("readable",Ri.bind(null,i)),i};Pt.exports=Mi});var xt=g((Kn,qt)=>{u();qt.exports=function(){throw new Error("Readable.from is not available in the browser")}});var De=g((Jn,Gt)=>{"use strict";u();Gt.exports=d;var H;d.ReadableState=kt;var Xn=re().EventEmitter,It=function(t,r){return t.listeners(r).length},Z=we(),ce=(Y(),te(T)).Buffer,Li=(typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function Ai(e){return ce.from(e)}function Oi(e){return ce.isBuffer(e)||e instanceof Li}var ke=Ee(),s;ke&&ke.debuglog?s=ke.debuglog("stream"):s=function(){};var Ni=ot(),Ve=me(),Pi=Te(),Di=Pi.getHighWaterMark,pe=q().codes,qi=pe.ERR_INVALID_ARG_TYPE,xi=pe.ERR_STREAM_PUSH_AFTER_EOF,Ci=pe.ERR_METHOD_NOT_IMPLEMENTED,ji=pe.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,G,We,Ue;D()(d,Z);var Q=Ve.errorOrDestroy,Be=["error","close","destroy","pause","resume"];function Ii(e,t,r){if(typeof e.prependListener=="function")return e.prependListener(t,r);!e._events||!e._events[t]?e.on(t,r):Array.isArray(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]}function kt(e,t,r){H=H||x(),e=e||{},typeof r!="boolean"&&(r=t instanceof H),this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.readableObjectMode),this.highWaterMark=Di(this,e,"readableHighWaterMark",r),this.buffer=new Ni,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=e.emitClose!==!1,this.autoDestroy=!!e.autoDestroy,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(G||(G=je().StringDecoder),this.decoder=new G(e.encoding),this.encoding=e.encoding)}function d(e){if(H=H||x(),!(this instanceof d))return new d(e);var t=this instanceof H;this._readableState=new kt(e,this,t),this.readable=!0,e&&(typeof e.read=="function"&&(this._read=e.read),typeof e.destroy=="function"&&(this._destroy=e.destroy)),Z.call(this)}Object.defineProperty(d.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(t){this._readableState&&(this._readableState.destroyed=t)}});d.prototype.destroy=Ve.destroy;d.prototype._undestroy=Ve.undestroy;d.prototype._destroy=function(e,t){t(e)};d.prototype.push=function(e,t){var r=this._readableState,i;return r.objectMode?i=!0:typeof e=="string"&&(t=t||r.defaultEncoding,t!==r.encoding&&(e=ce.from(e,t),t=""),i=!0),Wt(this,e,t,!1,i)};d.prototype.unshift=function(e){return Wt(this,e,null,!0,!1)};function Wt(e,t,r,i,n){s("readableAddChunk",t);var a=e._readableState;if(t===null)a.reading=!1,Ui(e,a);else{var o;if(n||(o=ki(a,t)),o)Q(e,o);else if(a.objectMode||t&&t.length>0)if(typeof t!="string"&&!a.objectMode&&Object.getPrototypeOf(t)!==ce.prototype&&(t=Ai(t)),i)a.endEmitted?Q(e,new ji):Fe(e,a,t,!0);else if(a.ended)Q(e,new xi);else{if(a.destroyed)return!1;a.reading=!1,a.decoder&&!r?(t=a.decoder.write(t),a.objectMode||t.length!==0?Fe(e,a,t,!1):Ge(e,a)):Fe(e,a,t,!1)}else i||(a.reading=!1,Ge(e,a))}return!a.ended&&(a.length<a.highWaterMark||a.length===0)}function Fe(e,t,r,i){t.flowing&&t.length===0&&!t.sync?(t.awaitDrain=0,e.emit("data",r)):(t.length+=t.objectMode?1:r.length,i?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&ge(e)),Ge(e,t)}function ki(e,t){var r;return!Oi(t)&&typeof t!="string"&&t!==void 0&&!e.objectMode&&(r=new qi("chunk",["string","Buffer","Uint8Array"],t)),r}d.prototype.isPaused=function(){return this._readableState.flowing===!1};d.prototype.setEncoding=function(e){G||(G=je().StringDecoder);var t=new G(e);this._readableState.decoder=t,this._readableState.encoding=this._readableState.decoder.encoding;for(var r=this._readableState.buffer.head,i="";r!==null;)i+=t.write(r.data),r=r.next;return this._readableState.buffer.clear(),i!==""&&this._readableState.buffer.push(i),this._readableState.length=i.length,this};var Ct=1073741824;function Wi(e){return e>=Ct?e=Ct:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}function jt(e,t){return e<=0||t.length===0&&t.ended?0:t.objectMode?1:e!==e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=Wi(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}d.prototype.read=function(e){s("read",e),e=parseInt(e,10);var t=this._readableState,r=e;if(e!==0&&(t.emittedReadable=!1),e===0&&t.needReadable&&((t.highWaterMark!==0?t.length>=t.highWaterMark:t.length>0)||t.ended))return s("read: emitReadable",t.length,t.ended),t.length===0&&t.ended?He(this):ge(this),null;if(e=jt(e,t),e===0&&t.ended)return t.length===0&&He(this),null;var i=t.needReadable;s("need readable",i),(t.length===0||t.length-e<t.highWaterMark)&&(i=!0,s("length less than watermark",i)),t.ended||t.reading?(i=!1,s("reading or ended",i)):i&&(s("do read"),t.reading=!0,t.sync=!0,t.length===0&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=jt(r,t)));var n;return e>0?n=Ft(e,t):n=null,n===null?(t.needReadable=t.length<=t.highWaterMark,e=0):(t.length-=e,t.awaitDrain=0),t.length===0&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&He(this)),n!==null&&this.emit("data",n),n};function Ui(e,t){if(s("onEofChunk"),!t.ended){if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,t.sync?ge(e):(t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,Ut(e)))}}function ge(e){var t=e._readableState;s("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(s("emitReadable",t.flowing),t.emittedReadable=!0,f.nextTick(Ut,e))}function Ut(e){var t=e._readableState;s("emitReadable_",t.destroyed,t.length,t.ended),!t.destroyed&&(t.length||t.ended)&&(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,Ye(e)}function Ge(e,t){t.readingMore||(t.readingMore=!0,f.nextTick(Bi,e,t))}function Bi(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&t.length===0);){var r=t.length;if(s("maybeReadMore read 0"),e.read(0),r===t.length)break}t.readingMore=!1}d.prototype._read=function(e){Q(this,new Ci("_read()"))};d.prototype.pipe=function(e,t){var r=this,i=this._readableState;switch(i.pipesCount){case 0:i.pipes=e;break;case 1:i.pipes=[i.pipes,e];break;default:i.pipes.push(e);break}i.pipesCount+=1,s("pipe count=%d opts=%j",i.pipesCount,t);var n=(!t||t.end!==!1)&&e!==f.stdout&&e!==f.stderr,a=n?l:V;i.endEmitted?f.nextTick(a):r.once("end",a),e.on("unpipe",o);function o(W,U){s("onunpipe"),W===r&&U&&U.hasUnpiped===!1&&(U.hasUnpiped=!0,_())}function l(){s("onend"),e.end()}var h=Fi(r);e.on("drain",h);var c=!1;function _(){s("cleanup"),e.removeListener("close",m),e.removeListener("finish",w),e.removeListener("drain",h),e.removeListener("error",P),e.removeListener("unpipe",o),r.removeListener("end",l),r.removeListener("end",V),r.removeListener("data",S),c=!0,i.awaitDrain&&(!e._writableState||e._writableState.needDrain)&&h()}r.on("data",S);function S(W){s("ondata");var U=e.write(W);s("dest.write",U),U===!1&&((i.pipesCount===1&&i.pipes===e||i.pipesCount>1&&Ht(i.pipes,e)!==-1)&&!c&&(s("false write response, pause",i.awaitDrain),i.awaitDrain++),r.pause())}function P(W){s("onerror",W),V(),e.removeListener("error",P),It(e,"error")===0&&Q(e,W)}Ii(e,"error",P);function m(){e.removeListener("finish",w),V()}e.once("close",m);function w(){s("onfinish"),e.removeListener("close",m),V()}e.once("finish",w);function V(){s("unpipe"),r.unpipe(e)}return e.emit("pipe",r),i.flowing||(s("pipe resume"),r.resume()),e};function Fi(e){return function(){var r=e._readableState;s("pipeOnDrain",r.awaitDrain),r.awaitDrain&&r.awaitDrain--,r.awaitDrain===0&&It(e,"data")&&(r.flowing=!0,Ye(e))}}d.prototype.unpipe=function(e){var t=this._readableState,r={hasUnpiped:!1};if(t.pipesCount===0)return this;if(t.pipesCount===1)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,r),this);if(!e){var i=t.pipes,n=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var a=0;a<n;a++)i[a].emit("unpipe",this,{hasUnpiped:!1});return this}var o=Ht(t.pipes,e);return o===-1?this:(t.pipes.splice(o,1),t.pipesCount-=1,t.pipesCount===1&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,r),this)};d.prototype.on=function(e,t){var r=Z.prototype.on.call(this,e,t),i=this._readableState;return e==="data"?(i.readableListening=this.listenerCount("readable")>0,i.flowing!==!1&&this.resume()):e==="readable"&&!i.endEmitted&&!i.readableListening&&(i.readableListening=i.needReadable=!0,i.flowing=!1,i.emittedReadable=!1,s("on readable",i.length,i.reading),i.length?ge(this):i.reading||f.nextTick(Hi,this)),r};d.prototype.addListener=d.prototype.on;d.prototype.removeListener=function(e,t){var r=Z.prototype.removeListener.call(this,e,t);return e==="readable"&&f.nextTick(Bt,this),r};d.prototype.removeAllListeners=function(e){var t=Z.prototype.removeAllListeners.apply(this,arguments);return(e==="readable"||e===void 0)&&f.nextTick(Bt,this),t};function Bt(e){var t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!t.paused?t.flowing=!0:e.listenerCount("data")>0&&e.resume()}function Hi(e){s("readable nexttick read 0"),e.read(0)}d.prototype.resume=function(){var e=this._readableState;return e.flowing||(s("resume"),e.flowing=!e.readableListening,Gi(this,e)),e.paused=!1,this};function Gi(e,t){t.resumeScheduled||(t.resumeScheduled=!0,f.nextTick(Vi,e,t))}function Vi(e,t){s("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),Ye(e),t.flowing&&!t.reading&&e.read(0)}d.prototype.pause=function(){return s("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(s("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function Ye(e){var t=e._readableState;for(s("flow",t.flowing);t.flowing&&e.read()!==null;);}d.prototype.wrap=function(e){var t=this,r=this._readableState,i=!1;e.on("end",function(){if(s("wrapped end"),r.decoder&&!r.ended){var o=r.decoder.end();o&&o.length&&t.push(o)}t.push(null)}),e.on("data",function(o){if(s("wrapped data"),r.decoder&&(o=r.decoder.write(o)),!(r.objectMode&&o==null)&&!(!r.objectMode&&(!o||!o.length))){var l=t.push(o);l||(i=!0,e.pause())}});for(var n in e)this[n]===void 0&&typeof e[n]=="function"&&(this[n]=(function(l){return function(){return e[l].apply(e,arguments)}})(n));for(var a=0;a<Be.length;a++)e.on(Be[a],this.emit.bind(this,Be[a]));return this._read=function(o){s("wrapped _read",o),i&&(i=!1,e.resume())},this};typeof Symbol=="function"&&(d.prototype[Symbol.asyncIterator]=function(){return We===void 0&&(We=Dt()),We(this)});Object.defineProperty(d.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}});Object.defineProperty(d.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}});Object.defineProperty(d.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(t){this._readableState&&(this._readableState.flowing=t)}});d._fromList=Ft;Object.defineProperty(d.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function Ft(e,t){if(t.length===0)return null;var r;return t.objectMode?r=t.buffer.shift():!e||e>=t.length?(t.decoder?r=t.buffer.join(""):t.buffer.length===1?r=t.buffer.first():r=t.buffer.concat(t.length),t.buffer.clear()):r=t.buffer.consume(e,t.decoder),r}function He(e){var t=e._readableState;s("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,f.nextTick(Yi,t,e))}function Yi(e,t){if(s("endReadableNT",e.endEmitted,e.length),!e.endEmitted&&e.length===0&&(e.endEmitted=!0,t.readable=!1,t.emit("end"),e.autoDestroy)){var r=t._writableState;(!r||r.autoDestroy&&r.finished)&&t.destroy()}}typeof Symbol=="function"&&(d.from=function(e,t){return Ue===void 0&&(Ue=xt()),Ue(d,e,t)});function Ht(e,t){for(var r=0,i=e.length;r<i;r++)if(e[r]===t)return r;return-1}});var Ke=g((Zn,Yt)=>{"use strict";u();Yt.exports=M;var be=q().codes,Ki=be.ERR_METHOD_NOT_IMPLEMENTED,$i=be.ERR_MULTIPLE_CALLBACK,Xi=be.ERR_TRANSFORM_ALREADY_TRANSFORMING,Ji=be.ERR_TRANSFORM_WITH_LENGTH_0,_e=x();D()(M,_e);function Qi(e,t){var r=this._transformState;r.transforming=!1;var i=r.writecb;if(i===null)return this.emit("error",new $i);r.writechunk=null,r.writecb=null,t!=null&&this.push(t),i(e);var n=this._readableState;n.reading=!1,(n.needReadable||n.length<n.highWaterMark)&&this._read(n.highWaterMark)}function M(e){if(!(this instanceof M))return new M(e);_e.call(this,e),this._transformState={afterTransform:Qi.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&(typeof e.transform=="function"&&(this._transform=e.transform),typeof e.flush=="function"&&(this._flush=e.flush)),this.on("prefinish",Zi)}function Zi(){var e=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(t,r){Vt(e,t,r)}):Vt(this,null,null)}M.prototype.push=function(e,t){return this._transformState.needTransform=!1,_e.prototype.push.call(this,e,t)};M.prototype._transform=function(e,t,r){r(new Ki("_transform()"))};M.prototype._write=function(e,t,r){var i=this._transformState;if(i.writecb=r,i.writechunk=e,i.writeencoding=t,!i.transforming){var n=this._readableState;(i.needTransform||n.needReadable||n.length<n.highWaterMark)&&this._read(n.highWaterMark)}};M.prototype._read=function(e){var t=this._transformState;t.writechunk!==null&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0};M.prototype._destroy=function(e,t){_e.prototype._destroy.call(this,e,function(r){t(r)})};function Vt(e,t,r){if(t)return e.emit("error",t);if(r!=null&&e.push(r),e._writableState.length)throw new Ji;if(e._transformState.transforming)throw new Xi;return e.push(null)}});var Xt=g((ea,$t)=>{"use strict";u();$t.exports=z;var Kt=Ke();D()(z,Kt);function z(e){if(!(this instanceof z))return new z(e);Kt.call(this,e)}z.prototype._transform=function(e,t,r){r(null,e)}});var er=g((ra,zt)=>{"use strict";u();var $e;function zi(e){var t=!1;return function(){t||(t=!0,e.apply(void 0,arguments))}}var Zt=q().codes,en=Zt.ERR_MISSING_ARGS,tn=Zt.ERR_STREAM_DESTROYED;function Jt(e){if(e)throw e}function rn(e){return e.setHeader&&typeof e.abort=="function"}function nn(e,t,r,i){i=zi(i);var n=!1;e.on("close",function(){n=!0}),$e===void 0&&($e=se()),$e(e,{readable:t,writable:r},function(o){if(o)return i(o);n=!0,i()});var a=!1;return function(o){if(!n&&!a){if(a=!0,rn(e))return e.abort();if(typeof e.destroy=="function")return e.destroy();i(o||new tn("pipe"))}}}function Qt(e){e()}function an(e,t){return e.pipe(t)}function on(e){return!e.length||typeof e[e.length-1]!="function"?Jt:e.pop()}function fn(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=on(t);if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new en("streams");var n,a=t.map(function(o,l){var h=l<t.length-1,c=l>0;return nn(o,h,c,function(_){n||(n=_),_&&a.forEach(Qt),!h&&(a.forEach(Qt),i(n))})});return t.reduce(an)}zt.exports=fn});var un=g((na,tr)=>{u();tr.exports=v;var Xe=re().EventEmitter,ln=D();ln(v,Xe);v.Readable=De();v.Writable=Oe();v.Duplex=x();v.Transform=Ke();v.PassThrough=Xt();v.finished=se();v.pipeline=er();v.Stream=v;function v(){Xe.call(this)}v.prototype.pipe=function(e,t){var r=this;function i(_){e.writable&&e.write(_)===!1&&r.pause&&r.pause()}r.on("data",i);function n(){r.readable&&r.resume&&r.resume()}e.on("drain",n),!e._isStdio&&(!t||t.end!==!1)&&(r.on("end",o),r.on("close",l));var a=!1;function o(){a||(a=!0,e.end())}function l(){a||(a=!0,typeof e.destroy=="function"&&e.destroy())}function h(_){if(c(),Xe.listenerCount(this,"error")===0)throw _}r.on("error",h),e.on("error",h);function c(){r.removeListener("data",i),e.removeListener("drain",n),r.removeListener("end",o),r.removeListener("close",l),r.removeListener("error",h),e.removeListener("error",h),r.removeListener("end",c),r.removeListener("close",c),e.removeListener("close",c)}return r.on("end",c),r.on("close",c),e.on("close",c),e.emit("pipe",r),e}});export default un();
/*! Bundled license information:

safe-buffer/index.js:
  (*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)
*/
