var $t=Object.defineProperty;var Ka=Object.getOwnPropertyDescriptor;var Wa=Object.getOwnPropertyNames;var Xa=Object.prototype.hasOwnProperty;var ei=(e,a)=>()=>(e&&(a=e(e=0)),a);var C=(e,a)=>()=>(a||e((a={exports:{}}).exports,a),a.exports);var pt=(e,a,t,i)=>{if(a&&typeof a=="object"||typeof a=="function")for(let r of Wa(a))!Xa.call(e,r)&&r!==t&&$t(e,r,{get:()=>a[r],enumerable:!(i=Ka(a,r))||i.enumerable});return e},tt=(e,a,t)=>(pt(e,a,"default"),t&&pt(t,a,"default"));var ti=e=>pt($t({},"__esModule",{value:!0}),e);import{Buffer as M}from"https://registry.koishi.chat/modules/buffer/index.js";import D from"https://registry.koishi.chat/modules/process/index.js";var Z=ei(()=>{});var ce={};import*as Mn from"https://registry.koishi.chat/modules/buffer/index.js";var xt=ei(()=>{Z();tt(ce,Mn)});import Ya from"https://registry.koishi.chat/modules/stream-browserify/index.js";var ai=C((Cn,ii)=>{Z();ii.exports=Ya});import qa from"https://registry.koishi.chat/modules/assert/index.js";var kt=C((Gn,ri)=>{Z();ri.exports=qa});var fi=C((Wn,ni)=>{"use strict";Z();function Va(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}ni.exports=Va});var Me=C(P=>{"use strict";Z();var ja=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";function Ja(e,a){return Object.prototype.hasOwnProperty.call(e,a)}P.assign=function(e){for(var a=Array.prototype.slice.call(arguments,1);a.length;){var t=a.shift();if(t){if(typeof t!="object")throw new TypeError(t+"must be non-object");for(var i in t)Ja(t,i)&&(e[i]=t[i])}}return e};P.shrinkBuf=function(e,a){return e.length===a?e:e.subarray?e.subarray(0,a):(e.length=a,e)};var Qa={arraySet:function(e,a,t,i,r){if(a.subarray&&e.subarray){e.set(a.subarray(t,t+i),r);return}for(var n=0;n<i;n++)e[r+n]=a[t+n]},flattenChunks:function(e){var a,t,i,r,n,f;for(i=0,a=0,t=e.length;a<t;a++)i+=e[a].length;for(f=new Uint8Array(i),r=0,a=0,t=e.length;a<t;a++)n=e[a],f.set(n,r),r+=n.length;return f}},$a={arraySet:function(e,a,t,i,r){for(var n=0;n<i;n++)e[r+n]=a[t+n]},flattenChunks:function(e){return[].concat.apply([],e)}};P.setTyped=function(e){e?(P.Buf8=Uint8Array,P.Buf16=Uint16Array,P.Buf32=Int32Array,P.assign(P,Qa)):(P.Buf8=Array,P.Buf16=Array,P.Buf32=Array,P.assign(P,$a))};P.setTyped(ja)});var Ii=C(ze=>{"use strict";Z();var er=Me(),tr=4,li=0,_i=1,ir=2;function Ne(e){for(var a=e.length;--a>=0;)e[a]=0}var ar=0,ci=1,rr=2,nr=3,fr=258,It=29,Ke=256,Ce=Ke+1+It,Re=30,Lt=19,vi=2*Ce+1,ve=15,mt=16,lr=7,Rt=256,wi=16,bi=17,gi=18,yt=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],it=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],_r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],Ei=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],hr=512,ne=new Array((Ce+2)*2);Ne(ne);var Be=new Array(Re*2);Ne(Be);var He=new Array(hr);Ne(He);var Pe=new Array(fr-nr+1);Ne(Pe);var Nt=new Array(It);Ne(Nt);var at=new Array(Re);Ne(at);function Tt(e,a,t,i,r){this.static_tree=e,this.extra_bits=a,this.extra_base=t,this.elems=i,this.max_length=r,this.has_stree=e&&e.length}var pi,xi,ki;function Zt(e,a){this.dyn_tree=e,this.max_code=0,this.stat_desc=a}function mi(e){return e<256?He[e]:He[256+(e>>>7)]}function Ge(e,a){e.pending_buf[e.pending++]=a&255,e.pending_buf[e.pending++]=a>>>8&255}function K(e,a,t){e.bi_valid>mt-t?(e.bi_buf|=a<<e.bi_valid&65535,Ge(e,e.bi_buf),e.bi_buf=a>>mt-e.bi_valid,e.bi_valid+=t-mt):(e.bi_buf|=a<<e.bi_valid&65535,e.bi_valid+=t)}function $(e,a,t){K(e,t[a*2],t[a*2+1])}function Ti(e,a){var t=0;do t|=e&1,e>>>=1,t<<=1;while(--a>0);return t>>>1}function or(e){e.bi_valid===16?(Ge(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=e.bi_buf&255,e.bi_buf>>=8,e.bi_valid-=8)}function dr(e,a){var t=a.dyn_tree,i=a.max_code,r=a.stat_desc.static_tree,n=a.stat_desc.has_stree,f=a.stat_desc.extra_bits,_=a.stat_desc.extra_base,d=a.stat_desc.max_length,l,h,m,s,o,b,w=0;for(s=0;s<=ve;s++)e.bl_count[s]=0;for(t[e.heap[e.heap_max]*2+1]=0,l=e.heap_max+1;l<vi;l++)h=e.heap[l],s=t[t[h*2+1]*2+1]+1,s>d&&(s=d,w++),t[h*2+1]=s,!(h>i)&&(e.bl_count[s]++,o=0,h>=_&&(o=f[h-_]),b=t[h*2],e.opt_len+=b*(s+o),n&&(e.static_len+=b*(r[h*2+1]+o)));if(w!==0){do{for(s=d-1;e.bl_count[s]===0;)s--;e.bl_count[s]--,e.bl_count[s+1]+=2,e.bl_count[d]--,w-=2}while(w>0);for(s=d;s!==0;s--)for(h=e.bl_count[s];h!==0;)m=e.heap[--l],!(m>i)&&(t[m*2+1]!==s&&(e.opt_len+=(s-t[m*2+1])*t[m*2],t[m*2+1]=s),h--)}}function Zi(e,a,t){var i=new Array(ve+1),r=0,n,f;for(n=1;n<=ve;n++)i[n]=r=r+t[n-1]<<1;for(f=0;f<=a;f++){var _=e[f*2+1];_!==0&&(e[f*2]=Ti(i[_]++,_))}}function ur(){var e,a,t,i,r,n=new Array(ve+1);for(t=0,i=0;i<It-1;i++)for(Nt[i]=t,e=0;e<1<<yt[i];e++)Pe[t++]=i;for(Pe[t-1]=i,r=0,i=0;i<16;i++)for(at[i]=r,e=0;e<1<<it[i];e++)He[r++]=i;for(r>>=7;i<Re;i++)for(at[i]=r<<7,e=0;e<1<<it[i]-7;e++)He[256+r++]=i;for(a=0;a<=ve;a++)n[a]=0;for(e=0;e<=143;)ne[e*2+1]=8,e++,n[8]++;for(;e<=255;)ne[e*2+1]=9,e++,n[9]++;for(;e<=279;)ne[e*2+1]=7,e++,n[7]++;for(;e<=287;)ne[e*2+1]=8,e++,n[8]++;for(Zi(ne,Ce+1,n),e=0;e<Re;e++)Be[e*2+1]=5,Be[e*2]=Ti(e,5);pi=new Tt(ne,yt,Ke+1,Ce,ve),xi=new Tt(Be,it,0,Re,ve),ki=new Tt(new Array(0),_r,0,Lt,lr)}function Si(e){var a;for(a=0;a<Ce;a++)e.dyn_ltree[a*2]=0;for(a=0;a<Re;a++)e.dyn_dtree[a*2]=0;for(a=0;a<Lt;a++)e.bl_tree[a*2]=0;e.dyn_ltree[Rt*2]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function yi(e){e.bi_valid>8?Ge(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function sr(e,a,t,i){yi(e),i&&(Ge(e,t),Ge(e,~t)),er.arraySet(e.pending_buf,e.window,a,t,e.pending),e.pending+=t}function hi(e,a,t,i){var r=a*2,n=t*2;return e[r]<e[n]||e[r]===e[n]&&i[a]<=i[t]}function St(e,a,t){for(var i=e.heap[t],r=t<<1;r<=e.heap_len&&(r<e.heap_len&&hi(a,e.heap[r+1],e.heap[r],e.depth)&&r++,!hi(a,i,e.heap[r],e.depth));)e.heap[t]=e.heap[r],t=r,r<<=1;e.heap[t]=i}function oi(e,a,t){var i,r,n=0,f,_;if(e.last_lit!==0)do i=e.pending_buf[e.d_buf+n*2]<<8|e.pending_buf[e.d_buf+n*2+1],r=e.pending_buf[e.l_buf+n],n++,i===0?$(e,r,a):(f=Pe[r],$(e,f+Ke+1,a),_=yt[f],_!==0&&(r-=Nt[f],K(e,r,_)),i--,f=mi(i),$(e,f,t),_=it[f],_!==0&&(i-=at[f],K(e,i,_)));while(n<e.last_lit);$(e,Rt,a)}function At(e,a){var t=a.dyn_tree,i=a.stat_desc.static_tree,r=a.stat_desc.has_stree,n=a.stat_desc.elems,f,_,d=-1,l;for(e.heap_len=0,e.heap_max=vi,f=0;f<n;f++)t[f*2]!==0?(e.heap[++e.heap_len]=d=f,e.depth[f]=0):t[f*2+1]=0;for(;e.heap_len<2;)l=e.heap[++e.heap_len]=d<2?++d:0,t[l*2]=1,e.depth[l]=0,e.opt_len--,r&&(e.static_len-=i[l*2+1]);for(a.max_code=d,f=e.heap_len>>1;f>=1;f--)St(e,t,f);l=n;do f=e.heap[1],e.heap[1]=e.heap[e.heap_len--],St(e,t,1),_=e.heap[1],e.heap[--e.heap_max]=f,e.heap[--e.heap_max]=_,t[l*2]=t[f*2]+t[_*2],e.depth[l]=(e.depth[f]>=e.depth[_]?e.depth[f]:e.depth[_])+1,t[f*2+1]=t[_*2+1]=l,e.heap[1]=l++,St(e,t,1);while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],dr(e,a),Zi(t,d,e.bl_count)}function di(e,a,t){var i,r=-1,n,f=a[0*2+1],_=0,d=7,l=4;for(f===0&&(d=138,l=3),a[(t+1)*2+1]=65535,i=0;i<=t;i++)n=f,f=a[(i+1)*2+1],!(++_<d&&n===f)&&(_<l?e.bl_tree[n*2]+=_:n!==0?(n!==r&&e.bl_tree[n*2]++,e.bl_tree[wi*2]++):_<=10?e.bl_tree[bi*2]++:e.bl_tree[gi*2]++,_=0,r=n,f===0?(d=138,l=3):n===f?(d=6,l=3):(d=7,l=4))}function ui(e,a,t){var i,r=-1,n,f=a[0*2+1],_=0,d=7,l=4;for(f===0&&(d=138,l=3),i=0;i<=t;i++)if(n=f,f=a[(i+1)*2+1],!(++_<d&&n===f)){if(_<l)do $(e,n,e.bl_tree);while(--_!==0);else n!==0?(n!==r&&($(e,n,e.bl_tree),_--),$(e,wi,e.bl_tree),K(e,_-3,2)):_<=10?($(e,bi,e.bl_tree),K(e,_-3,3)):($(e,gi,e.bl_tree),K(e,_-11,7));_=0,r=n,f===0?(d=138,l=3):n===f?(d=6,l=3):(d=7,l=4)}}function cr(e){var a;for(di(e,e.dyn_ltree,e.l_desc.max_code),di(e,e.dyn_dtree,e.d_desc.max_code),At(e,e.bl_desc),a=Lt-1;a>=3&&e.bl_tree[Ei[a]*2+1]===0;a--);return e.opt_len+=3*(a+1)+5+5+4,a}function vr(e,a,t,i){var r;for(K(e,a-257,5),K(e,t-1,5),K(e,i-4,4),r=0;r<i;r++)K(e,e.bl_tree[Ei[r]*2+1],3);ui(e,e.dyn_ltree,a-1),ui(e,e.dyn_dtree,t-1)}function wr(e){var a=4093624447,t;for(t=0;t<=31;t++,a>>>=1)if(a&1&&e.dyn_ltree[t*2]!==0)return li;if(e.dyn_ltree[9*2]!==0||e.dyn_ltree[10*2]!==0||e.dyn_ltree[13*2]!==0)return _i;for(t=32;t<Ke;t++)if(e.dyn_ltree[t*2]!==0)return _i;return li}var si=!1;function br(e){si||(ur(),si=!0),e.l_desc=new Zt(e.dyn_ltree,pi),e.d_desc=new Zt(e.dyn_dtree,xi),e.bl_desc=new Zt(e.bl_tree,ki),e.bi_buf=0,e.bi_valid=0,Si(e)}function Ai(e,a,t,i){K(e,(ar<<1)+(i?1:0),3),sr(e,a,t,!0)}function gr(e){K(e,ci<<1,3),$(e,Rt,ne),or(e)}function Er(e,a,t,i){var r,n,f=0;e.level>0?(e.strm.data_type===ir&&(e.strm.data_type=wr(e)),At(e,e.l_desc),At(e,e.d_desc),f=cr(e),r=e.opt_len+3+7>>>3,n=e.static_len+3+7>>>3,n<=r&&(r=n)):r=n=t+5,t+4<=r&&a!==-1?Ai(e,a,t,i):e.strategy===tr||n===r?(K(e,(ci<<1)+(i?1:0),3),oi(e,ne,Be)):(K(e,(rr<<1)+(i?1:0),3),vr(e,e.l_desc.max_code+1,e.d_desc.max_code+1,f+1),oi(e,e.dyn_ltree,e.dyn_dtree)),Si(e),i&&yi(e)}function pr(e,a,t){return e.pending_buf[e.d_buf+e.last_lit*2]=a>>>8&255,e.pending_buf[e.d_buf+e.last_lit*2+1]=a&255,e.pending_buf[e.l_buf+e.last_lit]=t&255,e.last_lit++,a===0?e.dyn_ltree[t*2]++:(e.matches++,a--,e.dyn_ltree[(Pe[t]+Ke+1)*2]++,e.dyn_dtree[mi(a)*2]++),e.last_lit===e.lit_bufsize-1}ze._tr_init=br;ze._tr_stored_block=Ai;ze._tr_flush_block=Er;ze._tr_tally=pr;ze._tr_align=gr});var zt=C((Jn,Li)=>{"use strict";Z();function xr(e,a,t,i){for(var r=e&65535|0,n=e>>>16&65535|0,f=0;t!==0;){f=t>2e3?2e3:t,t-=f;do r=r+a[i++]|0,n=n+r|0;while(--f);r%=65521,n%=65521}return r|n<<16|0}Li.exports=xr});var Dt=C(($n,Ri)=>{"use strict";Z();function kr(){for(var e,a=[],t=0;t<256;t++){e=t;for(var i=0;i<8;i++)e=e&1?3988292384^e>>>1:e>>>1;a[t]=e}return a}var mr=kr();function Tr(e,a,t,i){var r=mr,n=i+t;e^=-1;for(var f=i;f<n;f++)e=e>>>8^r[(e^a[f])&255];return e^-1}Ri.exports=Tr});var zi=C((tf,Ni)=>{"use strict";Z();Ni.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}});var Pi=C(ie=>{"use strict";Z();var G=Me(),Y=Ii(),Ui=zt(),le=Dt(),Zr=zi(),Ee=0,Sr=1,yr=3,ue=4,Di=5,te=0,Fi=1,q=-2,Ar=-3,Ft=-5,Ir=-1,Lr=1,rt=2,Rr=3,Nr=4,zr=0,Dr=2,_t=8,Fr=9,Or=15,Ur=8,Mr=29,Br=256,Ut=Br+1+Mr,Cr=30,Hr=19,Pr=2*Ut+1,Gr=15,S=3,oe=258,J=oe+S+1,Kr=32,ht=42,Mt=69,nt=73,ft=91,lt=103,we=113,Xe=666,U=1,Ye=2,be=3,Oe=4,Wr=3;function de(e,a){return e.msg=Zr[a],a}function Oi(e){return(e<<1)-(e>4?9:0)}function he(e){for(var a=e.length;--a>=0;)e[a]=0}function _e(e){var a=e.state,t=a.pending;t>e.avail_out&&(t=e.avail_out),t!==0&&(G.arraySet(e.output,a.pending_buf,a.pending_out,t,e.next_out),e.next_out+=t,a.pending_out+=t,e.total_out+=t,e.avail_out-=t,a.pending-=t,a.pending===0&&(a.pending_out=0))}function B(e,a){Y._tr_flush_block(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,a),e.block_start=e.strstart,_e(e.strm)}function I(e,a){e.pending_buf[e.pending++]=a}function We(e,a){e.pending_buf[e.pending++]=a>>>8&255,e.pending_buf[e.pending++]=a&255}function Xr(e,a,t,i){var r=e.avail_in;return r>i&&(r=i),r===0?0:(e.avail_in-=r,G.arraySet(a,e.input,e.next_in,r,t),e.state.wrap===1?e.adler=Ui(e.adler,a,r,t):e.state.wrap===2&&(e.adler=le(e.adler,a,r,t)),e.next_in+=r,e.total_in+=r,r)}function Mi(e,a){var t=e.max_chain_length,i=e.strstart,r,n,f=e.prev_length,_=e.nice_match,d=e.strstart>e.w_size-J?e.strstart-(e.w_size-J):0,l=e.window,h=e.w_mask,m=e.prev,s=e.strstart+oe,o=l[i+f-1],b=l[i+f];e.prev_length>=e.good_match&&(t>>=2),_>e.lookahead&&(_=e.lookahead);do if(r=a,!(l[r+f]!==b||l[r+f-1]!==o||l[r]!==l[i]||l[++r]!==l[i+1])){i+=2,r++;do;while(l[++i]===l[++r]&&l[++i]===l[++r]&&l[++i]===l[++r]&&l[++i]===l[++r]&&l[++i]===l[++r]&&l[++i]===l[++r]&&l[++i]===l[++r]&&l[++i]===l[++r]&&i<s);if(n=oe-(s-i),i=s-oe,n>f){if(e.match_start=a,f=n,n>=_)break;o=l[i+f-1],b=l[i+f]}}while((a=m[a&h])>d&&--t!==0);return f<=e.lookahead?f:e.lookahead}function ge(e){var a=e.w_size,t,i,r,n,f;do{if(n=e.window_size-e.lookahead-e.strstart,e.strstart>=a+(a-J)){G.arraySet(e.window,e.window,a,a,0),e.match_start-=a,e.strstart-=a,e.block_start-=a,i=e.hash_size,t=i;do r=e.head[--t],e.head[t]=r>=a?r-a:0;while(--i);i=a,t=i;do r=e.prev[--t],e.prev[t]=r>=a?r-a:0;while(--i);n+=a}if(e.strm.avail_in===0)break;if(i=Xr(e.strm,e.window,e.strstart+e.lookahead,n),e.lookahead+=i,e.lookahead+e.insert>=S)for(f=e.strstart-e.insert,e.ins_h=e.window[f],e.ins_h=(e.ins_h<<e.hash_shift^e.window[f+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[f+S-1])&e.hash_mask,e.prev[f&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=f,f++,e.insert--,!(e.lookahead+e.insert<S)););}while(e.lookahead<J&&e.strm.avail_in!==0)}function Yr(e,a){var t=65535;for(t>e.pending_buf_size-5&&(t=e.pending_buf_size-5);;){if(e.lookahead<=1){if(ge(e),e.lookahead===0&&a===Ee)return U;if(e.lookahead===0)break}e.strstart+=e.lookahead,e.lookahead=0;var i=e.block_start+t;if((e.strstart===0||e.strstart>=i)&&(e.lookahead=e.strstart-i,e.strstart=i,B(e,!1),e.strm.avail_out===0)||e.strstart-e.block_start>=e.w_size-J&&(B(e,!1),e.strm.avail_out===0))return U}return e.insert=0,a===ue?(B(e,!0),e.strm.avail_out===0?be:Oe):(e.strstart>e.block_start&&(B(e,!1),e.strm.avail_out===0),U)}function Ot(e,a){for(var t,i;;){if(e.lookahead<J){if(ge(e),e.lookahead<J&&a===Ee)return U;if(e.lookahead===0)break}if(t=0,e.lookahead>=S&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+S-1])&e.hash_mask,t=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),t!==0&&e.strstart-t<=e.w_size-J&&(e.match_length=Mi(e,t)),e.match_length>=S)if(i=Y._tr_tally(e,e.strstart-e.match_start,e.match_length-S),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=S){e.match_length--;do e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+S-1])&e.hash_mask,t=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart;while(--e.match_length!==0);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else i=Y._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(i&&(B(e,!1),e.strm.avail_out===0))return U}return e.insert=e.strstart<S-1?e.strstart:S-1,a===ue?(B(e,!0),e.strm.avail_out===0?be:Oe):e.last_lit&&(B(e,!1),e.strm.avail_out===0)?U:Ye}function De(e,a){for(var t,i,r;;){if(e.lookahead<J){if(ge(e),e.lookahead<J&&a===Ee)return U;if(e.lookahead===0)break}if(t=0,e.lookahead>=S&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+S-1])&e.hash_mask,t=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=S-1,t!==0&&e.prev_length<e.max_lazy_match&&e.strstart-t<=e.w_size-J&&(e.match_length=Mi(e,t),e.match_length<=5&&(e.strategy===Lr||e.match_length===S&&e.strstart-e.match_start>4096)&&(e.match_length=S-1)),e.prev_length>=S&&e.match_length<=e.prev_length){r=e.strstart+e.lookahead-S,i=Y._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-S),e.lookahead-=e.prev_length-1,e.prev_length-=2;do++e.strstart<=r&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+S-1])&e.hash_mask,t=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart);while(--e.prev_length!==0);if(e.match_available=0,e.match_length=S-1,e.strstart++,i&&(B(e,!1),e.strm.avail_out===0))return U}else if(e.match_available){if(i=Y._tr_tally(e,0,e.window[e.strstart-1]),i&&B(e,!1),e.strstart++,e.lookahead--,e.strm.avail_out===0)return U}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(i=Y._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<S-1?e.strstart:S-1,a===ue?(B(e,!0),e.strm.avail_out===0?be:Oe):e.last_lit&&(B(e,!1),e.strm.avail_out===0)?U:Ye}function qr(e,a){for(var t,i,r,n,f=e.window;;){if(e.lookahead<=oe){if(ge(e),e.lookahead<=oe&&a===Ee)return U;if(e.lookahead===0)break}if(e.match_length=0,e.lookahead>=S&&e.strstart>0&&(r=e.strstart-1,i=f[r],i===f[++r]&&i===f[++r]&&i===f[++r])){n=e.strstart+oe;do;while(i===f[++r]&&i===f[++r]&&i===f[++r]&&i===f[++r]&&i===f[++r]&&i===f[++r]&&i===f[++r]&&i===f[++r]&&r<n);e.match_length=oe-(n-r),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=S?(t=Y._tr_tally(e,1,e.match_length-S),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(t=Y._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),t&&(B(e,!1),e.strm.avail_out===0))return U}return e.insert=0,a===ue?(B(e,!0),e.strm.avail_out===0?be:Oe):e.last_lit&&(B(e,!1),e.strm.avail_out===0)?U:Ye}function Vr(e,a){for(var t;;){if(e.lookahead===0&&(ge(e),e.lookahead===0)){if(a===Ee)return U;break}if(e.match_length=0,t=Y._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,t&&(B(e,!1),e.strm.avail_out===0))return U}return e.insert=0,a===ue?(B(e,!0),e.strm.avail_out===0?be:Oe):e.last_lit&&(B(e,!1),e.strm.avail_out===0)?U:Ye}function ee(e,a,t,i,r){this.good_length=e,this.max_lazy=a,this.nice_length=t,this.max_chain=i,this.func=r}var Fe;Fe=[new ee(0,0,0,0,Yr),new ee(4,4,8,4,Ot),new ee(4,5,16,8,Ot),new ee(4,6,32,32,Ot),new ee(4,4,16,16,De),new ee(8,16,32,32,De),new ee(8,16,128,128,De),new ee(8,32,128,256,De),new ee(32,128,258,1024,De),new ee(32,258,258,4096,De)];function jr(e){e.window_size=2*e.w_size,he(e.head),e.max_lazy_match=Fe[e.level].max_lazy,e.good_match=Fe[e.level].good_length,e.nice_match=Fe[e.level].nice_length,e.max_chain_length=Fe[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=S-1,e.match_available=0,e.ins_h=0}function Jr(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=_t,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new G.Buf16(Pr*2),this.dyn_dtree=new G.Buf16((2*Cr+1)*2),this.bl_tree=new G.Buf16((2*Hr+1)*2),he(this.dyn_ltree),he(this.dyn_dtree),he(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new G.Buf16(Gr+1),this.heap=new G.Buf16(2*Ut+1),he(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new G.Buf16(2*Ut+1),he(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Bi(e){var a;return!e||!e.state?de(e,q):(e.total_in=e.total_out=0,e.data_type=Dr,a=e.state,a.pending=0,a.pending_out=0,a.wrap<0&&(a.wrap=-a.wrap),a.status=a.wrap?ht:we,e.adler=a.wrap===2?0:1,a.last_flush=Ee,Y._tr_init(a),te)}function Ci(e){var a=Bi(e);return a===te&&jr(e.state),a}function Qr(e,a){return!e||!e.state||e.state.wrap!==2?q:(e.state.gzhead=a,te)}function Hi(e,a,t,i,r,n){if(!e)return q;var f=1;if(a===Ir&&(a=6),i<0?(f=0,i=-i):i>15&&(f=2,i-=16),r<1||r>Fr||t!==_t||i<8||i>15||a<0||a>9||n<0||n>Nr)return de(e,q);i===8&&(i=9);var _=new Jr;return e.state=_,_.strm=e,_.wrap=f,_.gzhead=null,_.w_bits=i,_.w_size=1<<_.w_bits,_.w_mask=_.w_size-1,_.hash_bits=r+7,_.hash_size=1<<_.hash_bits,_.hash_mask=_.hash_size-1,_.hash_shift=~~((_.hash_bits+S-1)/S),_.window=new G.Buf8(_.w_size*2),_.head=new G.Buf16(_.hash_size),_.prev=new G.Buf16(_.w_size),_.lit_bufsize=1<<r+6,_.pending_buf_size=_.lit_bufsize*4,_.pending_buf=new G.Buf8(_.pending_buf_size),_.d_buf=1*_.lit_bufsize,_.l_buf=3*_.lit_bufsize,_.level=a,_.strategy=n,_.method=t,Ci(e)}function $r(e,a){return Hi(e,a,_t,Or,Ur,zr)}function en(e,a){var t,i,r,n;if(!e||!e.state||a>Di||a<0)return e?de(e,q):q;if(i=e.state,!e.output||!e.input&&e.avail_in!==0||i.status===Xe&&a!==ue)return de(e,e.avail_out===0?Ft:q);if(i.strm=e,t=i.last_flush,i.last_flush=a,i.status===ht)if(i.wrap===2)e.adler=0,I(i,31),I(i,139),I(i,8),i.gzhead?(I(i,(i.gzhead.text?1:0)+(i.gzhead.hcrc?2:0)+(i.gzhead.extra?4:0)+(i.gzhead.name?8:0)+(i.gzhead.comment?16:0)),I(i,i.gzhead.time&255),I(i,i.gzhead.time>>8&255),I(i,i.gzhead.time>>16&255),I(i,i.gzhead.time>>24&255),I(i,i.level===9?2:i.strategy>=rt||i.level<2?4:0),I(i,i.gzhead.os&255),i.gzhead.extra&&i.gzhead.extra.length&&(I(i,i.gzhead.extra.length&255),I(i,i.gzhead.extra.length>>8&255)),i.gzhead.hcrc&&(e.adler=le(e.adler,i.pending_buf,i.pending,0)),i.gzindex=0,i.status=Mt):(I(i,0),I(i,0),I(i,0),I(i,0),I(i,0),I(i,i.level===9?2:i.strategy>=rt||i.level<2?4:0),I(i,Wr),i.status=we);else{var f=_t+(i.w_bits-8<<4)<<8,_=-1;i.strategy>=rt||i.level<2?_=0:i.level<6?_=1:i.level===6?_=2:_=3,f|=_<<6,i.strstart!==0&&(f|=Kr),f+=31-f%31,i.status=we,We(i,f),i.strstart!==0&&(We(i,e.adler>>>16),We(i,e.adler&65535)),e.adler=1}if(i.status===Mt)if(i.gzhead.extra){for(r=i.pending;i.gzindex<(i.gzhead.extra.length&65535)&&!(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>r&&(e.adler=le(e.adler,i.pending_buf,i.pending-r,r)),_e(e),r=i.pending,i.pending===i.pending_buf_size));)I(i,i.gzhead.extra[i.gzindex]&255),i.gzindex++;i.gzhead.hcrc&&i.pending>r&&(e.adler=le(e.adler,i.pending_buf,i.pending-r,r)),i.gzindex===i.gzhead.extra.length&&(i.gzindex=0,i.status=nt)}else i.status=nt;if(i.status===nt)if(i.gzhead.name){r=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>r&&(e.adler=le(e.adler,i.pending_buf,i.pending-r,r)),_e(e),r=i.pending,i.pending===i.pending_buf_size)){n=1;break}i.gzindex<i.gzhead.name.length?n=i.gzhead.name.charCodeAt(i.gzindex++)&255:n=0,I(i,n)}while(n!==0);i.gzhead.hcrc&&i.pending>r&&(e.adler=le(e.adler,i.pending_buf,i.pending-r,r)),n===0&&(i.gzindex=0,i.status=ft)}else i.status=ft;if(i.status===ft)if(i.gzhead.comment){r=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>r&&(e.adler=le(e.adler,i.pending_buf,i.pending-r,r)),_e(e),r=i.pending,i.pending===i.pending_buf_size)){n=1;break}i.gzindex<i.gzhead.comment.length?n=i.gzhead.comment.charCodeAt(i.gzindex++)&255:n=0,I(i,n)}while(n!==0);i.gzhead.hcrc&&i.pending>r&&(e.adler=le(e.adler,i.pending_buf,i.pending-r,r)),n===0&&(i.status=lt)}else i.status=lt;if(i.status===lt&&(i.gzhead.hcrc?(i.pending+2>i.pending_buf_size&&_e(e),i.pending+2<=i.pending_buf_size&&(I(i,e.adler&255),I(i,e.adler>>8&255),e.adler=0,i.status=we)):i.status=we),i.pending!==0){if(_e(e),e.avail_out===0)return i.last_flush=-1,te}else if(e.avail_in===0&&Oi(a)<=Oi(t)&&a!==ue)return de(e,Ft);if(i.status===Xe&&e.avail_in!==0)return de(e,Ft);if(e.avail_in!==0||i.lookahead!==0||a!==Ee&&i.status!==Xe){var d=i.strategy===rt?Vr(i,a):i.strategy===Rr?qr(i,a):Fe[i.level].func(i,a);if((d===be||d===Oe)&&(i.status=Xe),d===U||d===be)return e.avail_out===0&&(i.last_flush=-1),te;if(d===Ye&&(a===Sr?Y._tr_align(i):a!==Di&&(Y._tr_stored_block(i,0,0,!1),a===yr&&(he(i.head),i.lookahead===0&&(i.strstart=0,i.block_start=0,i.insert=0))),_e(e),e.avail_out===0))return i.last_flush=-1,te}return a!==ue?te:i.wrap<=0?Fi:(i.wrap===2?(I(i,e.adler&255),I(i,e.adler>>8&255),I(i,e.adler>>16&255),I(i,e.adler>>24&255),I(i,e.total_in&255),I(i,e.total_in>>8&255),I(i,e.total_in>>16&255),I(i,e.total_in>>24&255)):(We(i,e.adler>>>16),We(i,e.adler&65535)),_e(e),i.wrap>0&&(i.wrap=-i.wrap),i.pending!==0?te:Fi)}function tn(e){var a;return!e||!e.state?q:(a=e.state.status,a!==ht&&a!==Mt&&a!==nt&&a!==ft&&a!==lt&&a!==we&&a!==Xe?de(e,q):(e.state=null,a===we?de(e,Ar):te))}function an(e,a){var t=a.length,i,r,n,f,_,d,l,h;if(!e||!e.state||(i=e.state,f=i.wrap,f===2||f===1&&i.status!==ht||i.lookahead))return q;for(f===1&&(e.adler=Ui(e.adler,a,t,0)),i.wrap=0,t>=i.w_size&&(f===0&&(he(i.head),i.strstart=0,i.block_start=0,i.insert=0),h=new G.Buf8(i.w_size),G.arraySet(h,a,t-i.w_size,i.w_size,0),a=h,t=i.w_size),_=e.avail_in,d=e.next_in,l=e.input,e.avail_in=t,e.next_in=0,e.input=a,ge(i);i.lookahead>=S;){r=i.strstart,n=i.lookahead-(S-1);do i.ins_h=(i.ins_h<<i.hash_shift^i.window[r+S-1])&i.hash_mask,i.prev[r&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=r,r++;while(--n);i.strstart=r,i.lookahead=S-1,ge(i)}return i.strstart+=i.lookahead,i.block_start=i.strstart,i.insert=i.lookahead,i.lookahead=0,i.match_length=i.prev_length=S-1,i.match_available=0,e.next_in=d,e.input=l,e.avail_in=_,i.wrap=f,te}ie.deflateInit=$r;ie.deflateInit2=Hi;ie.deflateReset=Ci;ie.deflateResetKeep=Bi;ie.deflateSetHeader=Qr;ie.deflate=en;ie.deflateEnd=tn;ie.deflateSetDictionary=an;ie.deflateInfo="pako deflate (from Nodeca project)"});var Ki=C((ff,Gi)=>{"use strict";Z();var ot=30,rn=12;Gi.exports=function(a,t){var i,r,n,f,_,d,l,h,m,s,o,b,w,k,g,L,N,T,c,R,y,p,A,O,x;i=a.state,r=a.next_in,O=a.input,n=r+(a.avail_in-5),f=a.next_out,x=a.output,_=f-(t-a.avail_out),d=f+(a.avail_out-257),l=i.dmax,h=i.wsize,m=i.whave,s=i.wnext,o=i.window,b=i.hold,w=i.bits,k=i.lencode,g=i.distcode,L=(1<<i.lenbits)-1,N=(1<<i.distbits)-1;e:do{w<15&&(b+=O[r++]<<w,w+=8,b+=O[r++]<<w,w+=8),T=k[b&L];t:for(;;){if(c=T>>>24,b>>>=c,w-=c,c=T>>>16&255,c===0)x[f++]=T&65535;else if(c&16){R=T&65535,c&=15,c&&(w<c&&(b+=O[r++]<<w,w+=8),R+=b&(1<<c)-1,b>>>=c,w-=c),w<15&&(b+=O[r++]<<w,w+=8,b+=O[r++]<<w,w+=8),T=g[b&N];i:for(;;){if(c=T>>>24,b>>>=c,w-=c,c=T>>>16&255,c&16){if(y=T&65535,c&=15,w<c&&(b+=O[r++]<<w,w+=8,w<c&&(b+=O[r++]<<w,w+=8)),y+=b&(1<<c)-1,y>l){a.msg="invalid distance too far back",i.mode=ot;break e}if(b>>>=c,w-=c,c=f-_,y>c){if(c=y-c,c>m&&i.sane){a.msg="invalid distance too far back",i.mode=ot;break e}if(p=0,A=o,s===0){if(p+=h-c,c<R){R-=c;do x[f++]=o[p++];while(--c);p=f-y,A=x}}else if(s<c){if(p+=h+s-c,c-=s,c<R){R-=c;do x[f++]=o[p++];while(--c);if(p=0,s<R){c=s,R-=c;do x[f++]=o[p++];while(--c);p=f-y,A=x}}}else if(p+=s-c,c<R){R-=c;do x[f++]=o[p++];while(--c);p=f-y,A=x}for(;R>2;)x[f++]=A[p++],x[f++]=A[p++],x[f++]=A[p++],R-=3;R&&(x[f++]=A[p++],R>1&&(x[f++]=A[p++]))}else{p=f-y;do x[f++]=x[p++],x[f++]=x[p++],x[f++]=x[p++],R-=3;while(R>2);R&&(x[f++]=x[p++],R>1&&(x[f++]=x[p++]))}}else if(c&64){a.msg="invalid distance code",i.mode=ot;break e}else{T=g[(T&65535)+(b&(1<<c)-1)];continue i}break}}else if(c&64)if(c&32){i.mode=rn;break e}else{a.msg="invalid literal/length code",i.mode=ot;break e}else{T=k[(T&65535)+(b&(1<<c)-1)];continue t}break}}while(r<n&&f<d);R=w>>3,r-=R,w-=R<<3,b&=(1<<w)-1,a.next_in=r,a.next_out=f,a.avail_in=r<n?5+(n-r):5-(r-n),a.avail_out=f<d?257+(d-f):257-(f-d),i.hold=b,i.bits=w}});var Ji=C((_f,ji)=>{"use strict";Z();var Wi=Me(),Ue=15,Xi=852,Yi=592,qi=0,Bt=1,Vi=2,nn=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],fn=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],ln=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],_n=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];ji.exports=function(a,t,i,r,n,f,_,d){var l=d.bits,h=0,m=0,s=0,o=0,b=0,w=0,k=0,g=0,L=0,N=0,T,c,R,y,p,A=null,O=0,x,j=new Wi.Buf16(Ue+1),Je=new Wi.Buf16(Ue+1),Qe=null,Jt=0,Qt,$e,et;for(h=0;h<=Ue;h++)j[h]=0;for(m=0;m<r;m++)j[t[i+m]]++;for(b=l,o=Ue;o>=1&&j[o]===0;o--);if(b>o&&(b=o),o===0)return n[f++]=1<<24|64<<16|0,n[f++]=1<<24|64<<16|0,d.bits=1,0;for(s=1;s<o&&j[s]===0;s++);for(b<s&&(b=s),g=1,h=1;h<=Ue;h++)if(g<<=1,g-=j[h],g<0)return-1;if(g>0&&(a===qi||o!==1))return-1;for(Je[1]=0,h=1;h<Ue;h++)Je[h+1]=Je[h]+j[h];for(m=0;m<r;m++)t[i+m]!==0&&(_[Je[t[i+m]]++]=m);if(a===qi?(A=Qe=_,x=19):a===Bt?(A=nn,O-=257,Qe=fn,Jt-=257,x=256):(A=ln,Qe=_n,x=-1),N=0,m=0,h=s,p=f,w=b,k=0,R=-1,L=1<<b,y=L-1,a===Bt&&L>Xi||a===Vi&&L>Yi)return 1;for(;;){Qt=h-k,_[m]<x?($e=0,et=_[m]):_[m]>x?($e=Qe[Jt+_[m]],et=A[O+_[m]]):($e=96,et=0),T=1<<h-k,c=1<<w,s=c;do c-=T,n[p+(N>>k)+c]=Qt<<24|$e<<16|et|0;while(c!==0);for(T=1<<h-1;N&T;)T>>=1;if(T!==0?(N&=T-1,N+=T):N=0,m++,--j[h]===0){if(h===o)break;h=t[i+_[m]]}if(h>b&&(N&y)!==R){for(k===0&&(k=b),p+=s,w=h-k,g=1<<w;w+k<o&&(g-=j[w+k],!(g<=0));)w++,g<<=1;if(L+=1<<w,a===Bt&&L>Xi||a===Vi&&L>Yi)return 1;R=N&y,n[R]=b<<24|w<<16|p-f|0}}return N!==0&&(n[p+N]=h-k<<24|64<<16|0),d.bits=b,0}});var Na=C(Q=>{"use strict";Z();var W=Me(),Wt=zt(),ae=Dt(),hn=Ki(),qe=Ji(),on=0,ma=1,Ta=2,Qi=4,dn=5,dt=6,pe=0,un=1,sn=2,V=-2,Za=-3,Xt=-4,cn=-5,$i=8,Sa=1,ea=2,ta=3,ia=4,aa=5,ra=6,na=7,fa=8,la=9,_a=10,ct=11,fe=12,Ct=13,ha=14,Ht=15,oa=16,da=17,ua=18,sa=19,ut=20,st=21,ca=22,va=23,wa=24,ba=25,ga=26,Pt=27,Ea=28,pa=29,z=30,Yt=31,vn=32,wn=852,bn=592,gn=15,En=gn;function xa(e){return(e>>>24&255)+(e>>>8&65280)+((e&65280)<<8)+((e&255)<<24)}function pn(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new W.Buf16(320),this.work=new W.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function ya(e){var a;return!e||!e.state?V:(a=e.state,e.total_in=e.total_out=a.total=0,e.msg="",a.wrap&&(e.adler=a.wrap&1),a.mode=Sa,a.last=0,a.havedict=0,a.dmax=32768,a.head=null,a.hold=0,a.bits=0,a.lencode=a.lendyn=new W.Buf32(wn),a.distcode=a.distdyn=new W.Buf32(bn),a.sane=1,a.back=-1,pe)}function Aa(e){var a;return!e||!e.state?V:(a=e.state,a.wsize=0,a.whave=0,a.wnext=0,ya(e))}function Ia(e,a){var t,i;return!e||!e.state||(i=e.state,a<0?(t=0,a=-a):(t=(a>>4)+1,a<48&&(a&=15)),a&&(a<8||a>15))?V:(i.window!==null&&i.wbits!==a&&(i.window=null),i.wrap=t,i.wbits=a,Aa(e))}function La(e,a){var t,i;return e?(i=new pn,e.state=i,i.window=null,t=Ia(e,a),t!==pe&&(e.state=null),t):V}function xn(e){return La(e,En)}var ka=!0,Gt,Kt;function kn(e){if(ka){var a;for(Gt=new W.Buf32(512),Kt=new W.Buf32(32),a=0;a<144;)e.lens[a++]=8;for(;a<256;)e.lens[a++]=9;for(;a<280;)e.lens[a++]=7;for(;a<288;)e.lens[a++]=8;for(qe(ma,e.lens,0,288,Gt,0,e.work,{bits:9}),a=0;a<32;)e.lens[a++]=5;qe(Ta,e.lens,0,32,Kt,0,e.work,{bits:5}),ka=!1}e.lencode=Gt,e.lenbits=9,e.distcode=Kt,e.distbits=5}function Ra(e,a,t,i){var r,n=e.state;return n.window===null&&(n.wsize=1<<n.wbits,n.wnext=0,n.whave=0,n.window=new W.Buf8(n.wsize)),i>=n.wsize?(W.arraySet(n.window,a,t-n.wsize,n.wsize,0),n.wnext=0,n.whave=n.wsize):(r=n.wsize-n.wnext,r>i&&(r=i),W.arraySet(n.window,a,t-i,r,n.wnext),i-=r,i?(W.arraySet(n.window,a,t-i,i,0),n.wnext=i,n.whave=n.wsize):(n.wnext+=r,n.wnext===n.wsize&&(n.wnext=0),n.whave<n.wsize&&(n.whave+=r))),0}function mn(e,a){var t,i,r,n,f,_,d,l,h,m,s,o,b,w,k=0,g,L,N,T,c,R,y,p,A=new W.Buf8(4),O,x,j=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&e.avail_in!==0)return V;t=e.state,t.mode===fe&&(t.mode=Ct),f=e.next_out,r=e.output,d=e.avail_out,n=e.next_in,i=e.input,_=e.avail_in,l=t.hold,h=t.bits,m=_,s=d,p=pe;e:for(;;)switch(t.mode){case Sa:if(t.wrap===0){t.mode=Ct;break}for(;h<16;){if(_===0)break e;_--,l+=i[n++]<<h,h+=8}if(t.wrap&2&&l===35615){t.check=0,A[0]=l&255,A[1]=l>>>8&255,t.check=ae(t.check,A,2,0),l=0,h=0,t.mode=ea;break}if(t.flags=0,t.head&&(t.head.done=!1),!(t.wrap&1)||(((l&255)<<8)+(l>>8))%31){e.msg="incorrect header check",t.mode=z;break}if((l&15)!==$i){e.msg="unknown compression method",t.mode=z;break}if(l>>>=4,h-=4,y=(l&15)+8,t.wbits===0)t.wbits=y;else if(y>t.wbits){e.msg="invalid window size",t.mode=z;break}t.dmax=1<<y,e.adler=t.check=1,t.mode=l&512?_a:fe,l=0,h=0;break;case ea:for(;h<16;){if(_===0)break e;_--,l+=i[n++]<<h,h+=8}if(t.flags=l,(t.flags&255)!==$i){e.msg="unknown compression method",t.mode=z;break}if(t.flags&57344){e.msg="unknown header flags set",t.mode=z;break}t.head&&(t.head.text=l>>8&1),t.flags&512&&(A[0]=l&255,A[1]=l>>>8&255,t.check=ae(t.check,A,2,0)),l=0,h=0,t.mode=ta;case ta:for(;h<32;){if(_===0)break e;_--,l+=i[n++]<<h,h+=8}t.head&&(t.head.time=l),t.flags&512&&(A[0]=l&255,A[1]=l>>>8&255,A[2]=l>>>16&255,A[3]=l>>>24&255,t.check=ae(t.check,A,4,0)),l=0,h=0,t.mode=ia;case ia:for(;h<16;){if(_===0)break e;_--,l+=i[n++]<<h,h+=8}t.head&&(t.head.xflags=l&255,t.head.os=l>>8),t.flags&512&&(A[0]=l&255,A[1]=l>>>8&255,t.check=ae(t.check,A,2,0)),l=0,h=0,t.mode=aa;case aa:if(t.flags&1024){for(;h<16;){if(_===0)break e;_--,l+=i[n++]<<h,h+=8}t.length=l,t.head&&(t.head.extra_len=l),t.flags&512&&(A[0]=l&255,A[1]=l>>>8&255,t.check=ae(t.check,A,2,0)),l=0,h=0}else t.head&&(t.head.extra=null);t.mode=ra;case ra:if(t.flags&1024&&(o=t.length,o>_&&(o=_),o&&(t.head&&(y=t.head.extra_len-t.length,t.head.extra||(t.head.extra=new Array(t.head.extra_len)),W.arraySet(t.head.extra,i,n,o,y)),t.flags&512&&(t.check=ae(t.check,i,o,n)),_-=o,n+=o,t.length-=o),t.length))break e;t.length=0,t.mode=na;case na:if(t.flags&2048){if(_===0)break e;o=0;do y=i[n+o++],t.head&&y&&t.length<65536&&(t.head.name+=String.fromCharCode(y));while(y&&o<_);if(t.flags&512&&(t.check=ae(t.check,i,o,n)),_-=o,n+=o,y)break e}else t.head&&(t.head.name=null);t.length=0,t.mode=fa;case fa:if(t.flags&4096){if(_===0)break e;o=0;do y=i[n+o++],t.head&&y&&t.length<65536&&(t.head.comment+=String.fromCharCode(y));while(y&&o<_);if(t.flags&512&&(t.check=ae(t.check,i,o,n)),_-=o,n+=o,y)break e}else t.head&&(t.head.comment=null);t.mode=la;case la:if(t.flags&512){for(;h<16;){if(_===0)break e;_--,l+=i[n++]<<h,h+=8}if(l!==(t.check&65535)){e.msg="header crc mismatch",t.mode=z;break}l=0,h=0}t.head&&(t.head.hcrc=t.flags>>9&1,t.head.done=!0),e.adler=t.check=0,t.mode=fe;break;case _a:for(;h<32;){if(_===0)break e;_--,l+=i[n++]<<h,h+=8}e.adler=t.check=xa(l),l=0,h=0,t.mode=ct;case ct:if(t.havedict===0)return e.next_out=f,e.avail_out=d,e.next_in=n,e.avail_in=_,t.hold=l,t.bits=h,sn;e.adler=t.check=1,t.mode=fe;case fe:if(a===dn||a===dt)break e;case Ct:if(t.last){l>>>=h&7,h-=h&7,t.mode=Pt;break}for(;h<3;){if(_===0)break e;_--,l+=i[n++]<<h,h+=8}switch(t.last=l&1,l>>>=1,h-=1,l&3){case 0:t.mode=ha;break;case 1:if(kn(t),t.mode=ut,a===dt){l>>>=2,h-=2;break e}break;case 2:t.mode=da;break;case 3:e.msg="invalid block type",t.mode=z}l>>>=2,h-=2;break;case ha:for(l>>>=h&7,h-=h&7;h<32;){if(_===0)break e;_--,l+=i[n++]<<h,h+=8}if((l&65535)!==(l>>>16^65535)){e.msg="invalid stored block lengths",t.mode=z;break}if(t.length=l&65535,l=0,h=0,t.mode=Ht,a===dt)break e;case Ht:t.mode=oa;case oa:if(o=t.length,o){if(o>_&&(o=_),o>d&&(o=d),o===0)break e;W.arraySet(r,i,n,o,f),_-=o,n+=o,d-=o,f+=o,t.length-=o;break}t.mode=fe;break;case da:for(;h<14;){if(_===0)break e;_--,l+=i[n++]<<h,h+=8}if(t.nlen=(l&31)+257,l>>>=5,h-=5,t.ndist=(l&31)+1,l>>>=5,h-=5,t.ncode=(l&15)+4,l>>>=4,h-=4,t.nlen>286||t.ndist>30){e.msg="too many length or distance symbols",t.mode=z;break}t.have=0,t.mode=ua;case ua:for(;t.have<t.ncode;){for(;h<3;){if(_===0)break e;_--,l+=i[n++]<<h,h+=8}t.lens[j[t.have++]]=l&7,l>>>=3,h-=3}for(;t.have<19;)t.lens[j[t.have++]]=0;if(t.lencode=t.lendyn,t.lenbits=7,O={bits:t.lenbits},p=qe(on,t.lens,0,19,t.lencode,0,t.work,O),t.lenbits=O.bits,p){e.msg="invalid code lengths set",t.mode=z;break}t.have=0,t.mode=sa;case sa:for(;t.have<t.nlen+t.ndist;){for(;k=t.lencode[l&(1<<t.lenbits)-1],g=k>>>24,L=k>>>16&255,N=k&65535,!(g<=h);){if(_===0)break e;_--,l+=i[n++]<<h,h+=8}if(N<16)l>>>=g,h-=g,t.lens[t.have++]=N;else{if(N===16){for(x=g+2;h<x;){if(_===0)break e;_--,l+=i[n++]<<h,h+=8}if(l>>>=g,h-=g,t.have===0){e.msg="invalid bit length repeat",t.mode=z;break}y=t.lens[t.have-1],o=3+(l&3),l>>>=2,h-=2}else if(N===17){for(x=g+3;h<x;){if(_===0)break e;_--,l+=i[n++]<<h,h+=8}l>>>=g,h-=g,y=0,o=3+(l&7),l>>>=3,h-=3}else{for(x=g+7;h<x;){if(_===0)break e;_--,l+=i[n++]<<h,h+=8}l>>>=g,h-=g,y=0,o=11+(l&127),l>>>=7,h-=7}if(t.have+o>t.nlen+t.ndist){e.msg="invalid bit length repeat",t.mode=z;break}for(;o--;)t.lens[t.have++]=y}}if(t.mode===z)break;if(t.lens[256]===0){e.msg="invalid code -- missing end-of-block",t.mode=z;break}if(t.lenbits=9,O={bits:t.lenbits},p=qe(ma,t.lens,0,t.nlen,t.lencode,0,t.work,O),t.lenbits=O.bits,p){e.msg="invalid literal/lengths set",t.mode=z;break}if(t.distbits=6,t.distcode=t.distdyn,O={bits:t.distbits},p=qe(Ta,t.lens,t.nlen,t.ndist,t.distcode,0,t.work,O),t.distbits=O.bits,p){e.msg="invalid distances set",t.mode=z;break}if(t.mode=ut,a===dt)break e;case ut:t.mode=st;case st:if(_>=6&&d>=258){e.next_out=f,e.avail_out=d,e.next_in=n,e.avail_in=_,t.hold=l,t.bits=h,hn(e,s),f=e.next_out,r=e.output,d=e.avail_out,n=e.next_in,i=e.input,_=e.avail_in,l=t.hold,h=t.bits,t.mode===fe&&(t.back=-1);break}for(t.back=0;k=t.lencode[l&(1<<t.lenbits)-1],g=k>>>24,L=k>>>16&255,N=k&65535,!(g<=h);){if(_===0)break e;_--,l+=i[n++]<<h,h+=8}if(L&&!(L&240)){for(T=g,c=L,R=N;k=t.lencode[R+((l&(1<<T+c)-1)>>T)],g=k>>>24,L=k>>>16&255,N=k&65535,!(T+g<=h);){if(_===0)break e;_--,l+=i[n++]<<h,h+=8}l>>>=T,h-=T,t.back+=T}if(l>>>=g,h-=g,t.back+=g,t.length=N,L===0){t.mode=ga;break}if(L&32){t.back=-1,t.mode=fe;break}if(L&64){e.msg="invalid literal/length code",t.mode=z;break}t.extra=L&15,t.mode=ca;case ca:if(t.extra){for(x=t.extra;h<x;){if(_===0)break e;_--,l+=i[n++]<<h,h+=8}t.length+=l&(1<<t.extra)-1,l>>>=t.extra,h-=t.extra,t.back+=t.extra}t.was=t.length,t.mode=va;case va:for(;k=t.distcode[l&(1<<t.distbits)-1],g=k>>>24,L=k>>>16&255,N=k&65535,!(g<=h);){if(_===0)break e;_--,l+=i[n++]<<h,h+=8}if(!(L&240)){for(T=g,c=L,R=N;k=t.distcode[R+((l&(1<<T+c)-1)>>T)],g=k>>>24,L=k>>>16&255,N=k&65535,!(T+g<=h);){if(_===0)break e;_--,l+=i[n++]<<h,h+=8}l>>>=T,h-=T,t.back+=T}if(l>>>=g,h-=g,t.back+=g,L&64){e.msg="invalid distance code",t.mode=z;break}t.offset=N,t.extra=L&15,t.mode=wa;case wa:if(t.extra){for(x=t.extra;h<x;){if(_===0)break e;_--,l+=i[n++]<<h,h+=8}t.offset+=l&(1<<t.extra)-1,l>>>=t.extra,h-=t.extra,t.back+=t.extra}if(t.offset>t.dmax){e.msg="invalid distance too far back",t.mode=z;break}t.mode=ba;case ba:if(d===0)break e;if(o=s-d,t.offset>o){if(o=t.offset-o,o>t.whave&&t.sane){e.msg="invalid distance too far back",t.mode=z;break}o>t.wnext?(o-=t.wnext,b=t.wsize-o):b=t.wnext-o,o>t.length&&(o=t.length),w=t.window}else w=r,b=f-t.offset,o=t.length;o>d&&(o=d),d-=o,t.length-=o;do r[f++]=w[b++];while(--o);t.length===0&&(t.mode=st);break;case ga:if(d===0)break e;r[f++]=t.length,d--,t.mode=st;break;case Pt:if(t.wrap){for(;h<32;){if(_===0)break e;_--,l|=i[n++]<<h,h+=8}if(s-=d,e.total_out+=s,t.total+=s,s&&(e.adler=t.check=t.flags?ae(t.check,r,s,f-s):Wt(t.check,r,s,f-s)),s=d,(t.flags?l:xa(l))!==t.check){e.msg="incorrect data check",t.mode=z;break}l=0,h=0}t.mode=Ea;case Ea:if(t.wrap&&t.flags){for(;h<32;){if(_===0)break e;_--,l+=i[n++]<<h,h+=8}if(l!==(t.total&4294967295)){e.msg="incorrect length check",t.mode=z;break}l=0,h=0}t.mode=pa;case pa:p=un;break e;case z:p=Za;break e;case Yt:return Xt;case vn:default:return V}return e.next_out=f,e.avail_out=d,e.next_in=n,e.avail_in=_,t.hold=l,t.bits=h,(t.wsize||s!==e.avail_out&&t.mode<z&&(t.mode<Pt||a!==Qi))&&Ra(e,e.output,e.next_out,s-e.avail_out)?(t.mode=Yt,Xt):(m-=e.avail_in,s-=e.avail_out,e.total_in+=m,e.total_out+=s,t.total+=s,t.wrap&&s&&(e.adler=t.check=t.flags?ae(t.check,r,s,e.next_out-s):Wt(t.check,r,s,e.next_out-s)),e.data_type=t.bits+(t.last?64:0)+(t.mode===fe?128:0)+(t.mode===ut||t.mode===Ht?256:0),(m===0&&s===0||a===Qi)&&p===pe&&(p=cn),p)}function Tn(e){if(!e||!e.state)return V;var a=e.state;return a.window&&(a.window=null),e.state=null,pe}function Zn(e,a){var t;return!e||!e.state||(t=e.state,!(t.wrap&2))?V:(t.head=a,a.done=!1,pe)}function Sn(e,a){var t=a.length,i,r,n;return!e||!e.state||(i=e.state,i.wrap!==0&&i.mode!==ct)?V:i.mode===ct&&(r=1,r=Wt(r,a,t,0),r!==i.check)?Za:(n=Ra(e,a,t,t),n?(i.mode=Yt,Xt):(i.havedict=1,pe))}Q.inflateReset=Aa;Q.inflateReset2=Ia;Q.inflateResetKeep=ya;Q.inflateInit=xn;Q.inflateInit2=La;Q.inflate=mn;Q.inflateEnd=Tn;Q.inflateGetHeader=Zn;Q.inflateSetDictionary=Sn;Q.inflateInfo="pako inflate (from Nodeca project)"});var Da=C((uf,za)=>{"use strict";Z();za.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}});var Oa=C(u=>{"use strict";Z();var X=kt(),yn=fi(),Ve=Pi(),xe=Na(),Fa=Da();for(qt in Fa)u[qt]=Fa[qt];var qt;u.NONE=0;u.DEFLATE=1;u.INFLATE=2;u.GZIP=3;u.GUNZIP=4;u.DEFLATERAW=5;u.INFLATERAW=6;u.UNZIP=7;var An=31,In=139;function H(e){if(typeof e!="number"||e<u.DEFLATE||e>u.UNZIP)throw new TypeError("Bad argument");this.dictionary=null,this.err=0,this.flush=0,this.init_done=!1,this.level=0,this.memLevel=0,this.mode=e,this.strategy=0,this.windowBits=0,this.write_in_progress=!1,this.pending_close=!1,this.gzip_id_bytes_read=0}H.prototype.close=function(){if(this.write_in_progress){this.pending_close=!0;return}this.pending_close=!1,X(this.init_done,"close before init"),X(this.mode<=u.UNZIP),this.mode===u.DEFLATE||this.mode===u.GZIP||this.mode===u.DEFLATERAW?Ve.deflateEnd(this.strm):(this.mode===u.INFLATE||this.mode===u.GUNZIP||this.mode===u.INFLATERAW||this.mode===u.UNZIP)&&xe.inflateEnd(this.strm),this.mode=u.NONE,this.dictionary=null};H.prototype.write=function(e,a,t,i,r,n,f){return this._write(!0,e,a,t,i,r,n,f)};H.prototype.writeSync=function(e,a,t,i,r,n,f){return this._write(!1,e,a,t,i,r,n,f)};H.prototype._write=function(e,a,t,i,r,n,f,_){if(X.equal(arguments.length,8),X(this.init_done,"write before init"),X(this.mode!==u.NONE,"already finalized"),X.equal(!1,this.write_in_progress,"write already in progress"),X.equal(!1,this.pending_close,"close is pending"),this.write_in_progress=!0,X.equal(!1,a===void 0,"must provide flush value"),this.write_in_progress=!0,a!==u.Z_NO_FLUSH&&a!==u.Z_PARTIAL_FLUSH&&a!==u.Z_SYNC_FLUSH&&a!==u.Z_FULL_FLUSH&&a!==u.Z_FINISH&&a!==u.Z_BLOCK)throw new Error("Invalid flush value");if(t==null&&(t=M.alloc(0),r=0,i=0),this.strm.avail_in=r,this.strm.input=t,this.strm.next_in=i,this.strm.avail_out=_,this.strm.output=n,this.strm.next_out=f,this.flush=a,!e)return this._process(),this._checkError()?this._afterSync():void 0;var d=this;return D.nextTick(function(){d._process(),d._after()}),this};H.prototype._afterSync=function(){var e=this.strm.avail_out,a=this.strm.avail_in;return this.write_in_progress=!1,[a,e]};H.prototype._process=function(){var e=null;switch(this.mode){case u.DEFLATE:case u.GZIP:case u.DEFLATERAW:this.err=Ve.deflate(this.strm,this.flush);break;case u.UNZIP:switch(this.strm.avail_in>0&&(e=this.strm.next_in),this.gzip_id_bytes_read){case 0:if(e===null)break;if(this.strm.input[e]===An){if(this.gzip_id_bytes_read=1,e++,this.strm.avail_in===1)break}else{this.mode=u.INFLATE;break}case 1:if(e===null)break;this.strm.input[e]===In?(this.gzip_id_bytes_read=2,this.mode=u.GUNZIP):this.mode=u.INFLATE;break;default:throw new Error("invalid number of gzip magic number bytes read")}case u.INFLATE:case u.GUNZIP:case u.INFLATERAW:for(this.err=xe.inflate(this.strm,this.flush),this.err===u.Z_NEED_DICT&&this.dictionary&&(this.err=xe.inflateSetDictionary(this.strm,this.dictionary),this.err===u.Z_OK?this.err=xe.inflate(this.strm,this.flush):this.err===u.Z_DATA_ERROR&&(this.err=u.Z_NEED_DICT));this.strm.avail_in>0&&this.mode===u.GUNZIP&&this.err===u.Z_STREAM_END&&this.strm.next_in[0]!==0;)this.reset(),this.err=xe.inflate(this.strm,this.flush);break;default:throw new Error("Unknown mode "+this.mode)}};H.prototype._checkError=function(){switch(this.err){case u.Z_OK:case u.Z_BUF_ERROR:if(this.strm.avail_out!==0&&this.flush===u.Z_FINISH)return this._error("unexpected end of file"),!1;break;case u.Z_STREAM_END:break;case u.Z_NEED_DICT:return this.dictionary==null?this._error("Missing dictionary"):this._error("Bad dictionary"),!1;default:return this._error("Zlib error"),!1}return!0};H.prototype._after=function(){if(this._checkError()){var e=this.strm.avail_out,a=this.strm.avail_in;this.write_in_progress=!1,this.callback(a,e),this.pending_close&&this.close()}};H.prototype._error=function(e){this.strm.msg&&(e=this.strm.msg),this.onerror(e,this.err),this.write_in_progress=!1,this.pending_close&&this.close()};H.prototype.init=function(e,a,t,i,r){X(arguments.length===4||arguments.length===5,"init(windowBits, level, memLevel, strategy, [dictionary])"),X(e>=8&&e<=15,"invalid windowBits"),X(a>=-1&&a<=9,"invalid compression level"),X(t>=1&&t<=9,"invalid memlevel"),X(i===u.Z_FILTERED||i===u.Z_HUFFMAN_ONLY||i===u.Z_RLE||i===u.Z_FIXED||i===u.Z_DEFAULT_STRATEGY,"invalid strategy"),this._init(a,e,t,i,r),this._setDictionary()};H.prototype.params=function(){throw new Error("deflateParams Not supported")};H.prototype.reset=function(){this._reset(),this._setDictionary()};H.prototype._init=function(e,a,t,i,r){switch(this.level=e,this.windowBits=a,this.memLevel=t,this.strategy=i,this.flush=u.Z_NO_FLUSH,this.err=u.Z_OK,(this.mode===u.GZIP||this.mode===u.GUNZIP)&&(this.windowBits+=16),this.mode===u.UNZIP&&(this.windowBits+=32),(this.mode===u.DEFLATERAW||this.mode===u.INFLATERAW)&&(this.windowBits=-1*this.windowBits),this.strm=new yn,this.mode){case u.DEFLATE:case u.GZIP:case u.DEFLATERAW:this.err=Ve.deflateInit2(this.strm,this.level,u.Z_DEFLATED,this.windowBits,this.memLevel,this.strategy);break;case u.INFLATE:case u.GUNZIP:case u.INFLATERAW:case u.UNZIP:this.err=xe.inflateInit2(this.strm,this.windowBits);break;default:throw new Error("Unknown mode "+this.mode)}this.err!==u.Z_OK&&this._error("Init error"),this.dictionary=r,this.write_in_progress=!1,this.init_done=!0};H.prototype._setDictionary=function(){if(this.dictionary!=null){switch(this.err=u.Z_OK,this.mode){case u.DEFLATE:case u.DEFLATERAW:this.err=Ve.deflateSetDictionary(this.strm,this.dictionary);break;default:break}this.err!==u.Z_OK&&this._error("Failed to set dictionary")}};H.prototype._reset=function(){switch(this.err=u.Z_OK,this.mode){case u.DEFLATE:case u.DEFLATERAW:case u.GZIP:this.err=Ve.deflateReset(this.strm);break;case u.INFLATE:case u.INFLATERAW:case u.GUNZIP:this.err=xe.inflateReset(this.strm);break;default:break}this.err!==u.Z_OK&&this._error("Failed to reset stream")};u.Zlib=H});import Ln from"https://registry.koishi.chat/modules/util/index.js";var Ma=C((bf,Ua)=>{Z();Ua.exports=Ln});var Nn=C(v=>{Z();var re=(xt(),ti(ce)).Buffer,Pa=ai().Transform,E=Oa(),se=Ma(),je=kt().ok,jt=(xt(),ti(ce)).kMaxLength,Ga="Cannot create final Buffer. It would be larger than 0x"+jt.toString(16)+" bytes";E.Z_MIN_WINDOWBITS=8;E.Z_MAX_WINDOWBITS=15;E.Z_DEFAULT_WINDOWBITS=15;E.Z_MIN_CHUNK=64;E.Z_MAX_CHUNK=1/0;E.Z_DEFAULT_CHUNK=16*1024;E.Z_MIN_MEMLEVEL=1;E.Z_MAX_MEMLEVEL=9;E.Z_DEFAULT_MEMLEVEL=8;E.Z_MIN_LEVEL=-1;E.Z_MAX_LEVEL=9;E.Z_DEFAULT_LEVEL=E.Z_DEFAULT_COMPRESSION;var Ba=Object.keys(E);for(vt=0;vt<Ba.length;vt++)wt=Ba[vt],wt.match(/^Z/)&&Object.defineProperty(v,wt,{enumerable:!0,value:E[wt],writable:!1});var wt,vt,gt={Z_OK:E.Z_OK,Z_STREAM_END:E.Z_STREAM_END,Z_NEED_DICT:E.Z_NEED_DICT,Z_ERRNO:E.Z_ERRNO,Z_STREAM_ERROR:E.Z_STREAM_ERROR,Z_DATA_ERROR:E.Z_DATA_ERROR,Z_MEM_ERROR:E.Z_MEM_ERROR,Z_BUF_ERROR:E.Z_BUF_ERROR,Z_VERSION_ERROR:E.Z_VERSION_ERROR},Ca=Object.keys(gt);for(bt=0;bt<Ca.length;bt++)Vt=Ca[bt],gt[gt[Vt]]=Vt;var Vt,bt;Object.defineProperty(v,"codes",{enumerable:!0,value:Object.freeze(gt),writable:!1});v.Deflate=ke;v.Inflate=me;v.Gzip=Te;v.Gunzip=Ze;v.DeflateRaw=Se;v.InflateRaw=ye;v.Unzip=Ae;v.createDeflate=function(e){return new ke(e)};v.createInflate=function(e){return new me(e)};v.createDeflateRaw=function(e){return new Se(e)};v.createInflateRaw=function(e){return new ye(e)};v.createGzip=function(e){return new Te(e)};v.createGunzip=function(e){return new Ze(e)};v.createUnzip=function(e){return new Ae(e)};v.deflate=function(e,a,t){return typeof a=="function"&&(t=a,a={}),Ie(new ke(a),e,t)};v.deflateSync=function(e,a){return Le(new ke(a),e)};v.gzip=function(e,a,t){return typeof a=="function"&&(t=a,a={}),Ie(new Te(a),e,t)};v.gzipSync=function(e,a){return Le(new Te(a),e)};v.deflateRaw=function(e,a,t){return typeof a=="function"&&(t=a,a={}),Ie(new Se(a),e,t)};v.deflateRawSync=function(e,a){return Le(new Se(a),e)};v.unzip=function(e,a,t){return typeof a=="function"&&(t=a,a={}),Ie(new Ae(a),e,t)};v.unzipSync=function(e,a){return Le(new Ae(a),e)};v.inflate=function(e,a,t){return typeof a=="function"&&(t=a,a={}),Ie(new me(a),e,t)};v.inflateSync=function(e,a){return Le(new me(a),e)};v.gunzip=function(e,a,t){return typeof a=="function"&&(t=a,a={}),Ie(new Ze(a),e,t)};v.gunzipSync=function(e,a){return Le(new Ze(a),e)};v.inflateRaw=function(e,a,t){return typeof a=="function"&&(t=a,a={}),Ie(new ye(a),e,t)};v.inflateRawSync=function(e,a){return Le(new ye(a),e)};function Ie(e,a,t){var i=[],r=0;e.on("error",f),e.on("end",_),e.end(a),n();function n(){for(var d;(d=e.read())!==null;)i.push(d),r+=d.length;e.once("readable",n)}function f(d){e.removeListener("end",_),e.removeListener("readable",n),t(d)}function _(){var d,l=null;r>=jt?l=new RangeError(Ga):d=re.concat(i,r),i=[],e.close(),t(l,d)}}function Le(e,a){if(typeof a=="string"&&(a=re.from(a)),!re.isBuffer(a))throw new TypeError("Not a string or buffer");var t=e._finishFlushFlag;return e._processChunk(a,t)}function ke(e){if(!(this instanceof ke))return new ke(e);F.call(this,e,E.DEFLATE)}function me(e){if(!(this instanceof me))return new me(e);F.call(this,e,E.INFLATE)}function Te(e){if(!(this instanceof Te))return new Te(e);F.call(this,e,E.GZIP)}function Ze(e){if(!(this instanceof Ze))return new Ze(e);F.call(this,e,E.GUNZIP)}function Se(e){if(!(this instanceof Se))return new Se(e);F.call(this,e,E.DEFLATERAW)}function ye(e){if(!(this instanceof ye))return new ye(e);F.call(this,e,E.INFLATERAW)}function Ae(e){if(!(this instanceof Ae))return new Ae(e);F.call(this,e,E.UNZIP)}function Ha(e){return e===E.Z_NO_FLUSH||e===E.Z_PARTIAL_FLUSH||e===E.Z_SYNC_FLUSH||e===E.Z_FULL_FLUSH||e===E.Z_FINISH||e===E.Z_BLOCK}function F(e,a){var t=this;if(this._opts=e=e||{},this._chunkSize=e.chunkSize||v.Z_DEFAULT_CHUNK,Pa.call(this,e),e.flush&&!Ha(e.flush))throw new Error("Invalid flush flag: "+e.flush);if(e.finishFlush&&!Ha(e.finishFlush))throw new Error("Invalid flush flag: "+e.finishFlush);if(this._flushFlag=e.flush||E.Z_NO_FLUSH,this._finishFlushFlag=typeof e.finishFlush<"u"?e.finishFlush:E.Z_FINISH,e.chunkSize&&(e.chunkSize<v.Z_MIN_CHUNK||e.chunkSize>v.Z_MAX_CHUNK))throw new Error("Invalid chunk size: "+e.chunkSize);if(e.windowBits&&(e.windowBits<v.Z_MIN_WINDOWBITS||e.windowBits>v.Z_MAX_WINDOWBITS))throw new Error("Invalid windowBits: "+e.windowBits);if(e.level&&(e.level<v.Z_MIN_LEVEL||e.level>v.Z_MAX_LEVEL))throw new Error("Invalid compression level: "+e.level);if(e.memLevel&&(e.memLevel<v.Z_MIN_MEMLEVEL||e.memLevel>v.Z_MAX_MEMLEVEL))throw new Error("Invalid memLevel: "+e.memLevel);if(e.strategy&&e.strategy!=v.Z_FILTERED&&e.strategy!=v.Z_HUFFMAN_ONLY&&e.strategy!=v.Z_RLE&&e.strategy!=v.Z_FIXED&&e.strategy!=v.Z_DEFAULT_STRATEGY)throw new Error("Invalid strategy: "+e.strategy);if(e.dictionary&&!re.isBuffer(e.dictionary))throw new Error("Invalid dictionary: it should be a Buffer instance");this._handle=new E.Zlib(a);var i=this;this._hadError=!1,this._handle.onerror=function(f,_){Et(i),i._hadError=!0;var d=new Error(f);d.errno=_,d.code=v.codes[_],i.emit("error",d)};var r=v.Z_DEFAULT_COMPRESSION;typeof e.level=="number"&&(r=e.level);var n=v.Z_DEFAULT_STRATEGY;typeof e.strategy=="number"&&(n=e.strategy),this._handle.init(e.windowBits||v.Z_DEFAULT_WINDOWBITS,r,e.memLevel||v.Z_DEFAULT_MEMLEVEL,n,e.dictionary),this._buffer=re.allocUnsafe(this._chunkSize),this._offset=0,this._level=r,this._strategy=n,this.once("end",this.close),Object.defineProperty(this,"_closed",{get:function(){return!t._handle},configurable:!0,enumerable:!0})}se.inherits(F,Pa);F.prototype.params=function(e,a,t){if(e<v.Z_MIN_LEVEL||e>v.Z_MAX_LEVEL)throw new RangeError("Invalid compression level: "+e);if(a!=v.Z_FILTERED&&a!=v.Z_HUFFMAN_ONLY&&a!=v.Z_RLE&&a!=v.Z_FIXED&&a!=v.Z_DEFAULT_STRATEGY)throw new TypeError("Invalid strategy: "+a);if(this._level!==e||this._strategy!==a){var i=this;this.flush(E.Z_SYNC_FLUSH,function(){je(i._handle,"zlib binding closed"),i._handle.params(e,a),i._hadError||(i._level=e,i._strategy=a,t&&t())})}else D.nextTick(t)};F.prototype.reset=function(){return je(this._handle,"zlib binding closed"),this._handle.reset()};F.prototype._flush=function(e){this._transform(re.alloc(0),"",e)};F.prototype.flush=function(e,a){var t=this,i=this._writableState;(typeof e=="function"||e===void 0&&!a)&&(a=e,e=E.Z_FULL_FLUSH),i.ended?a&&D.nextTick(a):i.ending?a&&this.once("end",a):i.needDrain?a&&this.once("drain",function(){return t.flush(e,a)}):(this._flushFlag=e,this.write(re.alloc(0),"",a))};F.prototype.close=function(e){Et(this,e),D.nextTick(Rn,this)};function Et(e,a){a&&D.nextTick(a),e._handle&&(e._handle.close(),e._handle=null)}function Rn(e){e.emit("close")}F.prototype._transform=function(e,a,t){var i,r=this._writableState,n=r.ending||r.ended,f=n&&(!e||r.length===e.length);if(e!==null&&!re.isBuffer(e))return t(new Error("invalid input"));if(!this._handle)return t(new Error("zlib binding closed"));f?i=this._finishFlushFlag:(i=this._flushFlag,e.length>=r.length&&(this._flushFlag=this._opts.flush||E.Z_NO_FLUSH)),this._processChunk(e,i,t)};F.prototype._processChunk=function(e,a,t){var i=e&&e.length,r=this._chunkSize-this._offset,n=0,f=this,_=typeof t=="function";if(!_){var d=[],l=0,h;this.on("error",function(w){h=w}),je(this._handle,"zlib binding closed");do var m=this._handle.writeSync(a,e,n,i,this._buffer,this._offset,r);while(!this._hadError&&b(m[0],m[1]));if(this._hadError)throw h;if(l>=jt)throw Et(this),new RangeError(Ga);var s=re.concat(d,l);return Et(this),s}je(this._handle,"zlib binding closed");var o=this._handle.write(a,e,n,i,this._buffer,this._offset,r);o.buffer=e,o.callback=b;function b(w,k){if(this&&(this.buffer=null,this.callback=null),!f._hadError){var g=r-k;if(je(g>=0,"have should not go down"),g>0){var L=f._buffer.slice(f._offset,f._offset+g);f._offset+=g,_?f.push(L):(d.push(L),l+=L.length)}if((k===0||f._offset>=f._chunkSize)&&(r=f._chunkSize,f._offset=0,f._buffer=re.allocUnsafe(f._chunkSize)),k===0){if(n+=i-w,i=w,!_)return!0;var N=f._handle.write(a,e,n,i,f._buffer,f._offset,f._chunkSize);N.callback=b,N.buffer=e;return}if(!_)return!1;t()}}};se.inherits(ke,F);se.inherits(me,F);se.inherits(Te,F);se.inherits(Ze,F);se.inherits(Se,F);se.inherits(ye,F);se.inherits(Ae,F)});export default Nn();
