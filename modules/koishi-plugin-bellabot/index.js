var X=Object.defineProperty;var fe=Object.getOwnPropertyDescriptor;var he=Object.getOwnPropertyNames;var be=Object.prototype.hasOwnProperty;var B=(e,t)=>()=>(e&&(t=e(e=0)),t);var U=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var $=(e,t,a,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of he(t))!be.call(e,n)&&n!==a&&X(e,n,{get:()=>t[n],enumerable:!(i=fe(t,n))||i.enumerable});return e},b=(e,t,a)=>($(e,t,"default"),a&&$(a,t,"default"));var _=e=>$(X({},"__esModule",{value:!0}),e);import{Buffer as w}from"https://registry.koishi.chat/modules/buffer/index.js";import v from"https://registry.koishi.chat/modules/process/index.js";var y=B(()=>{});var k={};import*as Qe from"https://registry.koishi.chat/modules/koishi/index.js";var M=B(()=>{y();b(k,Qe)});var I={};import*as Ve from"https://registry.koishi.chat/modules/@cordiverse/url/index.js";var K=B(()=>{y();b(I,Ve)});import ye from"https://registry.koishi.chat/modules/@cordiverse/path/index.js";var L=U((Ge,W)=>{y();W.exports=ye});var T={};import*as Ke from"https://registry.koishi.chat/modules/@satorijs/element/jsx-runtime/index.js";var C=B(()=>{y();b(T,Ke)});import Se from"https://registry.koishi.chat/modules/crypto-browserify/index.js";var ee=U((Ye,Y)=>{y();Y.exports=Se});var F={};import*as at from"https://registry.koishi.chat/modules/@cordiverse/fs/index.js";var te=B(()=>{y();b(F,at)});var qe=U((nt,pe)=>{y();var _e=Object.create,N=Object.defineProperty,Te=Object.getOwnPropertyDescriptor,ke=Object.getOwnPropertyNames,je=Object.getPrototypeOf,we=Object.prototype.hasOwnProperty,E=(e,t)=>N(e,"name",{value:t,configurable:!0}),se=(e,t)=>{for(var a in t)N(e,a,{get:t[a],enumerable:!0})},ue=(e,t,a,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of ke(t))!we.call(e,n)&&n!==a&&N(e,n,{get:()=>t[n],enumerable:!(i=Te(t,n))||i.enumerable});return e},G=(e,t,a)=>(a=e!=null?_e(je(e)):{},ue(t||!e||!e.__esModule?N(a,"default",{value:e,enumerable:!0}):a,e)),ve=e=>ue(N({},"__esModule",{value:!0}),e),ge={};se(ge,{Config:()=>Me,apply:()=>de,inject:()=>Pe,name:()=>oe,usage:()=>Re});pe.exports=ve(ge);var p=(M(),_(k)),ae=(K(),_(I)),P=L(),j=(M(),_(k)),l=(C(),_(T)),Ee=[{range:[0,6],message:"凌晨好"},{range:[6,11],message:"上午好"},{range:[11,14],message:"中午好"},{range:[14,18],message:"下午好"},{range:[18,20],message:"傍晚好"},{range:[20,24],message:"晚上好"}],Q=[{level:1,level_line:1e3},{level:2,level_line:3e3},{level:3,level_line:7e3},{level:4,level_line:15e3},{level:5,level_line:3e4},{level:6,level_line:5e4},{level:7,level_line:8e4},{level:8,level_line:17e4},{level:9,level_line:35e4},{level:10,level_line:8e5}],Ie=class{static{E(this,"Signin")}ctx;cfg;constructor(e,t){this.ctx=e,this.cfg=t,this.ctx.database.extend("bella_sign_in",{id:"string",name:"string",time:"string",point:"unsigned",count:"unsigned",current_point:"unsigned",working:"boolean",stime:"unsigned",wpoint:"unsigned",wktimecard:"unsigned",wktimespeed:"boolean"})}async callSignin(e){var t;this.ctx.database&&this.cfg.signin.callme&&(t=e.username),!t&&this.cfg.signin.callme?t=e.author.name:t=e.username,t=t.length>12?t.substring(0,12):t;let a=j.Time.template("yyyy-MM-dd hh:mm:ss",new Date),i=(await this.ctx.database.get("bella_sign_in",{id:String(e.userId)}))[0]?.point,n=(await this.ctx.database.get("bella_sign_in",{id:String(e.userId)}))[0]?.time,s=(await this.ctx.database.get("bella_sign_in",{id:String(e.userId)}))[0]?.count,g=(await this.ctx.database.get("bella_sign_in",{id:String(e.userId)}))[0]?.name,u=j.Random.int(this.cfg.signin.signpointmin,this.cfg.signin.signpointmax),m=(await this.ctx.database.get("bella_sign_in",{id:String(e.userId)}))[0]?.current_point;return g||await this.ctx.database.upsert("bella_sign_in",[{id:String(e.userId),name:t}]),!i&&!n?(await this.ctx.database.upsert("bella_sign_in",[{id:String(e.userId),name:t,time:a,point:Number(u),count:1,current_point:Number(u)}]),{cmd:"get",status:1,getpoint:u,signTime:a,allpoint:u,count:1}):Number(n.slice(8,10))-Number(a.slice(8,10))?(await this.ctx.database.upsert("bella_sign_in",[{id:String(e.userId),name:t,time:a,point:Number(i+u),count:s+1,current_point:Number(u)}]),{cmd:"get",status:1,getpoint:u,signTime:a,allpoint:i+u,count:s+1}):{cmd:"get",status:0,getpoint:m,signTime:a,allpoint:i,count:s}}async signQuery(e){let t=(await this.ctx.database.get("bella_sign_in",{id:String(e.userId)}))[0]?.point,a=(await this.ctx.database.get("bella_sign_in",{id:String(e.userId)}))[0]?.time,i=(await this.ctx.database.get("bella_sign_in",{id:String(e.userId)}))[0]?.count,n=(await this.ctx.database.get("bella_sign_in",{id:String(e.userId)}))[0]?.current_point,s=j.Time.template("yyyy-MM-dd hh:mm:ss",new Date);return Number(a.slice(8,10))-Number(s.slice(8,10))?{cmd:"query",status:2,getpoint:n||0,signTime:a||"暂无数据",allpoint:t||0,count:i||0}:{cmd:"query",status:0,getpoint:n||0,signTime:a||"暂无数据",allpoint:t||0,count:i||0}}async lottery(e,t){let a=(await this.ctx.database.get("bella_sign_in",{id:String(e.userId)}))[0]?.point;if(!t||t<0||isNaN(Number(t)))return"清输入有效积分";if(a-t<0)return"积分不足!";if(j.Random.bool(this.cfg.signin.lotteryOdds)){var i=this.rangePoint(t);return await this.ctx.database.upsert("bella_sign_in",[{id:String(e.userId),point:Number(a-t+i.final_point)}]),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("at",{id:e.userId}),`
`,i.msg,` 
 消耗`,t,"积分抽得: ",i.final_point,"积分"]})}else return await this.ctx.database.upsert("bella_sign_in",[{id:String(e.userId),point:Number(a-t)}]),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("at",{id:e.userId}),`
 获得积分:0
`,j.Random.pick([(0,l.jsx)(l.Fragment,{children:"赌狗赌狗，赌到最后一无所有！"}),(0,l.jsx)(l.Fragment,{children:"哦吼，积分没喽！"}),(0,l.jsx)(l.Fragment,{children:"谢谢你的积分！"}),(0,l.jsx)(l.Fragment,{children:"积分化作了尘埃"}),(0,l.jsx)(l.Fragment,{children:"哈哈！大大大非酋"}),(0,l.jsx)(l.Fragment,{children:"杂鱼♡~大哥哥连这点积分都赌掉了呢~"}),(0,l.jsx)(l.Fragment,{children:"杂鱼♡~杂鱼♡~"}),(0,l.jsx)(l.Fragment,{children:"摸摸，杂鱼大哥哥不哭~"})])]})}async workstart(e){var t;this.ctx.database&&this.cfg.signin.callme&&(t=e.user.name),!t&&this.cfg.signin.callme?t=e.author.name:t=e.username;let a=(await this.ctx.database.get("bella_sign_in",{id:String(e.userId)}))[0]?.working,i=(await this.ctx.database.get("bella_sign_in",{id:String(e.userId)}))[0]?.wktimecard,n=Math.floor(Date.now()/1e3/60);return a?(0,l.jsxs)(l.Fragment,{children:[t,'打工任务正在进行，可以使用"结束打工"结束任务']}):(await this.ctx.database.upsert("bella_sign_in",[{id:String(e.userId),working:!0,stime:n}]),(0,l.jsxs)(l.Fragment,{children:[t,`打工开始^v^
Tip: 打工时间最少半小时，最多为`,8+i,"小时哦~"]}))}async workend(e){var t;this.ctx.database&&this.cfg.signin.callme&&(t=e.user.name),!t&&this.cfg.signin.callme?t=e.author.name:t=e.username;let a=(await this.ctx.database.get("bella_sign_in",{id:String(e.userId)}))[0]?.point,i=(await this.ctx.database.get("bella_sign_in",{id:String(e.userId)}))[0]?.working,n=(await this.ctx.database.get("bella_sign_in",{id:String(e.userId)}))[0]?.stime,s=(await this.ctx.database.get("bella_sign_in",{id:String(e.userId)}))[0]?.wpoint,g=(await this.ctx.database.get("bella_sign_in",{id:String(e.userId)}))[0]?.wktimecard,u=(await this.ctx.database.get("bella_sign_in",{id:String(e.userId)}))[0]?.wktimespeed,m=Math.floor(Date.now()/1e3/60);if(i){await this.ctx.database.upsert("bella_sign_in",[{id:String(e.userId),working:!1}]);var c=m-n;c=g?c>=(8+g)*60?(8+g)*60:c:c>=8*60?8*60:c;var d=c<30?0:Math.floor(u?c*this.levelJudge(a).level:c/2*this.levelJudge(a).level);return await this.ctx.database.upsert("bella_sign_in",[{id:String(e.userId),point:a+d,wpoint:s+d}]),(0,l.jsxs)(l.Fragment,{children:[t,`打工结束啦！
本次打工`,Math.floor(c/60),"小时",c%60,`分钟
获得积分:`,d]})}else return(0,l.jsxs)(l.Fragment,{children:[t,'还没有正在进行的打工任务哦,使用"开始打工"命令可以进行打工哦']})}async workcheck(e){var t;this.ctx.database&&this.cfg.signin.callme&&(t=e.user.name),!t&&this.cfg.signin.callme?t=e.author.name:t=e.username;let a=(await this.ctx.database.get("bella_sign_in",{id:String(e.userId)}))[0]?.point,i=(await this.ctx.database.get("bella_sign_in",{id:String(e.userId)}))[0]?.working,n=(await this.ctx.database.get("bella_sign_in",{id:String(e.userId)}))[0]?.stime,s=(await this.ctx.database.get("bella_sign_in",{id:String(e.userId)}))[0]?.wpoint;var u=Math.floor(Date.now()/1e3/60)-n;let m=(await this.ctx.database.get("bella_sign_in",{id:String(e.userId)}))[0]?.wktimecard,c=(await this.ctx.database.get("bella_sign_in",{id:String(e.userId)}))[0]?.wktimespeed;return u=m?u>=(8+m)*60?(8+m)*60:u:u>=8*60?8*60:u,(0,l.jsxs)(l.Fragment,{children:[t,i?"正在打工":"当前没有打工",`
 打工时间: `,i?`${Math.floor(u/60)}小时${u%60}分钟`:"暂无信息",`
 可获积分: `,i?u<30?0:Math.floor(c?u*this.levelJudge(a).level:u/2*this.levelJudge(a).level):0,`
 打工总获得积分: `,s||0]})}async givepoint(e,t,a){let i=(await this.ctx.database.get("bella_sign_in",{id:String(e.userId)}))[0]?.point;return a||(a=e.userId),t?t<0&&i-Math.abs(t)<=0?(0,l.jsx)(l.Fragment,{children:"对方没有这么多积分"}):this.cfg.signin.superuser.includes(e.userId)?(await this.ctx.database.upsert("bella_sign_in",[{id:String(a.replace(/.*:/gi,"")),point:t<0?i-Math.abs(t):i+t}]),(0,l.jsxs)(l.Fragment,{children:["成功给",(0,l.jsx)("at",{id:a.replace(/.*:/gi,"")?a:a.replace(/.*:/gi,"")}),t<0?"减去":"补充",t,"点积分."]})):(0,l.jsx)(l.Fragment,{children:"没有权限!"}):(0,l.jsx)(l.Fragment,{children:"请输入有效数字"})}async shop(e){var t=5;for(await e.send((0,l.jsx)(l.Fragment,{children:`所有商品: 
 序号  名称    价格（积分）
 1. 打工加时卡 3000
 2. 打工翻倍卡 6000
 请输入序号购买，$取消购买`}));t;){let a=await e.prompt(3e4);if(a=="$"||a=="￥"||!a)return(0,l.jsx)(l.Fragment,{children:"取消购买，欢迎下次光临!"});await e.send((0,l.jsxs)(l.Fragment,{children:[await this.shopJudge(e,Number(a)),`
可以继续输入序号购买商品哦~(最多5次)`]})),t--}return(0,l.jsx)(l.Fragment,{children:'连续购买次数上限，请重新使用"积分商店"命令'})}async rankUsers(e){return(await this.ctx.database.get("bella_sign_in",{count:{$gt:0}})).sort((i,n)=>n.point-i.point).slice(0,e).map((i,n)=>(0,l.jsxs)("tr",{style:"background-color: #f2f2f2;",children:[(0,l.jsx)("td",{style:"padding: 12px; border: 1px solid #ddd;",children:n+1}),(0,l.jsx)("td",{style:"padding: 12px; border: 1px solid #ddd;",children:i.name?i.name:i.id}),(0,l.jsx)("td",{style:"padding: 12px; border: 1px solid #ddd;",children:i.point})]}))}rangePoint(e){var t=j.Random.int(0,8);let a={final_point:0,msg:"string"};switch(t){case 0:a={final_point:Math.floor(e*.2),msg:"哈哈，赌狗！"};break;case 1:a={final_point:Math.floor(e*.5),msg:"伤害减半！"};break;case 2:a={final_point:Math.floor(e*.8),msg:"不过如此"};break;case 3:a={final_point:Math.floor(e*1.2),msg:"运气不错！"};break;case 4:a={final_point:Math.floor(e*1.5),msg:"哇哦！欧皇！"};break;case 5:a={final_point:Math.floor(e*2),msg:"双倍泰裤辣！"};break;case 6:a.final_point=j.Random.bool(.5)?Math.floor(e*3):e,a.msg=a.final_point-e?"3倍！这是甚么运气！":"欸嘿，虚晃一枪!";break;case 7:a.final_point=j.Random.bool(.3)?Math.floor(e*4):e,a.msg=a.final_point-e?"太可怕了！是有什么欧皇秘诀吗":"欸嘿，虚晃一枪!";break;default:a.final_point=e,a.msg="欸嘿，虚晃一枪!";break}return a}levelJudge(e){for(let t of Q)if(e<=t.level_line)return t;return Q[Q.length-1]}getGreeting(e){let t=Ee.find(a=>e>=a.range[0]&&e<a.range[1]);return t?t.message:"你好"}async shopJudge(e,t){let a=(await this.ctx.database.get("bella_sign_in",{id:String(e.userId)}))[0]?.wktimecard,i=(await this.ctx.database.get("bella_sign_in",{id:String(e.userId)}))[0]?.wktimespeed,n=(await this.ctx.database.get("bella_sign_in",{id:String(e.userId)}))[0]?.point;if(Number(t)==1){var s=n-3e3>=0,g=a<=8;return s&&g?(await this.ctx.database.upsert("bella_sign_in",[{id:String(e.userId),point:n-3e3,wktimecard:a+1}]),"购买成功！打工时长上限+1h(上限不得超过9h)"):s?"购买次数达到上限":"积分不足!"}if(Number(t)==2){var s=n-6e3>=0;return s&&!i?(await this.ctx.database.upsert("bella_sign_in",[{id:String(e.userId),point:n-3e3,wktimespeed:!0}]),"购买成功！打工获取积分翻倍（购买后永久生效）"):i?"您已购买此商品":"积分不足!"}}},ne=[{fortuneSummary:"大吉+官运",luckyStar:"★★★★★★☆",signText:"根深蒂固，蒸蒸日上，如意吉祥，百事顺遂",unsignText:"进取富贵又如意，智达明敏扬名威，名利寿福皆此得，前途光茫好鸿图。外缘殊胜，容易得人之助力及予人好印象。"},{fortuneSummary:"吉带凶",luckyStar:"★☆☆☆☆☆☆",signText:"一盛一衰，浮沉不常，自重自处，可保平安",unsignText:"人生有盛有衰，十年河西，十年河东。不论在顺利的时候的还是在倒霉的时候，都要做到自重自处，不能因胜利而洋洋自得，也不能因失败而一蹶不振，只要这样，才能平平安安！"},{fortuneSummary:"大吉",luckyStar:"★★★★★★☆",signText:"草木逢春，枯叶沾露，稳健着实，必得人望",unsignText:"挽回家运矣春光，顺调发展财辉煌，温和笃实阴阳合，稳健顺调得人望。顺风满帆而容易有所成就，易取富贵人生。外缘殊胜，容易得人之助力及予人好印象。"},{fortuneSummary:"凶",luckyStar:"☆☆☆☆☆☆☆",signText:"薄弱无力，孤立无摇，外祥内苦，谋事难成",unsignText:"人生路上诸事不顺，自身能力之限制，经常迫于无耐。由于性格或人际关系上的问题，难遇贵人。经常一人处理所有事情，即使有天大的能力，总会遇到不能解决的问题，而这些问题会导致事业的失败。"},{fortuneSummary:"吉带凶",luckyStar:"★★☆☆☆☆☆",signText:"云遮半月，百隐风波，应自谨慎，始保平安",unsignText:"最近运势不好，有对你不利的事情（不好的事情要发生，自己办事情，说话要谨慎小心，才能避过这些。"},{fortuneSummary:"凶",luckyStar:"☆☆☆☆☆☆☆",signText:"如走夜路，前途无光，希望不大，劳而无功",unsignText:"一生就像在夜晚里走路一样，想开创新天地，却部是难以大展拳脚，可用好做好现在的事情，等待时机，主动出击容易空手而回，此命需待贵人相助方容易成功。"},{fortuneSummary:"凶带吉",luckyStar:"★★★☆☆☆☆",signText:"半凶半吉，浮沉多端，始凶终吉，能保成功",unsignText:"所求之事，是吉凶参半。所要经历的，既有非你所愿、无法承受之痛苦，也有甘之如饴、顺风顺水之运气。无法如预期的稳定，不确定的因素对其本身影响很大。要老老实实接受磨难的考验，之后成功就会不期而遇。"},{fortuneSummary:"吉带凶",luckyStar:"★☆☆☆☆☆☆",signText:"吉凶互见，一成一败，凶中有吉，吉中有凶",unsignText:"一生并不顺利，在顺境时，记得要居安思危；在逆境时千万不要气馁，以您的性格，可以做到逆境中发现机会，从危机中发现生机。"},{fortuneSummary:"大吉+才艺",luckyStar:"★★★★★★☆",signText:"美化丰实，鹤立鸡群，名利俱全，繁荣富贵",unsignText:"有德且智德望高，堪为顾问得仁和，名利双收天赋富，威望荣达世间豪。"},{fortuneSummary:"凶",luckyStar:"★☆☆☆☆☆☆",signText:"成功虽早，慎防空亏，内外不合，障碍重重",unsignText:"事业初得成功，不能过度放松警惕，不要将积累的资本挥霍一空。如果团队里人心不能合到一起，今后做起事来也会遇到很多的阻碍。"},{fortuneSummary:"大吉+财运+官运",luckyStar:"★★★★★★☆",signText:"天赋吉运，德望兼备，继续努力，前途无限",unsignText:"德望高大名誉振，才谋健全财源进，富贵荣华福禄至，前途洋洋得意真。"},{fortuneSummary:"中吉+财运",luckyStar:"★★★★☆☆☆",signText:"池中之龙，风云际会，一跃上天，成功可望",unsignText:"侥倖所得贵人扶，善捉机会有财富，认真努力向前程，家门隆昌得富荣。与人合伙比之独营好得多，若自己独营商则中途易受挫折。"},{fortuneSummary:"中吉",luckyStar:"★★★★★☆☆",signText:"排除万难，有贵人助，把握时机，可得成功",unsignText:"突破万难权威高，刚性固执如英豪，须事谨慎守和平，可得大功奏业成。很勤勉求上进，又很有耐力，在技术界或艺能界，是最可能成功之数也。但此数因少得人和，而略感孤独些。"},{fortuneSummary:"大吉+财运",luckyStar:"★★★★★★☆",signText:"谦恭做事，必得人和，大事成就，一定兴隆",unsignText:"福寿拱照德望高，财子寿全又温和，慈祥好善可恭敬，富贵繁荣得惠泽。财源特佳金钱有餘，离出生之地而往大都市求谋必得更发达。外缘殊胜，容易得人之助力及予人好印象。"},{fortuneSummary:"大吉",luckyStar:"★★★★★★☆",signText:"思虑周详，计划力行，不失先机，可望成功",unsignText:"兴家立业意志强，智虑周密名望扬，志操坚固信用重，一身才艺建基业。"},{fortuneSummary:"吉带凶",luckyStar:"★★☆☆☆☆☆",signText:"得而复失，枉费心机，守成无贪，可保安稳",unsignText:"一生艰难辛苦，如波浪之重叠不绝，终身多受挫折而致病弱，刑罚，孤独夭寿之凶兆，若能及早修行善德，脱离凡俗而隐退者，尚可保小康之清福，则化凶为吉也。"},{fortuneSummary:"大吉+官运",luckyStar:"★★★★★★☆",signText:"专心经营，善用智慧，霜雪梅花，春来怒放",unsignText:"明月光照乐依依，俟如梅花待放时，兴家立业名利全，各自独立有权威。男带此数，需要加强节制力，可免受桃花困扰。女则因事业雄心万丈，多晚婚。"},{fortuneSummary:"吉带凶",luckyStar:"★★☆☆☆☆☆",signText:"一胜一衰，浮沉不定，知难而退，自获天佑",unsignText:"谨慎保安勿自骄，智谋胆略得显晓，知难而退获天佑，妄进逞强败涂地。"},{fortuneSummary:"大吉+财运",luckyStar:"★★★★★★☆",signText:"锦绣前程，须靠自力，多用智谋，能奏大功",unsignText:"家门余庆福无疆，子孙繁荣富贵强，白手成家立大业，财源广进智谋全。营商的话还是独营的好，与人合伙久之厌烦不耐。少年读书需用心，舟至桥头直自然。"},{fortuneSummary:"凶",luckyStar:"★★☆☆☆☆☆",signText:"波澜起伏，千变万化，凌驾万难，必可成功",unsignText:"局势不稳定，变化极多，任何困难都难不到你，最终您将一定会成功，且成就不小，关键是您能否在多变的艰难环境下坚持到最后。"},{fortuneSummary:"中吉",luckyStar:"★★★★☆☆☆",signText:"安乐自来，自然吉祥，力行不懈，终必成功",unsignText:"志高力微乏实行，妄谋无计事难成，晚年安宁静逸祥，享得天赋增吉相。"},{fortuneSummary:"大吉",luckyStar:"★★★★★★☆",signText:"时来运转，事事如意，功成名就，富贵自来",unsignText:"利路享通万事成，和畅逍达四海明，家运隆盛招富贵，万商云集得繁荣。"},{fortuneSummary:"凶",luckyStar:"★☆☆☆☆☆☆",signText:"烦闷懊恼，事事难展，自防灾祸，始免困境",unsignText:"受到各种事情的烦扰，不能专心做想做的事情。首要问题是处理好现时的各种烦事，这样可以避免这些小事埋下的祸害，才不导致自已陷入困境。"},{fortuneSummary:"大吉+财运+才艺",luckyStar:"★★★★★★☆",signText:"不可意气，善用智慧，如能慎始，必可昌隆",unsignText:"家门隆昌精神爽，博得名利星月朗，权威智谋极周全，君是天下富贵翁。具有此数之人，男则勇敢果断，而女则美貌如仙子，有风流不羁不顾时局大体倾向，若修养不够或抑制力不强，往往因桃色事件惹来麻烦。"},{fortuneSummary:"吉",luckyStar:"★★★★☆☆☆",signText:"吉运自来，能享盛名，把握机会，必获成功",unsignText:"人生路上机会众多，只要把握好一次机会，将会改写您的人生。"},{fortuneSummary:"大吉+官运",luckyStar:"★★★★★★☆",signText:"富贵荣华实可当，光明荣达好儿郎，家门隆昌福万千，世代子孙个个贤。",unsignText:"因异性而引起之纠纷困扰，失利特多，而且一生常遇逆境之折磨。家庭和顺则万事可成。智能超人贯彻大志，富贵无比，不甘寂寞，叱吒风云之大吉数。切忌牢骚、贪心、欲望太多、永不知足影响前程。"},{fortuneSummary:"中吉+才艺",luckyStar:"★★★★★☆☆",signText:"经商做事，顺利昌隆，如能慎始，百事亨通",unsignText:"有志竟成事皆通，智谋发展有威望，过刚遭难咸柔德，博得名利大成功。很勤勉求上进，又很有耐力，在技术界或艺能界，是最可能成功之数也。但此数因少得人和，而略感孤独些。"},{fortuneSummary:"大吉+财运",luckyStar:"★★★★★★☆",signText:"草木逢春，雨过天晴，渡过难关，即获成功",unsignText:"先见机明察佳期，意志坚固好运时，功名利达福禄全，一世荣隆乐绵绵。"},{fortuneSummary:"凶",luckyStar:"☆☆☆☆☆☆☆",signText:"鱼临旱地，难逃恶运，此数大凶，不如更名",unsignText:"现时处境就如鱼在旱地上一样，面临大的恶运，是大凶之兆，此处的“不如更名”从现代角度来看，并非全指改名，而更多是指要改变现在的做人处事方式，才能摆脱大凶的来临。"},{fortuneSummary:"中吉+才艺",luckyStar:"★★★★☆☆☆",signText:"逢凶化吉，吉人天相，风条雨顺，生意兴隆",unsignText:"权威显达得众望，忠实热诚运极旺，大德奏功无难事，终得富荣乐千锺。"},{fortuneSummary:"吉带凶",luckyStar:"★☆☆☆☆☆☆",signText:"事业不专，十九不成，专心进取，可望成功",unsignText:"对事业不专注者，很难有所成就，有了进取心，对事业专心致志才有成功的希望！"},{fortuneSummary:"中吉",luckyStar:"★★★★★☆☆",signText:"努力发达，贯彻志望，不忘进退，成功可期",unsignText:"意志坚刚善恶明，富进取心求和平，忍耐克己如心意，前难后成可安然。很勤勉求上进，又很有耐力，在技术界或艺能界，是最可能成功之数也。但此数因少得人和，而略感孤独些。"},{fortuneSummary:"吉带凶",luckyStar:"★★★☆☆☆☆",signText:"吉凶参半，惟赖勇气，贯彻力行，始可成功",unsignText:"人生之路吉、凶各半，有好有坏；要想改变这种不利局面，唯有依赖你的勇气和不屈服的执行力，一步步向前，人生才会更光明，更成功。"},{fortuneSummary:"凶",luckyStar:"☆☆☆☆☆☆☆",signText:"利害混集，凶多吉少，得而复失，难以安顺",unsignText:"有好也有坏，但恶运占多，得到的东西容易失去，导致生活难以安定。此运告诫：少接触投机类活动，否则容易一无所有。"},{fortuneSummary:"大吉+官运",luckyStar:"★★★★★★☆",signText:"旭日升天，名显四方，渐次进展，终成大业",unsignText:"旭日东昇势壮富，贯彻大业万事胜，终至荣达功名显，猛虎添翼势声强。具有此数之人，男多勇敢果断，女多貌若天仙，有风流不羁不顾时局大体倾向，若修养不够或抑制力不强，往往因桃色事件惹来麻烦。"},{fortuneSummary:"吉带凶",luckyStar:"★★☆☆☆☆☆",signText:"先苦后甘，先甘后苦，如能守成，不致失败",unsignText:"不能一生都有好运，但也不全是恶运，好坏总会各占一半，当好运来时，记得积谷防饥。"},{fortuneSummary:"吉带凶",luckyStar:"★★☆☆☆☆☆",signText:"有得有失，华而不实，须防劫财，始保平安",unsignText:"金钱上有损失，切忌花枝招展，外表的华丽可能为您带来小人的攻击。"},{fortuneSummary:"凶",luckyStar:"☆☆☆☆☆☆☆",signText:"此数大凶，破产之象，宜速改变，以避厄运",unsignText:"不祥之兆，财产有可能一夜尽失，应尽快改变现在的处事和投资方式，避免厄运。"},{fortuneSummary:"凶带吉",luckyStar:"★★★☆☆☆☆",signText:"名虽可得，利则难获，艺界发展，可望成功",unsignText:"可能有名气，却未能用这名气带来财运，可考虑从事娱乐或艺术来业，把名气转化成事业中一部分。"},{fortuneSummary:"凶",luckyStar:"☆☆☆☆☆☆☆",signText:"动摇不安，常陷逆境，不得时运，难得利润",unsignText:"坚持是您现时最缺乏的品质，由于没有坚定的目标，会使您陷入相当困苦的境地。而当获得成功时，却发现时不与我，外部环境已使得竞争激烈导致利润下降。"},{fortuneSummary:"凶",luckyStar:"☆☆☆☆☆☆☆",signText:"灾难不绝，难望成功，此数大凶，不如更名",unsignText:"人生路上遇到相当多困难，特别在追求事业的路上，什么事情很难成功。此处的“不如更名”从现代角度来看，并非全指改名，而更多是指要改变现在的做人处事方式，方能扭转现在的运数。"},{fortuneSummary:"凶",luckyStar:"★☆☆☆☆☆☆",signText:"惨淡经营，难免贫困，此数不吉，最好改名",unsignText:"事业不济，入不敷出，坚持一个不好的行业，不会带来事业的腾飞，最好适时转行。"},{fortuneSummary:"吉带凶",luckyStar:"☆☆☆☆☆☆☆",signText:"吉中带凶，欲速不达，进不如守，可保安祥",unsignText:"在好运中含藏凶兆，不能操之过急，不可冒然急进，前进得太快，容易出现危险，还不如坚守现在的阵地。"},{fortuneSummary:"凶",luckyStar:"★★☆☆☆☆☆",signText:"遇吉则吉，遇凶则凶，惟靠谨慎，逢凶化吉",unsignText:"遇到好的的人或事自然就会有好的事情发生或是有好的事降临，相反的遇到坏人坏事就会有糟糕的事情发生讨厌的人来了，想要不被厄运控制，打破坏人坏事的困扰，就只有小心谨慎，有了这种心思方可逢凶化吉，就是遇到坏的也可以变成好的。"},{fortuneSummary:"凶带吉",luckyStar:"★★☆☆☆☆☆",signText:"一成一败，一盛一衰，惟靠谨慎，可守成功",unsignText:"成 败， 盛 衰这都是相对的，有成功就会有失败，有强盛就会有衰落这都只是时间问题，只有坚定的信念对能获得一定的成功但并不能 够永久。"},{fortuneSummary:"大吉+官运+财运+才艺",luckyStar:"★★★★★★★",signText:"如龙得云，青云直上，智谋奋进，才略奏功",unsignText:"欲望难足希望高，计谋成功财力豪，猜疑嫉妒性自改，如龙乘云势运开。智能超人贯彻大志，富贵无比，不甘寂寞，叱吒风云之大吉数，但容易发生牢骚及贪心、欲望太多而永不知足，为其缺点。切忌沉迷投机，可免贻误前程。"},{fortuneSummary:"中吉",luckyStar:"★★★★☆☆☆",signText:"中吉之数，进退保守，生意安稳，成就可期",unsignText:"温和平安艺才高，努力前途福运来，文笔奇绝仁德高，务实稳健掌门人。"},{fortuneSummary:"凶",luckyStar:"★☆☆☆☆☆☆",signText:"黑夜漫长，进退维谷，内外不合，信用缺乏",unsignText:"成功之路相当漫长，经验遇到二难选择，在处理问题上，请注意个人信用，否则容易导致内部矛盾和外部人员的质疑。"},{fortuneSummary:"凶",luckyStar:"☆☆☆☆☆☆☆",signText:"坎坷前途，苦难折磨，非有毅力，难望成功",unsignText:"为人独断独行，事事自行作主解决，鲜有求助他人。而这份独立个性，正正就是吸引异性的特质。但其实心底里，却是渴望有人可让他/ 她依赖。"},{fortuneSummary:"凶",luckyStar:"☆☆☆☆☆☆☆",signText:"见异思迁，十九不成，徒劳无功，不如更名",unsignText:"见异思迁，使自已做的事情无一成功，开始全情投入，到后面却不能坚持，事情总是在这种情况下失败。要改变心态和做事方式，看准方向就坚持到底，方可成功。"},{fortuneSummary:"中吉",luckyStar:"★★★★★☆☆",signText:"专心经营，和气致祥，排除万难，必获成功",unsignText:"刚毅果断除万难，独立权威志气安，内外和好兼柔性，温和养德耀吉星。很勤勉求上进，又很有耐力，在技术界或艺能界，是最可能成功之数也。但此数因少得人和，而略感孤独些。"},{fortuneSummary:"凶",luckyStar:"☆☆☆☆☆☆☆",signText:"波澜重迭，常陷穷困，动不如静，有才无命",unsignText:"越是对命运的抗争，越是使自已陷入困境，常常想靠自已改变命运，却一次次使自已的生活走入穷困，还不如听天由命，安于本份。"},{fortuneSummary:"凶",luckyStar:"★☆☆☆☆☆☆",signText:"坎坷不平，艰难重重，若无耐心，难望有成",unsignText:"人生过程中，您会遇到非常多的困难，有一坡未平一坡又起之势，在面对这些坎坷时，只要有耐心和毅力，最终都会获得成功的，否则容易一事无成。"},{fortuneSummary:"吉带凶",luckyStar:"★★☆☆☆☆☆",signText:"雨夜之花，外祥内苦，忍耐自重，转凶为吉",unsignText:"下雨对于花来说，是件好事，但是雨夜，像征着孤独、恐惧、所以，看似吉祥的一片，实是内心承受着煎熬。如果坚强的忍耐过雨夜的敲打，熬过寂寞与恐惧，待明晨又是个艳阳天。"},{fortuneSummary:"凶",luckyStar:"★☆☆☆☆☆☆",signText:"黑暗无光，心迷意乱，出尔反尔，难定方针",unsignText:"黑暗无光之凶运数。不仅事事不能如意，加以心迷意乱，难决定方针，出尔反尔，徒蒙损失，虽获成就。如能就初衷贯彻，或有小康之望。"},{fortuneSummary:"大吉",luckyStar:"★★★★★☆☆",signText:"万物化育，繁荣之象，专心一意，始能成功",unsignText:"富贵荣达得显甯，子孙繁茂福绵绵，一身平安富益寿，福禄双全享千锺。"},{fortuneSummary:"吉带凶",luckyStar:"★★☆☆☆☆☆",signText:"外观隆昌，内隐祸患，克服难关，开出泰运",unsignText:"外人看来很风光，而自已内部隐藏的危机，只要解决内部的危机，人生将会过得风风火火。"},{fortuneSummary:"凶",luckyStar:"★☆☆☆☆☆☆",signText:"吉凶参半，得失相伴，投机取巧，如赛一样",unsignText:"没有做太多对他人有价值的事情，导到一生来所做的事有如博彩，投机取巧，来得快也去得快，没有多少剩余，命运也在输赢之间转变。"},{fortuneSummary:"凶",luckyStar:"☆☆☆☆☆☆☆",signText:"乌云遮月，暗淡无光，空费心力，徒劳无功",unsignText:"有特强的第六灵感，性格率直无机心，深得朋辈爱戴。感情路上多采多姿。做事喜好凭个人直觉及预感做决定。"},{fortuneSummary:"中吉+官运",luckyStar:"★★★★★☆☆",signText:"杨柳遇春，绿叶发枝，冲破难关，一举成名",unsignText:"新生泰运顺行舟，排除万难总无忧，成功繁荣四海明，荣华富贵好前程。"},{fortuneSummary:"凶",luckyStar:"★☆☆☆☆☆☆",signText:"虽用心计，事难遂愿，贪功好进，必招失败",unsignText:"无论在社会中有什么地位都会被认定为最低层的人。你深深体会到社会的不公平一面，为了替贫民谋幸福，你会想尽办法改善社会的状况，尤其是如何改善最低下层平民的生活。"},{fortuneSummary:"凶",luckyStar:"☆☆☆☆☆☆☆",signText:"虽抱奇才，有才无命，独营无力，财利无望",unsignText:"你虽然很有才，但是却没这个命（时运；事业上自己单干，是不会有什么好发展的，财利难望意思是说发财致富这个愿望是很难实现的。"},{fortuneSummary:"大吉",luckyStar:"★★★★★★☆",signText:"大展鸿图，信用得固，无远弗届，可获成功",unsignText:"地开泰万事成，身体康安亦富荣，否泰名誉兼享福，一生无忧乐绵长。顺风满帆而容易有所成就，易取富贵人生。"},{fortuneSummary:"凶",luckyStar:"★★☆☆☆☆☆",signText:"根基不固，摇摇欲坠，一盛一衰，劳而无功",unsignText:"与人合伙比之独营好得多，若自己独营商则中途易受挫折。"},{fortuneSummary:"凶",luckyStar:"★☆☆☆☆☆☆",signText:"事与愿违，终难成功，欲速不达，有始有终",unsignText:"做事不能三分钟热度，要有始有终。急于求成，将会事与愿违，大事难成。"},{fortuneSummary:"凶",luckyStar:"★☆☆☆☆☆☆",signText:"忍得苦难，必有后福，是成是败，惟靠坚毅",unsignText:"只要有坚毅的决心，肯下功夫肯吃苦，多么难的事也能做成功。成功了，福也是必然相随。"},{fortuneSummary:"凶",luckyStar:"★☆☆☆☆☆☆",signText:"利不及费，坐食山空，如无智谋，难望成功",unsignText:"入不敷出，即使有很好的基础，如果没有智谋或用人不善，难以发扬光大，最终可能败掉一切。"},{fortuneSummary:"凶",luckyStar:"★★☆☆☆☆☆",signText:"遇事犹疑，难望成事，大刀阔斧，始可有成",unsignText:"做事犹豫、不果断，很难做成功；变得果断勇敢了，才有希望。"},{fortuneSummary:"大吉+官运",luckyStar:"★★★★★★☆",signText:"此数大吉，名利双收，渐进向上，大业成就",unsignText:"智勇得志意气新，建立声誉事业兴，终到富贵福禄奏，为人领导德望高。顺风满帆而容易有所成就，易取富贵人生。"},{fortuneSummary:"中吉",luckyStar:"★★★★★☆☆",signText:"万宝云集，天降幸运，立志奋发，可成大功",unsignText:"安稳余庆福禄开，盛大幸福天赐来，内含衰兆应谨慎，注意品行福乐享。名誉良好，信用亦佳，步步高升。"},{fortuneSummary:"大吉+官运+财运",luckyStar:"★★★★★★☆",signText:"能获众望，成就大业，名利双收，盟主四方",unsignText:"贵人得助天乙扶，为人之上有财富，众望所归事业成，不可贪色保安宁。名誉良好，信用亦佳，步步高升。外缘殊胜，容易得人之助力及予人好印象。"},{fortuneSummary:"中吉",luckyStar:"★★★★☆☆☆",signText:"努力经营，时来运转，旷野枯草，春来花开",unsignText:"寒雪青松性刚强，一度祸难过灾殃，将此发达利亨通，晚景繁荣福无疆。"},{fortuneSummary:"大吉+官运+才艺",luckyStar:"★★★★★★☆",signText:"天赋吉运，能得人望，善用智慧，必获成功",unsignText:"智略超群博学多，善处事务亦忍和，功业成就得富荣，艺才相身乐千锺。外缘殊胜，容易得人之助力及予人好印象。具有此数之人，男多勇敢果断，女多貌若天仙，有风流不羁不顾时局大体倾向，若修养不够或抑制力不强，往往因桃色事件惹来麻烦。"},{fortuneSummary:"大吉",luckyStar:"★★★★★☆☆",signText:"有贵人助，可成大业，虽遇不幸，浮沉不大",unsignText:"开花结子衣食足，大业奏功可庆祝，子孙繁荣多快乐，一家圆满庆有馀。"},{fortuneSummary:"吉带凶",luckyStar:"★☆☆☆☆☆☆",signText:"盛衰参半，外祥内苦，先吉后凶，先凶后吉",unsignText:"一生好运与恶运都会让您遇上，当外表风光时，可能您的内心正受到非常大的困苦。前半生可能过得很苦，但后半生会出现转运，生活变得很美好；也有可能是前半生过得很风光，而后半生却很潦倒。"},{fortuneSummary:"大吉",luckyStar:"★★★★★★☆",signText:"阴阳和合，生意欣荣，名利双收，后福重重",unsignText:"福禄寿长阴阳和，心身健全是英豪，名利双收富荣达，乃是世上福德人。财源特佳金钱有餘，离出生之地而往大都市求谋必得更发达。"},{fortuneSummary:"凶",luckyStar:"☆☆☆☆☆☆☆",signText:"虽倾全力，难望成功，此数大凶，最好改名",unsignText:"即使全力以赴，却没有取得成功。导致失败的原因是现时的待人处事方式有问题，要改变这个现状，要自我反省，改变一些令人厌恶的恶习，方可取得成功。"},{fortuneSummary:"凶",luckyStar:"★☆☆☆☆☆☆",signText:"秋草逢霜，怀才不遇，忧愁怨苦，事不如意",unsignText:"秋天的枯草已经赶上了冰冷的寒霜，而我胸怀才学但生不逢时，难以施展，人生尽是这些忧愁、埋怨、苦衷，人生之事都不如意。"},{fortuneSummary:"中吉",luckyStar:"★★★★★☆☆",signText:"天时地利，再得人格，讲信修睦，即可成功",unsignText:"资性英敏有奇能，怪癖不和害前程，修身涵养与仁和，奏功获得大鸿图。需要注重个人私生活，可免因桃色韵事贻误前程。"},{fortuneSummary:"凶",luckyStar:"★☆☆☆☆☆☆",signText:"智高志大，历尽艰难，焦心忧劳，进退两难",unsignText:"即使有宏图大志并且能力超人，但全靠白手起家，需要突破社会重重规则，劳劳碌碌，最后可能处于进退两难的选择当中，不过，由于个人毅力与才气，只要坚持，最后终必成功。"}],ie=G(ee()),Fe=class{static{E(this,"jryspro")}constructor(){}async getJrys(e,t){let a=ie.default.createHash("md5"),i=ie.default.createHash("sha256"),n=new Date().setHours(0,0,0,0),s;if(!isNaN(Number(e)))s=e;else if(e){i.update(e+String(n));let u=i.digest("hex");s=Number(parseInt(u,16))%1000000001}else{a.update("Default Jrys"+String(n));let u=a.digest("hex");s=parseInt(u,16)%1000000001}var g=n/1e5*s%1000001*2333%ne.length;return t?{jrys:g,etime:n/1e5}:ne[g]}},H=(C(),_(T)),re=new Map,De=class{static{E(this,"biliLinkAnalysis")}ctx;constructor(e,t){this.ctx=e,this.ctx.on("message",async a=>{let i=/(((https?:\/\/)?(www\.|m\.)?bilibili\.com\/(video\/)?)?((av|AV)(\d+)|((BV|bv)1[1-9A-NP-Za-km-z]{9})))/,n=/((https?:\/\/)?(b23\.tv|bili2233\.cn)\/(((av|ep|ss)\d+)|BV1[1-9A-NP-Za-km-z]{9}|\S{6,7}))/,s=/(https?:\/\/)?(www\.)?bilibili\.com\/video\//,g=/(https?:\/\/)?(b23\.tv|bili2233\.cn)/,u=a.content.toString(),m,c=[/<img.*src=.*\/>/gi,/<audio.*url=.*\/>/gi,/<file.*url=.*\/>/gi,/<image.*url=.*\/>/gi];if(!this.checkStringAgainstRegexes(a.content,c))for(;((m=i.exec(u))!==null||(m=n.exec(u))!==null)&&m;){let d=m[0],D=a.event.channel.id.toString(),S=re.get(D)||new Set;try{let R=/(((av|ep|ss)\d+)|BV1[1-9A-NP-Za-km-z]{9}|\S{6,7})/,h=await this.analysisUrl(d.match(s)||d.match(g)?d:d.match(R)?"https://b23.tv/"+d:"https://bilibili.com/video/"+d,this.ctx),A=h.videoData.aid.toString();if(S.has(A)){a.send("该链接已被解析……");break}S.add(A),re.set(D,S);let O=`${h.videoData.title}(https://bilibili.com/video/av${h.videoData.aid} )`,J=h.videoData.pic,xe=h.videoData.desc?h.videoData.desc.length>t?`${h.videoData.desc.slice(0,t-5)}...more`:h.videoData.desc:"这个作者很懒，没有写简介";await a.send((0,H.jsxs)(H.Fragment,{children:[O,(0,H.jsx)("image",{url:J}),xe]}));break}catch{a.send("视频解析发生错误……");break}}})}async analysisUrl(e,t){let a=/<script>window\.__INITIAL_STATE__=(.*);\(function\(\)\{var s;\(s=document.currentScript\|\|document.scripts\[document.scripts.length-1\]\)\.parentNode\.removeChild\(s\);\}\(\)\);<\/script>/gi;return new Promise(async(i,n)=>{try{let s=await t.http.axios(e),g=JSON.parse(s.data.toString().match(a)[0].replace("<script>window.__INITIAL_STATE__=","").replace(";(function(){var s;(s=document.currentScript||document.scripts[document.scripts.length-1]).parentNode.removeChild(s);}());<\/script>",""));return i(g),g}catch(s){throw n(s),s}})}checkStringAgainstRegexes(e,t){for(let a of t)if(a.test(e))return!0;return!1}},ce={};se(ce,{Config:()=>Ce,apply:()=>me,name:()=>Ae});var o=(M(),_(k)),r=(C(),_(T)),Ae="bellabot-interaction",Be="https://cdn.jsdelivr.net/gh/Twiyin0/cdnsource/json/result_",f="https://cdn.jsdelivr.net/gh/Twiyin0/cdnsource/img/bella/",le="https://cdn.jsdelivr.net/gh/Twiyin0/cdnsource/img/bella//mp3/",Ce=o.Schema.object({"bellabot-interaction":o.Schema.boolean().default(!0)});function me(e,t){if(t["bellabot-interaction"]){var a=["%E8%80%81%E5%A9%86%E8%80%81%E5%A9%86%E8%80%81%E5%A9%86.mp3","%E8%80%81%E5%85%AC%E8%80%81%E5%85%AC%E8%80%81%E5%85%AC.mp3","%E7%94%B5%E4%BB%96%E7%89%9B%E5%AD%90%EF%BC%81.mp3"],i=["{766E8262-D758-4c73-8B3D-7642AC7CCAD8}.png","{766E8262-D758-4c73-8B3D-7642AC7CCAD8}.png","2892472967c9e1ae44127ae7c6adc53c.jpg","02dfd6f4be79aabb050e8762ba085186.jpg","0d67b7cc429ef74c2300459a0fef18b6.png","-2a7d27ee401a0027.jpg","-2e240708f9260f08.jpg","-5f067349ef15d73a.jpg","-6da24123689ca9b7.jpg","-33f06a0374b702.jpg","-75c9290aae88b9f7.jpg","-337681a405cbe9f4.jpg"];e.command("一图 <type>","涩图发送器！！").alias("img").usage("img <type> type=0,1,2 || 横屏，竖屏，其他").action(async(n,s)=>{let g=["acc","ver","other","横屏","竖屏","其他"],u=g[+"awa"%3]!=null?g[+"awa"%3]:g.indexOf(s)!=-1?g[g.indexOf(s)%3]:void 0;try{u=u||g[o.Random.int(0,2)];let m=await e.http.get(Be+u+".json"),c=o.Random.pick(m),d=c.illust.meta_pages;return(0,r.jsxs)(r.Fragment,{children:["Title: ",c.illust.title,`
 PID: `,c.illust.id,`
 画师: `,c.illust.user.name,"(",c.illust.user.id,")",(0,r.jsx)("image",{url:(d[0]?o.Random.pick(d).image_urls.medium:c.illust.image_urls.medium).replace("i.pximg.net","i.pixiv.re")}),"原图Url: ",(d[0]?o.Random.pick(d).image_urls.original:c.illust.meta_single_page.original_image_url).replace("i.pximg.net","i.pixiv.re")]})}catch{return(0,r.jsx)(r.Fragment,{children:"无法连接至jsdelivr...."})}}),e.command("一言","随机一言").action(async()=>{let s=(await e.http.get("https://cdn.jsdelivr.net/gh/Twiyin0/cdnsource/asign.txt")).toString().split(`
`);return(0,r.jsx)(r.Fragment,{children:o.Random.pick(s)})}),e.command("猫猫","随机一只猫猫或者不是猫猫").action(async()=>{let n=await e.http.get("https://cdn.jsdelivr.net/gh/Twiyin0/cdnsource/img/neko/filedata.json");return(0,r.jsx)("image",{url:"https://cdn.jsdelivr.net/gh/Twiyin0/cdnsource/img/neko/"+o.Random.pick(n.data.filenames)})}),e.command("贝拉","召唤贝拉").action(async()=>{var n=["怎么了嘛","应召而来","叫贝拉什么事啦","嗯嗯，好，知道了","啊！？","你干嘛~哎哟~","贝拉不在","麻麻生的","好啦好啦，不要再叫啦"],s=["-1fad13026497291d.jpg","-4d1f6de7eb64ec06.jpg","-5c0b7575e1db2ae5.jpg","-6da24123689ca9b7.jpg","-7826353a22e1ca44.jpg","7c06323573c03d0b.jpg","-4aba7388ceba67c3.jpg","-5a045587fc2adaf2.jpg","QQ%E5%9B%BE%E7%89%8720230414130134.jpg","QQ%E5%9B%BE%E7%89%8720230414130154.jpg","QQ%E5%9B%BE%E7%89%8720230414130228.jpg","QQ%E5%9B%BE%E7%89%8720210920225332.jpg"],g=[(0,r.jsxs)(r.Fragment,{children:["在下贝拉，阁下吃了嘛，没吃吃我一拳！！",(0,r.jsx)("image",{url:f+"1672677378122(1).jpg"})]}),(0,r.jsx)("image",{url:f+"34a4284443a9822653b1bfe4cf82b9014b90eb60.jpg"}),(0,r.jsxs)(r.Fragment,{children:["你把我召唤出来了, 要v我50才能回去!",(0,r.jsx)("image",{url:f+"1672677367060.png"})]}),(0,r.jsxs)(r.Fragment,{children:["嗨~是想我了么w",(0,r.jsx)("image",{url:f+"36500a1b36b5eaf0edca53f3078088cba372e565.jpg"})]}),(0,r.jsxs)(r.Fragment,{children:["是有什么事嘛",(0,r.jsx)("image",{url:f+"4e76128258b9f4cad44531b2ee2cffc5fadff6b0.jpg"})]}),(0,r.jsxs)(r.Fragment,{children:["美好的一天，要从美妙的邂逅开始~",(0,r.jsx)("image",{url:f+"4f37cc50a217fa04.jpg"})]})];return(0,r.jsx)(r.Fragment,{children:o.Random.bool(.5)?o.Random.pick(g):(0,r.jsxs)(r.Fragment,{children:[o.Random.pick(n),(0,r.jsx)("image",{url:f+o.Random.pick(s)})]})})}),e.on("message",async n=>{if(n.content.includes("老婆")&&n.send(o.Random.bool(.5)?(0,r.jsx)("audio",{url:le+o.Random.pick(c)}):(0,r.jsx)("image",{url:f+o.Random.pick(d)})),n.content.match(/(色色|瑟瑟|涩涩)/g)){var s=["眼泪滴，不掉；涩涩滴，不要！","涩涩！","涩涩打咩~","打咩嘚嘶，牡蛎嘚嘶!","不可以涩涩！"],g=["-1b7dbb6fe80d42e.gif","-5a045587fc2adaf2.jpg","-5ba09fe53cbda336.jpg","-5cfb038737fd80ce.jpg","-7c898f9ca53577ae.jpg","-23bf3edcef075ffa.jpg","-35d44ad8bb0800e.jpg","-41001f90a7ae7835.jpg","5f608987b023f5cc.jpg","62137efd6809115c6b85bb697cee49b3.gif"];n.send((0,r.jsxs)(r.Fragment,{children:[o.Random.pick(s),(0,r.jsx)("image",{url:f+o.Random.pick(g)})]}))}if(n.content.includes("晚安")){var u=["晚安哦","一起睡觉觉~","快睡觉觉啦~","晚安~","晚安安~"],m=["-2550caef3f27792f.jpg","-5148d3074c517a8d.jpg","2e28fdeb0fc2796a.jpg","-cc39ae6ac099f09.jpg","6dea8c551aad32a4.jpg","632696ab894d5e61.gif","1672677355066.png"];n.send((0,r.jsxs)(r.Fragment,{children:[o.Random.pick(u),(0,r.jsx)("image",{url:f+o.Random.pick(m)})]}))}if(n.content.includes("老婆")){var c=["%E8%80%81%E5%A9%86%E8%80%81%E5%A9%86%E8%80%81%E5%A9%86.mp3","%E8%80%81%E5%85%AC%E8%80%81%E5%85%AC%E8%80%81%E5%85%AC.mp3","%E7%94%B5%E4%BB%96%E7%89%9B%E5%AD%90%EF%BC%81.mp3"],d=["{766E8262-D758-4c73-8B3D-7642AC7CCAD8}.png","{766E8262-D758-4c73-8B3D-7642AC7CCAD8}.png","2892472967c9e1ae44127ae7c6adc53c.jpg","02dfd6f4be79aabb050e8762ba085186.jpg","0d67b7cc429ef74c2300459a0fef18b6.png","-2a7d27ee401a0027.jpg","-2e240708f9260f08.jpg","-5f067349ef15d73a.jpg","-6da24123689ca9b7.jpg","-33f06a0374b702.jpg","-75c9290aae88b9f7.jpg","-337681a405cbe9f4.jpg"];return o.Random.bool(.5)?(0,r.jsx)("audio",{url:le+o.Random.pick(c)}):(0,r.jsx)("image",{url:f+o.Random.pick(d)})}n.content.includes("受不了")&&(n.sendQueued("受不了那就攻起来",800),n.sendQueued("哪有压迫,哪就有反抗ᕙ(`▿´)ᕗ",300)),n.content.includes("娘子")&&n.send("啊哈~"),n.content.includes("贝拉唱歌")&&n.send((0,r.jsxs)("random",{children:[(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("audio",{url:"https://cdn.jsdelivr.net/gh/Twiyin0/cdnsource/img/bella/mp3/%E3%80%8A%E7%88%B1%E6%B2%B3%E3%80%8B.mp3"})}),(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("audio",{url:"https://cdn.jsdelivr.net/gh/Twiyin0/cdnsource/img/bella/mp3/%E5%BD%93%E5%BD%93%E5%BD%93%E5%BD%93%E5%BD%93%E5%BD%93%E5%BD%93~.mp3"})}),(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("audio",{url:"https://cdn.jsdelivr.net/gh/Twiyin0/cdnsource/img/bella/mp3/DJ%EF%BC%8C%E6%8D%A2%E6%AD%8C.mp3"})}),(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("audio",{url:"https://cdn.jsdelivr.net/gh/Twiyin0/cdnsource/img/bella/mp3/mnk%E9%A6%96%E6%92%AD%E7%94%9F%E6%97%A5%E6%AD%8C.mp3"})})]})),n.content.match(/^(早|早上好)$/gi)&&n.send((0,r.jsxs)("random",{children:[(0,r.jsxs)(r.Fragment,{children:["早上好~",(0,r.jsx)("image",{url:f+"196653675F85648FE2B20C8F9495DB9D_0.jpg"})]}),(0,r.jsxs)(r.Fragment,{children:["早喵~",(0,r.jsx)("image",{url:f+"-1fad13026497291d.jpg"})]}),(0,r.jsxs)(r.Fragment,{children:["早早~",(0,r.jsx)("image",{url:f+"1672551585310.png"})]}),(0,r.jsxs)(r.Fragment,{children:["美好的一天要从美妙的邂逅开始~",(0,r.jsx)("image",{url:f+"-40f30fa297e3a671.jpg"})]}),(0,r.jsxs)(r.Fragment,{children:["早啊~昨晚睡得舒服嘛",(0,r.jsx)("image",{url:f+"-557164c9f74b0b1a.jpg"})]}),(0,r.jsxs)(r.Fragment,{children:["早八人早八魂~",(0,r.jsx)("image",{url:f+"1900bd28998944a6.jpg"})]})]}))})}}E(me,"apply");var q=G((te(),_(F))),V=G(L()),x=(C(),_(T)),oe="bellabot",Ne=new p.Logger(oe),Re=`
## 更新插件前请停止运行插件
插件配置项可能会有改动，不停止插件直接更新可能会导致koishi炸掉  

## 使用说明
插件内置4张涩图，可以开箱即用  
backgroundImage支持本地文件夹绝对路径和http(s) url直接返回图片的api  
随机文件夹内图片时请注意路径\`C:/user/path/to/\`不要把后面的/忘了   

## api说明
* api url以 #e# 结尾可以在末尾添加更新时间戳(例子后面等价的数字为当前时间戳)  
* 例: https://api.example.com/img?#e#  ==等价于== https://api.example.com/img?271878  
* 例: https://api.example.com/img?type=acc&v=#e#  ==等价于== https://api.example.com/img?type=acc&v=271878  
`,Me=p.Schema.object({common:p.Schema.object({backgroundImage:p.Schema.string().role("link").description("背景图url(推荐横屏),支持本地绝对路径，不要忘了末尾加/"),bililinkAnalysis:p.Schema.boolean().default(!1).description("开启bilibili视频解析"),interaction:p.Schema.boolean().default(!1).description("开启贝拉互动功能")}).description("基础配置"),signin:p.Schema.object({superuser:p.Schema.array(p.Schema.string()).description("超级用户id"),signpointmax:p.Schema.number().default(100).description("签到积分随机最大值"),signpointmin:p.Schema.number().default(1).description("签到积分随机最小值"),lotteryOdds:p.Schema.percent().default(.6).description("抽奖指令中倍率的概率(默认0.6)"),callme:p.Schema.boolean().default(!1).description("启用callme(需要安装callme插件)"),waittip:p.Schema.boolean().default(!1).description("启用等待提示")}).description("签到配置"),biliLinkAnalysis:p.Schema.object({maxLength:p.Schema.number().default(100).description("简介文本长度限制")}).description("bilibili视频解析配置")}),Pe=["puppeteer","database"];function de(e,t){t.common.bililinkAnalysis&&new De(e,t.biliLinkAnalysis.maxLength),t.common.interaction&&e.plugin(ce,{"bellabot-interaction":!0});let a=new Ie(e,t);e.command("bella","贝拉菜单").alias("贝拉菜单").action(async({session:i})=>(0,x.jsx)(x.Fragment,{children:`bellaBot>>贝拉菜单<<bellaBot
 signin--->每日签到,别名: 签到
 workstart--->开始打工
别名: 开始打工
 最少30分钟，最多8(+9)小时
 workstop--->停止打工
别名: 结束打工
 workstatus--->打工状态
别名: 打工查询
 lottery--->抽奖,别名: 抽奖
 用法: 抽奖 20&
 shop--->积分商店,别名: 商店
 givepiontshop--->积分补给
别名: 积分补充(仅允许超级用户)
 用法: 积分补充 123 @xxxxx rank--->积分排行榜,别名: 积分榜`})),e.command("bella/signin","贝拉签到").alias("签到").option("text","-t 纯文本输出").userFields(["name"]).action(async({session:i,options:n})=>{let s=new Fe,g=new Date,u=await s.getJrys(i.userId?i.userId:2333);var m;e.database&&t.signin.callme&&(m=i.username),!m&&t.signin.callme?m=i.author.name:m=i.username,m=m.length>12?m.substring(0,12):m;let c,d=new Date().getTime()%25565,D=(0,P.resolve)(import.meta.url,"./index/defaultImg/").replaceAll("\\","/");t.common.backgroundImage?t.common.backgroundImage.match(/http(s)?:\/\/(.*)/gi)?c=t.common.backgroundImage.match(/^http(s)?:\/\/(.*)#e#$/gi)?t.common.backgroundImage.replace("#e#",d.toString()):t.common.backgroundImage:c=(0,ae.pathToFileURL)((0,P.resolve)(import.meta.url,t.common.backgroundImage+p.Random.pick(await z(t.common.backgroundImage)))).href:c=(0,ae.pathToFileURL)((0,P.resolve)(import.meta.url,D+"/"+p.Random.pick(await z(D)))).href;let S=await a.callSignin(i),R=a.levelJudge(Number(S.allpoint)).level_line;if(n.text)return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("at",{id:i.userId}),S.status?"签到成功！":"今天已经签到过啦！",",本次签到获得积分:",S.getpoint]});t.signin.waittip&&await i.send("请稍等，正在渲染……");let h;try{let O=q.default.readFileSync(V.default.resolve(import.meta.url,"./index/template.txt"),"utf-8").replace("##todayExp##",S.getpoint.toString()).replace("##totalExp##",S.allpoint.toString()).replace("##level##",a.levelJudge(Number(S.allpoint)).level.toString()).replace("##bgUrl##",c).replace("##avatarUrl##",i.platform=="qq"?`http://q.qlogo.cn/qqapp/${i.bot.config.id}/${i.event.user?.id}/640`:i.author.avatar).replace("##signinText##",S.status?"签到成功！":"今天已经签到过啦！").replace("##date##",g.getMonth()+1+"/"+g.getDate()).replace("##hello##",a.getGreeting(g.getHours())).replace("##user##",m).replace("##persent##",(Number(S.allpoint)/R*100).toFixed(3).toString()).replace("##signTxt##",u.signText).replace("##fortunate##",u.fortuneSummary).replace("##luckystar##",u.luckyStar);await q.default.writeFileSync(V.default.resolve(import.meta.url,"./index/index.html"),O),h=await e.puppeteer.page(),await h.setViewport({width:600,height:1080*2}),await h.goto(`file:///${(0,P.resolve)(import.meta.url,"./index/index.html")}`),await h.waitForSelector("#body");let J=await h.$("#body");return p.h.image(await J.screenshot({encoding:"binary"}),"image/png")}catch(A){return Ne.error(A),(0,x.jsx)(x.Fragment,{children:"哪里出的问题！md跟你爆了！"})}finally{h&&await h?.close()}}),e.command("bella/lottery <count:number>","贝拉抽奖！通过消耗签到积分抽奖",{minInterval:.2*6e4}).alias("抽奖").userFields(["name"]).action(async({session:i},n)=>await a.lottery(i,n)),e.command("bella/workstart","开始通过打工获取积分",{minInterval:.2*6e4}).alias("开始打工").alias("打工开始").userFields(["name"]).action(async({session:i})=>await a.workstart(i)),e.command("bella/workend","结束打工",{minInterval:.2*6e4}).alias("结束打工").alias("打工结束").userFields(["name"]).action(async({session:i})=>await a.workend(i)),e.command("bella/workcheck","查询打工情况",{minInterval:.1*6e4}).alias("打工查询").userFields(["name"]).action(async({session:i})=>await a.workcheck(i)),e.command("bella/givepoint <count:number> [user:user]","给予用户积分",{authority:3}).alias("积分补充").alias("给积分").option("subtract","-s 减积分").action(async({session:i,options:n},s,g)=>(n.subtract&&(s=-s),t.signin.superuser.includes(i.userId)?await a.givepoint(i,s,g):(0,x.jsx)(x.Fragment,{children:"杂鱼大哥哥没有权限呢~♥"}))),e.command("bella/shop","贝拉商店").alias("积分商店").alias("积分商城").action(async({session:i})=>await a.shop(i)),e.command("bella/rank [userCount:number]","查看积分排行榜(显示前n位最多50)").alias("积分榜").alias("排行榜").action(async(i,n)=>{let s=n?n<50?n:50:10,g=await a.rankUsers(s);return(0,x.jsx)("html",{style:"font-family: Arial, sans-serif; background-color: #f4f4f9; margin: 0; padding: 0; display: flex; justify-content: center; align-items: center;max-width: 360px;",children:(0,x.jsxs)("table",{style:"border-collapse: collapse; width: 95%; margin: 20px 0; font-size: 18px; text-align: left;height: 95vh",children:[(0,x.jsx)("caption",{style:"caption-side: top; font-size: 24px; margin-bottom: 10px; font-weight: bold;",children:"排行榜"}),(0,x.jsx)("thead",{children:(0,x.jsxs)("tr",{children:[(0,x.jsx)("th",{style:"padding: 12px; border: 1px solid #ddd; background-color: #4CAF50; color: white;",children:"排名"}),(0,x.jsx)("th",{style:"padding: 12px; border: 1px solid #ddd; background-color: #4CAF50; color: white;",children:"用户"}),(0,x.jsx)("th",{style:"padding: 12px; border: 1px solid #ddd; background-color: #4CAF50; color: white;",children:"积分"})]})}),(0,x.jsx)("tbody",{children:g})]})})})}E(de,"apply");async function z(e){return(await Z(e)).filter(i=>/\.(png|jpg|jpeg|ico|svg)$/i.test(i))}E(z,"getFolderImg");async function Z(e){let t=[];return q.default.readdirSync(e).forEach(i=>{let n=V.default.join(e,i);q.default.statSync(n).isDirectory()?t=t.concat(Z(n)):t.push(i)}),t}E(Z,"readFilenames")});export default qe();
