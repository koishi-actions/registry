var w=(e,t)=>()=>(e&&(t=e(e=0)),t);var l=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);import{Buffer as u}from"https://registry.koishi.chat/modules/buffer/index.js";import a from"https://registry.koishi.chat/modules/process/index.js";var o=w(()=>{});var d=l((S,f)=>{"use strict";o();f.exports=function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}});var g=l(r=>{o();var _=r&&r.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0});var m=_(d());r.default=(e,t)=>{let n=new m.default.Server({port:t.port||9088});n.on("connection",s=>{s.on("message",c=>{}),s.on("close",()=>{})}),e.middleware(async(s,c)=>(n.clients.forEach(i=>{i.readyState===m.default.OPEN&&i.send(JSON.stringify(s))}),c()))}});export default g();
