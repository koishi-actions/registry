var _=Object.defineProperty;var x=Object.getOwnPropertyDescriptor;var S=Object.getOwnPropertyNames;var q=Object.prototype.hasOwnProperty;var y=(r,e)=>()=>(r&&(e=r(r=0)),e);var C=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports);var l=(r,e,a,o)=>{if(e&&typeof e=="object"||typeof e=="function")for(let t of S(e))!q.call(r,t)&&t!==a&&_(r,t,{get:()=>e[t],enumerable:!(o=x(e,t))||o.enumerable});return r},m=(r,e,a)=>(l(r,e,"default"),a&&l(a,e,"default"));var N=r=>l(_({},"__esModule",{value:!0}),r);import{Buffer as b}from"https://registry.koishi.chat/modules/buffer/index.js";import g from"https://registry.koishi.chat/modules/process/index.js";var i=y(()=>{});var n={};import*as L from"https://registry.koishi.chat/modules/koishi/index.js";var h=y(()=>{i();m(n,L)});var M=C((Q,w)=>{i();var u=Object.defineProperty,$=Object.getOwnPropertyDescriptor,k=Object.getOwnPropertyNames,D=Object.prototype.hasOwnProperty,f=(r,e)=>u(r,"name",{value:e,configurable:!0}),U=(r,e)=>{for(var a in e)u(r,a,{get:e[a],enumerable:!0})},B=(r,e,a,o)=>{if(e&&typeof e=="object"||typeof e=="function")for(let t of k(e))!D.call(r,t)&&t!==a&&u(r,t,{get:()=>e[t],enumerable:!(o=$(e,t))||o.enumerable});return r},E=r=>B(u({},"__esModule",{value:!0}),r),v={};U(v,{Config:()=>J,apply:()=>P,name:()=>I});w.exports=E(v);var c=(h(),N(n)),I="rua",J=c.Schema.object({commands:c.Schema.array(String).role("table").description("指令列表").default(["rua","敲"]),hidden:c.Schema.boolean().description("是否在 help 菜单中隐藏指令").default(!1)});function O(r){let e={...r.user,...r.member};return e.nick||e.name||e.id}f(O,"getUserName");function P(r,e){for(let a of e.commands){let o=a.trim();o&&r.command(o,{hidden:e.hidden}).option("target","-t <user>",{type:f(t=>{let p=c.h.parse(t)[0];if(p&&p.type==="at")return p.attrs;throw new Error("internal.invalid-user")},"type")}).action(async({session:t,options:p},z)=>{let j=t.username,s=p.target?.name;t.quote&&(s||=O(t.quote));let d=`${c.h.quote(t.messageId)}<b>${j}</b> ${o}了 `;return d+=s?`<b>${s}</b> `:"自己",d+"！"})}}f(P,"apply")});export default M();
