import{Schema as i,useConfig as b,store as s}from"@koishijs/client";import{usePreferredDark as S}from"@vueuse/core";import{computed as w,watchEffect as D}from"vue";const g={"doki-essex-dark":{path:"azurLane/essex/dark",default:{name:"essex_dark.png",anchor:"right"},secondary:{name:"essex_dark_plain.png",anchor:"right"}},"doki-maika-dark":{path:"blendS/maika/dark",default:{name:"maika_dark.png",anchor:"right"}},"doki-mai-dark":{path:"bunnySenpai/mai/dark",default:{name:"mai_dark.png",anchor:"right"},secondary:{name:"mai_dark_spicy.png",anchor:"right"}},"doki-mai-light":{path:"bunnySenpai/mai/light",default:{name:"mai_light.png",anchor:"right"},secondary:{name:"mai_light_spicy.png",anchor:"right"}},"doki-tomori-nao-light":{path:"charlotte/nao/light",default:{name:"nao_light.png",anchor:"right"}},"doki-takanashi-rikka-dark":{path:"chuunibyou/rikka/dark",default:{name:"rikka_dark.png",anchor:"center"}},"doki-c-c--light":{path:"codeGeass/cc/light",default:{name:"cc_light.png",anchor:"right"}},"doki-mioda-ibuki-dark":{path:"danganronpa/ibuki/dark",default:{name:"ibuki_dark.png",anchor:"right"}},"doki-mioda-ibuki-light":{path:"danganronpa/ibuki/light",default:{name:"ibuki_light.png",anchor:"right"}},"doki-hayase-nagatoro-dark":{path:"dontToyWithMeMiss/nagatoro/dark",default:{name:"nagatoro_dark.png",anchor:"right"}},"doki-kanna-dark":{path:"dragonMaid/kanna/dark",default:{name:"kanna_dark.png",anchor:"center"},secondary:{name:"kanna_dark_secondary.png",anchor:"center"}},"doki-tohru-light":{path:"dragonMaid/tohru/light",default:{name:"tohru_light.png",anchor:"right"}},"doki-sagiri-dark":{path:"eromanga/sagiri/dark",default:{name:"sagiri_dark.png",anchor:"right"}},"doki-katsuragi-misato-dark":{path:"eva/misato/dark",default:{name:"misato_dark.png",anchor:"center"}},"doki-rei-dark":{path:"eva/rei/dark",default:{name:"rei_dark.png",anchor:"right"}},"doki-astolfo-dark":{path:"fate/astolfo/dark",default:{name:"astolfo_dark.png",anchor:"right"}},"doki-ishtar-dark":{path:"fate/ishtar/dark",default:{name:"ishtar_dark.png",anchor:"center"}},"doki-ishtar-light":{path:"fate/ishtar/light",default:{name:"ishtar_light.png",anchor:"center"}},"doki-tohsaka-rin-dark":{path:"fate/rin/dark",default:{name:"rin_dark_v2.png",anchor:"right"}},"doki-hiro-dark":{path:"franxx/hiro/dark",default:{name:"hiro_dark.png",anchor:"right"}},"doki-hiro-x-zero-two-dark":{path:"franxx/hiroXZeroTwo/dark",default:{name:"hiro_x_zero_two.png",anchor:"center"}},"doki-zero-two-light-lily-light":{path:"franxx/zeroTwo/lily",default:{name:"zero_two_lily.png",anchor:"center"}},"doki-zero-two-dark-obsidian-dark":{path:"franxx/zeroTwo/obsidian",default:{name:"zero_two_obsidian.png",anchor:"center"}},"doki-zero-two-dark-rose-dark":{path:"franxx/zeroTwo/rose",default:{name:"zero_two_rose.png",anchor:"center"}},"doki-zero-two-light-sakura-light":{path:"franxx/zeroTwo/sakura",default:{name:"zero_two_sakura.png",anchor:"center"}},"doki-gasai-yuno-dark":{path:"futureDiary/yuno/dark",default:{name:"yuno_dark.png",anchor:"right"}},"doki-rory-mercury-dark":{path:"gate/rory/dark",default:{name:"rory_dark.png",anchor:"center"}},"doki-yuzuriha-inori-light":{path:"guiltyCrown/inori/light",default:{name:"inori_light.png",anchor:"right"}},"doki-hinata-shoyo-dark":{path:"haikyu/shoyo/dark",default:{name:"shoyo_dark.png",anchor:"right"}},"doki-rias--crimson-dark":{path:"highSchoolDxD/rias/dark",default:{name:"rias_dark.png",anchor:"center"}},"doki-rias--onyx-dark":{path:"highSchoolDxD/rias/onyx",default:{name:"rias_onyx.png",anchor:"center"},secondary:{name:"rias_onyx_spicy.png",anchor:"center"}},"doki-jahy-dark":{path:"jahySama/jahy/dark",default:{name:"jahy_dark_smol.png",anchor:"right"}},"doki-jabami-yumeko-dark":{path:"kakegurui/yumeko/dark",default:{name:"yumeko_dark.png",anchor:"right"}},"doki-ryuko-dark":{path:"killLaKill/ryuko/dark",default:{name:"ryuko.png",anchor:"right"}},"doki-ryuko-light":{path:"killLaKill/ryuko/light",default:{name:"ryuko_light.png",anchor:"right"}},"doki-satsuki-dark":{path:"killLaKill/satsuki/dark",default:{name:"satsuki_dark.png",anchor:"center"}},"doki-satsuki-light":{path:"killLaKill/satsuki/light",default:{name:"satsuki_light.png",anchor:"center"}},"doki-aqua-dark":{path:"konoSuba/aqua/dark",default:{name:"aqua_dark.png",anchor:"center"}},"doki-darkness-dark":{path:"konoSuba/darkness/dark",default:{name:"darkness_dark.png",anchor:"center"}},"doki-darkness-light":{path:"konoSuba/darkness/light",default:{name:"darkness_light.png",anchor:"center"}},"doki-megumin-dark":{path:"konoSuba",default:{name:"megumin.png",anchor:"center"}},"doki-monika-dark":{path:"literature/monika/dark",default:{name:"just_monika_dark.png",anchor:"center"},secondary:{name:"just_monika_dark_joy.png",anchor:"center"}},"doki-monika-light":{path:"literature/monika/light",default:{name:"just_monika.png",anchor:"center"},secondary:{name:"just_monika_joy.png",anchor:"center"}},"doki-natsuki-dark":{path:"literature/natsuki/dark",default:{name:"natsuki_dark.png",anchor:"right"},secondary:{name:"natsuki_dark_normal.png",anchor:"center"}},"doki-natsuki-light":{path:"literature/natsuki/light",default:{name:"natsuki.png",anchor:"right"},secondary:{name:"natsuki_joy.png",anchor:"center"}},"doki-sayori-dark":{path:"literature/sayori/dark",default:{name:"sayori_dark.png",anchor:"center"},secondary:{name:"sayori_dark_normal.png",anchor:"center"}},"doki-sayori-light":{path:"literature/sayori/light",default:{name:"sayori.png",anchor:"center"},secondary:{name:"sayori_joy.png",anchor:"center"}},"doki-yuri-dark":{path:"literature/yuri/dark",default:{name:"yuri_dark.png",anchor:"center"},secondary:{name:"yuri_dark_normal.png",anchor:"center"}},"doki-yuri-light":{path:"literature/yuri/light",default:{name:"yuri.png",anchor:"center"},secondary:{name:"yuri_joy.png",anchor:"center"}},"doki-sonoda-umi-dark":{path:"loveLive/umi/dark",default:{name:"umi_dark.png",anchor:"center"}},"doki-konata-dark":{path:"luckyStar/konata/dark",default:{name:"konata_dark.png",anchor:"center"},secondary:{name:"konata_dark_secondary.png",anchor:"center"}},"doki-hatsune-miku-dark":{path:"miscellaneous/miku",default:{name:"miku.png",anchor:"center"},secondary:{name:"miku_secondary.png",anchor:"right"}},"doki-hanekawa-tsubasa-dark":{path:"monogatari/hanekawa/dark",default:{name:"hanekawa_dark.png",anchor:"right"}},"doki-miia-dark":{path:"monsterGirls/miia/dark",default:{name:"miia_dark.png",anchor:"right"}},"doki-azuki-dark":{path:"nekoPara/azuki/dark",default:{name:"azuki_dark.png",anchor:"right"}},"doki-chocola-dark":{path:"nekoPara/chocola/dark",default:{name:"chocola_dark.png",anchor:"right"}},"doki-christmas-chocola-dark":{path:"nekoPara/chocola/xmas",default:{name:"chocola_xmas.png",anchor:"center"}},"doki-cinnamon-dark":{path:"nekoPara/cinnamon/dark",default:{name:"cinnamon_dark.png",anchor:"right"}},"doki-coconut-dark":{path:"nekoPara/coconut/dark",default:{name:"coconut_dark.png",anchor:"right"}},"doki-maple-dark":{path:"nekoPara/maple/dark",default:{name:"maple_dark.png",anchor:"right"}},"doki-maple-light":{path:"nekoPara/maple/light",default:{name:"maple_light.png",anchor:"right"}},"doki-shigure-light":{path:"nekoPara/shigure/light",default:{name:"shigure_light.png",anchor:"right"}},"doki-vanilla-dark":{path:"nekoPara/vanilla/dark",default:{name:"vanilla_dark.png",anchor:"right"}},"doki-genos-dark":{path:"onePunch/genos/dark",default:{name:"genos_dark.png",anchor:"right"}},"doki-yukinoshita-yukino-dark":{path:"oreGairu/yukino/dark",default:{name:"yukino_dark.png",anchor:"center"}},"doki-kirino-dark":{path:"oreimo/kirino/dark",default:{name:"kirino_dark.png",anchor:"right"}},"doki-nakano-ichika-light":{path:"quintuplets/ichika/light",default:{name:"ichika_light.png",anchor:"right"}},"doki-nakano-itsuki-light":{path:"quintuplets/itsuki/light",default:{name:"itsuki_light.png",anchor:"right"}},"doki-nakano-miku-dark":{path:"quintuplets/miku/dark",default:{name:"nakano_miku_dark.png",anchor:"right"}},"doki-nakano-nino-dark":{path:"quintuplets/nino/dark",default:{name:"nino_dark.png",anchor:"right"}},"doki-nakano-yotsuba-dark":{path:"quintuplets/yotsuba/dark",default:{name:"yotsuba_dark.png",anchor:"right"}},"doki-misaka-mikoto-dark":{path:"railgun/mikoto/dark",default:{name:"mikoto_dark.png",anchor:"right"}},"doki-beatrice-light":{path:"reZero/beatrice",default:{name:"beatrice.png",anchor:"right"}},"doki-echidna-dark":{path:"reZero/echidna/dark",default:{name:"echidna_dark.png",anchor:"center"}},"doki-emilia-dark":{path:"reZero/emilia/dark",default:{name:"emilia_dark.png",anchor:"right"}},"doki-emilia-light":{path:"reZero/emilia/light",default:{name:"emilia_light.png",anchor:"right"}},"doki-ram-dark":{path:"reZero/ram",default:{name:"ram.png",anchor:"right"}},"doki-rem-dark":{path:"reZero/rem",default:{name:"rem.png",anchor:"right"}},"doki-senko-light":{path:"senkoSan/senko/light",default:{name:"senko_light.png",anchor:"right"}},"doki-raphtalia-dark":{path:"shieldHero/raphtalia/dark",default:{name:"raphtalia_dark.png",anchor:"right"}},"doki-yukihira-soma-dark":{path:"shokugeki/soma/dark",default:{name:"soma_dark.png",anchor:"right"}},"doki-rimuru-tempest-dark":{path:"slime/rimuru/dark",default:{name:"rimuru_dark.png",anchor:"right"}},"doki-makise-kurisu-dark":{path:"steinsGate/kurisu/dark",default:{name:"kurisu_dark.png",anchor:"center"}},"doki-asuna-dark":{path:"swordArtOnline/asuna/dark",default:{name:"asuna_dark.png",anchor:"center"}},"doki-asuna-light":{path:"swordArtOnline/asuna/light",default:{name:"asuna_light.png",anchor:"center"}},"doki-gray-dark":{path:"typeMoon/gray/dark",default:{name:"gray_dark.png",anchor:"right"}},"doki-nadeshiko-dark":{path:"yuruCamp/nadeshiko/dark",default:{name:"nadeshiko_dark.png",anchor:"right"}},"doki-shima-rin-dark":{path:"yuruCamp/rin/dark",default:{name:"shima_rin_dark.png",anchor:"right"}}};function L(a){a.theme({id:"doki-essex-dark",name:"Azur Lane: Essex"}),a.theme({id:"doki-maika-dark",name:"Blend S: Maika"}),a.theme({id:"doki-mai-dark",name:"Bunny Senpai: Mai Dark"}),a.theme({id:"doki-mai-light",name:"Bunny Senpai: Mai Light"}),a.theme({id:"doki-tomori-nao-light",name:"Charlotte: Tomori Nao"}),a.theme({id:"doki-takanashi-rikka-dark",name:"Chuunibyou: Takanashi Rikka"}),a.theme({id:"doki-c-c--light",name:"Code Geass: C.C."}),a.theme({id:"doki-mioda-ibuki-dark",name:"DanganRonpa: Mioda Ibuki Dark"}),a.theme({id:"doki-mioda-ibuki-light",name:"DanganRonpa: Mioda Ibuki Light"}),a.theme({id:"doki-hayase-nagatoro-dark",name:"Don't Toy with me Miss Nagatoro: Hayase Nagatoro"}),a.theme({id:"doki-kanna-dark",name:"Miss Kobayashi's Dragon Maid: Kanna"}),a.theme({id:"doki-tohru-light",name:"Miss Kobayashi's Dragon Maid: Tohru"}),a.theme({id:"doki-sagiri-dark",name:"EroManga Sensei: Sagiri"}),a.theme({id:"doki-katsuragi-misato-dark",name:"Evangelion: Katsuragi Misato"}),a.theme({id:"doki-rei-dark",name:"Evangelion: Rei"}),a.theme({id:"doki-astolfo-dark",name:"Fate: Astolfo"}),a.theme({id:"doki-ishtar-dark",name:"Fate: Ishtar Dark"}),a.theme({id:"doki-ishtar-light",name:"Fate: Ishtar Light"}),a.theme({id:"doki-tohsaka-rin-dark",name:"Fate: Tohsaka Rin"}),a.theme({id:"doki-hiro-dark",name:"Darling in the Franxx: Hiro"}),a.theme({id:"doki-hiro-x-zero-two-dark",name:"Darling in the Franxx: Hiro x Zero Two"}),a.theme({id:"doki-zero-two-light-lily-light",name:"Darling in the Franxx: Zero Two Light Lily"}),a.theme({id:"doki-zero-two-dark-obsidian-dark",name:"Darling in the Franxx: Zero Two Dark Obsidian"}),a.theme({id:"doki-zero-two-dark-rose-dark",name:"Darling in the Franxx: Zero Two Dark Rose"}),a.theme({id:"doki-zero-two-light-sakura-light",name:"Darling in the Franxx: Zero Two Light Sakura"}),a.theme({id:"doki-gasai-yuno-dark",name:"Future Diary: Gasai Yuno"}),a.theme({id:"doki-rory-mercury-dark",name:"Gate: Rory Mercury"}),a.theme({id:"doki-yuzuriha-inori-light",name:"Guilty Crown: Yuzuriha Inori"}),a.theme({id:"doki-hinata-shoyo-dark",name:"Haikyu!!: Hinata Shoyo"}),a.theme({id:"doki-rias--crimson-dark",name:"High School DxD: Rias: Crimson"}),a.theme({id:"doki-rias--onyx-dark",name:"High School DxD: Rias: Onyx"}),a.theme({id:"doki-jahy-dark",name:"The Great Jahy Will Not Be Defeated: Jahy"}),a.theme({id:"doki-jabami-yumeko-dark",name:"Kakegurui: Jabami Yumeko"}),a.theme({id:"doki-ryuko-dark",name:"Kill la Kill: Ryuko Dark"}),a.theme({id:"doki-ryuko-light",name:"Kill la Kill: Ryuko Light"}),a.theme({id:"doki-satsuki-dark",name:"Kill la Kill: Satsuki Dark"}),a.theme({id:"doki-satsuki-light",name:"Kill la Kill: Satsuki Light"}),a.theme({id:"doki-aqua-dark",name:"KonoSuba: Aqua"}),a.theme({id:"doki-darkness-dark",name:"KonoSuba: Darkness Dark"}),a.theme({id:"doki-darkness-light",name:"KonoSuba: Darkness Light"}),a.theme({id:"doki-megumin-dark",name:"KonoSuba: Megumin"}),a.theme({id:"doki-monika-dark",name:"Literature Club: Monika Dark"}),a.theme({id:"doki-monika-light",name:"Literature Club: Monika Light"}),a.theme({id:"doki-natsuki-dark",name:"Literature Club: Natsuki Dark"}),a.theme({id:"doki-natsuki-light",name:"Literature Club: Natsuki Light"}),a.theme({id:"doki-sayori-dark",name:"Literature Club: Sayori Dark"}),a.theme({id:"doki-sayori-light",name:"Literature Club: Sayori Light"}),a.theme({id:"doki-yuri-dark",name:"Literature Club: Yuri Dark"}),a.theme({id:"doki-yuri-light",name:"Literature Club: Yuri Light"}),a.theme({id:"doki-sonoda-umi-dark",name:"Love Live: Sonoda Umi"}),a.theme({id:"doki-konata-dark",name:"Lucky Star: Konata"}),a.theme({id:"doki-hatsune-miku-dark",name:"Vocaloid: Hatsune Miku"}),a.theme({id:"doki-hanekawa-tsubasa-dark",name:"Monogatari: Hanekawa Tsubasa"}),a.theme({id:"doki-miia-dark",name:"Daily Life With A Monster Girl: Miia"}),a.theme({id:"doki-azuki-dark",name:"NekoPara: Azuki"}),a.theme({id:"doki-chocola-dark",name:"NekoPara: Chocola"}),a.theme({id:"doki-christmas-chocola-dark",name:"NekoPara: Christmas Chocola"}),a.theme({id:"doki-cinnamon-dark",name:"NekoPara: Cinnamon"}),a.theme({id:"doki-coconut-dark",name:"NekoPara: Coconut"}),a.theme({id:"doki-maple-dark",name:"NekoPara: Maple Dark"}),a.theme({id:"doki-maple-light",name:"NekoPara: Maple Light"}),a.theme({id:"doki-shigure-light",name:"NekoPara: Shigure"}),a.theme({id:"doki-vanilla-dark",name:"NekoPara: Vanilla"}),a.theme({id:"doki-genos-dark",name:"One Punch Man: Genos"}),a.theme({id:"doki-yukinoshita-yukino-dark",name:"OreGairu: Yukinoshita Yukino"}),a.theme({id:"doki-kirino-dark",name:"OreImo: Kirino"}),a.theme({id:"doki-nakano-ichika-light",name:"Quintessential Quintuplets: Nakano Ichika"}),a.theme({id:"doki-nakano-itsuki-light",name:"Quintessential Quintuplets: Nakano Itsuki"}),a.theme({id:"doki-nakano-miku-dark",name:"Quintessential Quintuplets: Nakano Miku"}),a.theme({id:"doki-nakano-nino-dark",name:"Quintessential Quintuplets: Nakano Nino"}),a.theme({id:"doki-nakano-yotsuba-dark",name:"Quintessential Quintuplets: Nakano Yotsuba"}),a.theme({id:"doki-misaka-mikoto-dark",name:"Toaru Majutsu no Index: Misaka Mikoto"}),a.theme({id:"doki-beatrice-light",name:"Re Zero: Beatrice"}),a.theme({id:"doki-echidna-dark",name:"Re Zero: Echidna"}),a.theme({id:"doki-emilia-dark",name:"Re Zero: Emilia Dark"}),a.theme({id:"doki-emilia-light",name:"Re Zero: Emilia Light"}),a.theme({id:"doki-ram-dark",name:"Re Zero: Ram"}),a.theme({id:"doki-rem-dark",name:"Re Zero: Rem"}),a.theme({id:"doki-senko-light",name:"Helpful Fox Senko-san: Senko"}),a.theme({id:"doki-raphtalia-dark",name:"The Rising of Shield Hero: Raphtalia"}),a.theme({id:"doki-yukihira-soma-dark",name:"Shokugeki no Soma: Yukihira Soma"}),a.theme({id:"doki-rimuru-tempest-dark",name:"That Time I Get ReIncarnated As A Slime: Rimuru Tempest"}),a.theme({id:"doki-makise-kurisu-dark",name:"Steins Gate: Makise Kurisu"}),a.theme({id:"doki-asuna-dark",name:"Sword Art Online: Asuna Dark"}),a.theme({id:"doki-asuna-light",name:"Sword Art Online: Asuna Light"}),a.theme({id:"doki-gray-dark",name:"Type-Moon: Gray"}),a.theme({id:"doki-nadeshiko-dark",name:"Yuru Camp: Nadeshiko"}),a.theme({id:"doki-shima-rin-dark",name:"Yuru Camp: Shima Rin"})}const M="https://raw.gitmirror.com/doki-theme/doki-theme-assets/master/",p=i.intersect([i.intersect([i.object({resBaseURL:i.string().role("link").default(M).description("图片资源的 URL 前缀。")}).description("Doki Theme: 通用设置"),i.object({useWallpaper:i.boolean().default(true).description("使用背景图片，在 `koishi-plugin-wallpaper` 启用时无效。")}).description("Doki Theme: 背景设置"),i.union([i.object({useWallpaper:i.const(true),useSecondaryWallpaper:i.boolean().default(false).description("使用备选背景图片（只有一部分主题有）。"),wallpaperOpacity:i.number().role("slider").min(.3).max(1).step(.01).default(.95).description("控制台透明度。")}),i.object({})])]),i.intersect([i.object({useSticker:i.boolean().default(true).description("使用贴纸。")}).description("Doki Theme: 贴纸设置"),i.union([i.object({useSticker:i.const(true),useSecondarySticker:i.boolean().default(false).description("使用备选贴纸（只有一部分主题有）。"),stickerOpacity:i.number().role("slider").min(0).max(1).step(.01).default(.5).description("贴纸透明度。"),stickerXOffset:i.string().default("0px").description("贴纸水平偏移量（使用 CSS 单位）。"),stickerYOffset:i.string().default("0px").description("贴纸垂直偏移量（使用 CSS 单位）。")}),i.object({})])])]),t=b(),T=S(),c=w(()=>{const{mode:a}=t.value.theme;return a!=="auto"?a:T.value?"dark":"light"});function v(a){L(a),a.settings({id:"appearance",disabled:()=>!g[t.value.theme[c.value]],schema:i.object({dokiTheme:p})}),a.on("ready",()=>{var l;(l=t.value).dokiTheme||(l.dokiTheme=p());const k="doki-theme-sticker",n=window.document.querySelector("body"),u=r=>{const e=t.value.dokiTheme.resBaseURL;return new URL(r,e.endsWith("/")?e:`${e}/`).href},y=async()=>{const r=document.getElementById(k);if(r)return r;const e=document.createElement("div");return e.id=k,e.style.position="fixed",e.style.bottom="0",e.style.right="0",e.style.zIndex="100",e.style.width="100%",e.style.height="100%",e.style.backgroundRepeat="no-repeat",e.style.pointerEvents="none",n.appendChild(e),e},f=async r=>{const e=t.value.dokiTheme,{name:o,anchor:d}=e.useSecondaryWallpaper&&r.secondary?r.secondary:r.default;n.style.backgroundImage=`url('${u(`backgrounds/${o}`)}')`,n.style.backgroundPosition=`${d} bottom`,n.style.backgroundSize="cover",n.style.opacity=`${e.wallpaperOpacity}`},h=async()=>{n.style.backgroundImage="",n.style.backgroundPosition="",n.style.backgroundSize="",n.style.opacity=""},_=async r=>{const e=await y();if(!e)return;const o=t.value.dokiTheme,{name:d}=o.useSecondarySticker&&r.secondary?r.secondary:r.default;e.style.backgroundImage=`url('${u(`stickers/vscode/${r.path}/${d}`)}')`,e.style.opacity=`${o.stickerOpacity}`,e.style.backgroundPosition=`bottom ${o.stickerYOffset} right ${o.stickerXOffset}`,n.appendChild(e)},m=async()=>{var r;(r=document.getElementById(k))==null||r.remove()};D(()=>{const r=t.value.theme[c.value],e=g[r];if(!e){s.wallpaper||h(),m();return}const{useWallpaper:o,useSticker:d}=t.value.dokiTheme;s.wallpaper||(o?f(e):h()),d?_(e):m()}),a.on("dispose",()=>{s.wallpaper||h(),m()})})}export{p as DokiThemeConfig,v as default};
