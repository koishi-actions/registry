var $=Object.defineProperty;var se=Object.getOwnPropertyDescriptor;var re=Object.getOwnPropertyNames;var ne=Object.prototype.hasOwnProperty;var C=(i,e)=>()=>(i&&(e=i(i=0)),e);var _=(i,e)=>()=>(e||i((e={exports:{}}).exports,e),e.exports);var I=(i,e,t,a)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of re(e))!ne.call(i,s)&&s!==t&&$(i,s,{get:()=>e[s],enumerable:!(a=se(e,s))||a.enumerable});return i},T=(i,e,t)=>(I(i,e,"default"),t&&I(t,e,"default"));var x=i=>I($({},"__esModule",{value:!0}),i);import{Buffer as S}from"https://registry.koishi.chat/modules/buffer/index.js";import E from"https://registry.koishi.chat/modules/process/index.js";var f=C(()=>{});var M={};import*as Pe from"https://registry.koishi.chat/modules/koishi/index.js";var N=C(()=>{f();T(M,Pe)});var U={};import*as ge from"https://registry.koishi.chat/modules/axios/index.js";var q=C(()=>{f();T(U,ge)});var H=_(V=>{"use strict";f();Object.defineProperty(V,"__esModule",{value:!0});V.RequiredError=V.BaseAPI=V.COLLECTION_FORMATS=V.BASE_PATH=void 0;var ie=(q(),x(U));V.BASE_PATH="https://api.openai.com/v1".replace(/\/+$/,"");V.COLLECTION_FORMATS={csv:",",ssv:" ",tsv:"	",pipes:"|"};var w=class{constructor(e,t=V.BASE_PATH,a=ie.default){this.basePath=t,this.axios=a,e&&(this.configuration=e,this.basePath=e.basePath||this.basePath)}};V.BaseAPI=w;var L=class extends Error{constructor(e,t){super(t),this.field=e,this.name="RequiredError"}};V.RequiredError=L});var K=_(A=>{"use strict";f();var Q=A&&A.__awaiter||function(i,e,t,a){function s(r){return r instanceof t?r:new t(function(n){n(r)})}return new(t||(t=Promise))(function(r,n){function c(u){try{d(a.next(u))}catch(O){n(O)}}function l(u){try{d(a.throw(u))}catch(O){n(O)}}function d(u){u.done?r(u.value):s(u.value).then(c,l)}d((a=a.apply(i,e||[])).next())})};Object.defineProperty(A,"__esModule",{value:!0});A.createRequestFunction=A.toPathString=A.serializeDataIfNeeded=A.setSearchParams=A.setOAuthToObject=A.setBearerAuthToObject=A.setBasicAuthToObject=A.setApiKeyToObject=A.assertParamExists=A.DUMMY_BASE_URL=void 0;var oe=H();A.DUMMY_BASE_URL="https://example.com";A.assertParamExists=function(i,e,t){if(t==null)throw new oe.RequiredError(e,`Required parameter ${e} was null or undefined when calling ${i}.`)};A.setApiKeyToObject=function(i,e,t){return Q(this,void 0,void 0,function*(){if(t&&t.apiKey){let a=typeof t.apiKey=="function"?yield t.apiKey(e):yield t.apiKey;i[e]=a}})};A.setBasicAuthToObject=function(i,e){e&&(e.username||e.password)&&(i.auth={username:e.username,password:e.password})};A.setBearerAuthToObject=function(i,e){return Q(this,void 0,void 0,function*(){if(e&&e.accessToken){let t=typeof e.accessToken=="function"?yield e.accessToken():yield e.accessToken;i.Authorization="Bearer "+t}})};A.setOAuthToObject=function(i,e,t,a){return Q(this,void 0,void 0,function*(){if(a&&a.accessToken){let s=typeof a.accessToken=="function"?yield a.accessToken(e,t):yield a.accessToken;i.Authorization="Bearer "+s}})};function D(i,e,t=""){e!=null&&(typeof e=="object"?Array.isArray(e)?e.forEach(a=>D(i,a,t)):Object.keys(e).forEach(a=>D(i,e[a],`${t}${t!==""?".":""}${a}`)):i.has(t)?i.append(t,e):i.set(t,e))}A.setSearchParams=function(i,...e){let t=new URLSearchParams(i.search);D(t,e),i.search=t.toString()};A.serializeDataIfNeeded=function(i,e,t){let a=typeof i!="string";return(a&&t&&t.isJsonMime?t.isJsonMime(e.headers["Content-Type"]):a)?JSON.stringify(i!==void 0?i:{}):i||""};A.toPathString=function(i){return i.pathname+i.search+i.hash};A.createRequestFunction=function(i,e,t,a){return(s=e,r=t)=>{let n=Object.assign(Object.assign({},i.options),{url:(a?.basePath||r)+i.url});return s.request(n)}}});var G=_(p=>{"use strict";f();var h=p&&p.__awaiter||function(i,e,t,a){function s(r){return r instanceof t?r:new t(function(n){n(r)})}return new(t||(t=Promise))(function(r,n){function c(u){try{d(a.next(u))}catch(O){n(O)}}function l(u){try{d(a.throw(u))}catch(O){n(O)}}function d(u){u.done?r(u.value):s(u.value).then(c,l)}d((a=a.apply(i,e||[])).next())})};Object.defineProperty(p,"__esModule",{value:!0});p.OpenAIApi=p.OpenAIApiFactory=p.OpenAIApiFp=p.OpenAIApiAxiosParamCreator=p.CreateImageRequestResponseFormatEnum=p.CreateImageRequestSizeEnum=p.ChatCompletionResponseMessageRoleEnum=p.ChatCompletionRequestMessageRoleEnum=void 0;var b=(q(),x(U)),o=K(),m=H();p.ChatCompletionRequestMessageRoleEnum={System:"system",User:"user",Assistant:"assistant",Function:"function"};p.ChatCompletionResponseMessageRoleEnum={System:"system",User:"user",Assistant:"assistant",Function:"function"};p.CreateImageRequestSizeEnum={_256x256:"256x256",_512x512:"512x512",_1024x1024:"1024x1024"};p.CreateImageRequestResponseFormatEnum={Url:"url",B64Json:"b64_json"};p.OpenAIApiAxiosParamCreator=function(i){return{cancelFineTune:(e,t={})=>h(this,void 0,void 0,function*(){o.assertParamExists("cancelFineTune","fineTuneId",e);let a="/fine-tunes/{fine_tune_id}/cancel".replace("{fine_tune_id}",encodeURIComponent(String(e))),s=new URL(a,o.DUMMY_BASE_URL),r;i&&(r=i.baseOptions);let n=Object.assign(Object.assign({method:"POST"},r),t),c={},l={};o.setSearchParams(s,l);let d=r&&r.headers?r.headers:{};return n.headers=Object.assign(Object.assign(Object.assign({},c),d),t.headers),{url:o.toPathString(s),options:n}}),createAnswer:(e,t={})=>h(this,void 0,void 0,function*(){o.assertParamExists("createAnswer","createAnswerRequest",e);let a="/answers",s=new URL(a,o.DUMMY_BASE_URL),r;i&&(r=i.baseOptions);let n=Object.assign(Object.assign({method:"POST"},r),t),c={},l={};c["Content-Type"]="application/json",o.setSearchParams(s,l);let d=r&&r.headers?r.headers:{};return n.headers=Object.assign(Object.assign(Object.assign({},c),d),t.headers),n.data=o.serializeDataIfNeeded(e,n,i),{url:o.toPathString(s),options:n}}),createChatCompletion:(e,t={})=>h(this,void 0,void 0,function*(){o.assertParamExists("createChatCompletion","createChatCompletionRequest",e);let a="/chat/completions",s=new URL(a,o.DUMMY_BASE_URL),r;i&&(r=i.baseOptions);let n=Object.assign(Object.assign({method:"POST"},r),t),c={},l={};c["Content-Type"]="application/json",o.setSearchParams(s,l);let d=r&&r.headers?r.headers:{};return n.headers=Object.assign(Object.assign(Object.assign({},c),d),t.headers),n.data=o.serializeDataIfNeeded(e,n,i),{url:o.toPathString(s),options:n}}),createClassification:(e,t={})=>h(this,void 0,void 0,function*(){o.assertParamExists("createClassification","createClassificationRequest",e);let a="/classifications",s=new URL(a,o.DUMMY_BASE_URL),r;i&&(r=i.baseOptions);let n=Object.assign(Object.assign({method:"POST"},r),t),c={},l={};c["Content-Type"]="application/json",o.setSearchParams(s,l);let d=r&&r.headers?r.headers:{};return n.headers=Object.assign(Object.assign(Object.assign({},c),d),t.headers),n.data=o.serializeDataIfNeeded(e,n,i),{url:o.toPathString(s),options:n}}),createCompletion:(e,t={})=>h(this,void 0,void 0,function*(){o.assertParamExists("createCompletion","createCompletionRequest",e);let a="/completions",s=new URL(a,o.DUMMY_BASE_URL),r;i&&(r=i.baseOptions);let n=Object.assign(Object.assign({method:"POST"},r),t),c={},l={};c["Content-Type"]="application/json",o.setSearchParams(s,l);let d=r&&r.headers?r.headers:{};return n.headers=Object.assign(Object.assign(Object.assign({},c),d),t.headers),n.data=o.serializeDataIfNeeded(e,n,i),{url:o.toPathString(s),options:n}}),createEdit:(e,t={})=>h(this,void 0,void 0,function*(){o.assertParamExists("createEdit","createEditRequest",e);let a="/edits",s=new URL(a,o.DUMMY_BASE_URL),r;i&&(r=i.baseOptions);let n=Object.assign(Object.assign({method:"POST"},r),t),c={},l={};c["Content-Type"]="application/json",o.setSearchParams(s,l);let d=r&&r.headers?r.headers:{};return n.headers=Object.assign(Object.assign(Object.assign({},c),d),t.headers),n.data=o.serializeDataIfNeeded(e,n,i),{url:o.toPathString(s),options:n}}),createEmbedding:(e,t={})=>h(this,void 0,void 0,function*(){o.assertParamExists("createEmbedding","createEmbeddingRequest",e);let a="/embeddings",s=new URL(a,o.DUMMY_BASE_URL),r;i&&(r=i.baseOptions);let n=Object.assign(Object.assign({method:"POST"},r),t),c={},l={};c["Content-Type"]="application/json",o.setSearchParams(s,l);let d=r&&r.headers?r.headers:{};return n.headers=Object.assign(Object.assign(Object.assign({},c),d),t.headers),n.data=o.serializeDataIfNeeded(e,n,i),{url:o.toPathString(s),options:n}}),createFile:(e,t,a={})=>h(this,void 0,void 0,function*(){o.assertParamExists("createFile","file",e),o.assertParamExists("createFile","purpose",t);let s="/files",r=new URL(s,o.DUMMY_BASE_URL),n;i&&(n=i.baseOptions);let c=Object.assign(Object.assign({method:"POST"},n),a),l={},d={},u=new(i&&i.formDataCtor||FormData);e!==void 0&&u.append("file",e),t!==void 0&&u.append("purpose",t),l["Content-Type"]="multipart/form-data",o.setSearchParams(r,d);let O=n&&n.headers?n.headers:{};return c.headers=Object.assign(Object.assign(Object.assign(Object.assign({},l),u.getHeaders()),O),a.headers),c.data=u,{url:o.toPathString(r),options:c}}),createFineTune:(e,t={})=>h(this,void 0,void 0,function*(){o.assertParamExists("createFineTune","createFineTuneRequest",e);let a="/fine-tunes",s=new URL(a,o.DUMMY_BASE_URL),r;i&&(r=i.baseOptions);let n=Object.assign(Object.assign({method:"POST"},r),t),c={},l={};c["Content-Type"]="application/json",o.setSearchParams(s,l);let d=r&&r.headers?r.headers:{};return n.headers=Object.assign(Object.assign(Object.assign({},c),d),t.headers),n.data=o.serializeDataIfNeeded(e,n,i),{url:o.toPathString(s),options:n}}),createImage:(e,t={})=>h(this,void 0,void 0,function*(){o.assertParamExists("createImage","createImageRequest",e);let a="/images/generations",s=new URL(a,o.DUMMY_BASE_URL),r;i&&(r=i.baseOptions);let n=Object.assign(Object.assign({method:"POST"},r),t),c={},l={};c["Content-Type"]="application/json",o.setSearchParams(s,l);let d=r&&r.headers?r.headers:{};return n.headers=Object.assign(Object.assign(Object.assign({},c),d),t.headers),n.data=o.serializeDataIfNeeded(e,n,i),{url:o.toPathString(s),options:n}}),createImageEdit:(e,t,a,s,r,n,c,l={})=>h(this,void 0,void 0,function*(){o.assertParamExists("createImageEdit","image",e),o.assertParamExists("createImageEdit","prompt",t);let d="/images/edits",u=new URL(d,o.DUMMY_BASE_URL),O;i&&(O=i.baseOptions);let j=Object.assign(Object.assign({method:"POST"},O),l),P={},g={},F=new(i&&i.formDataCtor||FormData);e!==void 0&&F.append("image",e),a!==void 0&&F.append("mask",a),t!==void 0&&F.append("prompt",t),s!==void 0&&F.append("n",s),r!==void 0&&F.append("size",r),n!==void 0&&F.append("response_format",n),c!==void 0&&F.append("user",c),P["Content-Type"]="multipart/form-data",o.setSearchParams(u,g);let ae=O&&O.headers?O.headers:{};return j.headers=Object.assign(Object.assign(Object.assign(Object.assign({},P),F.getHeaders()),ae),l.headers),j.data=F,{url:o.toPathString(u),options:j}}),createImageVariation:(e,t,a,s,r,n={})=>h(this,void 0,void 0,function*(){o.assertParamExists("createImageVariation","image",e);let c="/images/variations",l=new URL(c,o.DUMMY_BASE_URL),d;i&&(d=i.baseOptions);let u=Object.assign(Object.assign({method:"POST"},d),n),O={},j={},P=new(i&&i.formDataCtor||FormData);e!==void 0&&P.append("image",e),t!==void 0&&P.append("n",t),a!==void 0&&P.append("size",a),s!==void 0&&P.append("response_format",s),r!==void 0&&P.append("user",r),O["Content-Type"]="multipart/form-data",o.setSearchParams(l,j);let g=d&&d.headers?d.headers:{};return u.headers=Object.assign(Object.assign(Object.assign(Object.assign({},O),P.getHeaders()),g),n.headers),u.data=P,{url:o.toPathString(l),options:u}}),createModeration:(e,t={})=>h(this,void 0,void 0,function*(){o.assertParamExists("createModeration","createModerationRequest",e);let a="/moderations",s=new URL(a,o.DUMMY_BASE_URL),r;i&&(r=i.baseOptions);let n=Object.assign(Object.assign({method:"POST"},r),t),c={},l={};c["Content-Type"]="application/json",o.setSearchParams(s,l);let d=r&&r.headers?r.headers:{};return n.headers=Object.assign(Object.assign(Object.assign({},c),d),t.headers),n.data=o.serializeDataIfNeeded(e,n,i),{url:o.toPathString(s),options:n}}),createSearch:(e,t,a={})=>h(this,void 0,void 0,function*(){o.assertParamExists("createSearch","engineId",e),o.assertParamExists("createSearch","createSearchRequest",t);let s="/engines/{engine_id}/search".replace("{engine_id}",encodeURIComponent(String(e))),r=new URL(s,o.DUMMY_BASE_URL),n;i&&(n=i.baseOptions);let c=Object.assign(Object.assign({method:"POST"},n),a),l={},d={};l["Content-Type"]="application/json",o.setSearchParams(r,d);let u=n&&n.headers?n.headers:{};return c.headers=Object.assign(Object.assign(Object.assign({},l),u),a.headers),c.data=o.serializeDataIfNeeded(t,c,i),{url:o.toPathString(r),options:c}}),createTranscription:(e,t,a,s,r,n,c={})=>h(this,void 0,void 0,function*(){o.assertParamExists("createTranscription","file",e),o.assertParamExists("createTranscription","model",t);let l="/audio/transcriptions",d=new URL(l,o.DUMMY_BASE_URL),u;i&&(u=i.baseOptions);let O=Object.assign(Object.assign({method:"POST"},u),c),j={},P={},g=new(i&&i.formDataCtor||FormData);e!==void 0&&g.append("file",e),t!==void 0&&g.append("model",t),a!==void 0&&g.append("prompt",a),s!==void 0&&g.append("response_format",s),r!==void 0&&g.append("temperature",r),n!==void 0&&g.append("language",n),j["Content-Type"]="multipart/form-data",o.setSearchParams(d,P);let F=u&&u.headers?u.headers:{};return O.headers=Object.assign(Object.assign(Object.assign(Object.assign({},j),g.getHeaders()),F),c.headers),O.data=g,{url:o.toPathString(d),options:O}}),createTranslation:(e,t,a,s,r,n={})=>h(this,void 0,void 0,function*(){o.assertParamExists("createTranslation","file",e),o.assertParamExists("createTranslation","model",t);let c="/audio/translations",l=new URL(c,o.DUMMY_BASE_URL),d;i&&(d=i.baseOptions);let u=Object.assign(Object.assign({method:"POST"},d),n),O={},j={},P=new(i&&i.formDataCtor||FormData);e!==void 0&&P.append("file",e),t!==void 0&&P.append("model",t),a!==void 0&&P.append("prompt",a),s!==void 0&&P.append("response_format",s),r!==void 0&&P.append("temperature",r),O["Content-Type"]="multipart/form-data",o.setSearchParams(l,j);let g=d&&d.headers?d.headers:{};return u.headers=Object.assign(Object.assign(Object.assign(Object.assign({},O),P.getHeaders()),g),n.headers),u.data=P,{url:o.toPathString(l),options:u}}),deleteFile:(e,t={})=>h(this,void 0,void 0,function*(){o.assertParamExists("deleteFile","fileId",e);let a="/files/{file_id}".replace("{file_id}",encodeURIComponent(String(e))),s=new URL(a,o.DUMMY_BASE_URL),r;i&&(r=i.baseOptions);let n=Object.assign(Object.assign({method:"DELETE"},r),t),c={},l={};o.setSearchParams(s,l);let d=r&&r.headers?r.headers:{};return n.headers=Object.assign(Object.assign(Object.assign({},c),d),t.headers),{url:o.toPathString(s),options:n}}),deleteModel:(e,t={})=>h(this,void 0,void 0,function*(){o.assertParamExists("deleteModel","model",e);let a="/models/{model}".replace("{model}",encodeURIComponent(String(e))),s=new URL(a,o.DUMMY_BASE_URL),r;i&&(r=i.baseOptions);let n=Object.assign(Object.assign({method:"DELETE"},r),t),c={},l={};o.setSearchParams(s,l);let d=r&&r.headers?r.headers:{};return n.headers=Object.assign(Object.assign(Object.assign({},c),d),t.headers),{url:o.toPathString(s),options:n}}),downloadFile:(e,t={})=>h(this,void 0,void 0,function*(){o.assertParamExists("downloadFile","fileId",e);let a="/files/{file_id}/content".replace("{file_id}",encodeURIComponent(String(e))),s=new URL(a,o.DUMMY_BASE_URL),r;i&&(r=i.baseOptions);let n=Object.assign(Object.assign({method:"GET"},r),t),c={},l={};o.setSearchParams(s,l);let d=r&&r.headers?r.headers:{};return n.headers=Object.assign(Object.assign(Object.assign({},c),d),t.headers),{url:o.toPathString(s),options:n}}),listEngines:(e={})=>h(this,void 0,void 0,function*(){let t="/engines",a=new URL(t,o.DUMMY_BASE_URL),s;i&&(s=i.baseOptions);let r=Object.assign(Object.assign({method:"GET"},s),e),n={},c={};o.setSearchParams(a,c);let l=s&&s.headers?s.headers:{};return r.headers=Object.assign(Object.assign(Object.assign({},n),l),e.headers),{url:o.toPathString(a),options:r}}),listFiles:(e={})=>h(this,void 0,void 0,function*(){let t="/files",a=new URL(t,o.DUMMY_BASE_URL),s;i&&(s=i.baseOptions);let r=Object.assign(Object.assign({method:"GET"},s),e),n={},c={};o.setSearchParams(a,c);let l=s&&s.headers?s.headers:{};return r.headers=Object.assign(Object.assign(Object.assign({},n),l),e.headers),{url:o.toPathString(a),options:r}}),listFineTuneEvents:(e,t,a={})=>h(this,void 0,void 0,function*(){o.assertParamExists("listFineTuneEvents","fineTuneId",e);let s="/fine-tunes/{fine_tune_id}/events".replace("{fine_tune_id}",encodeURIComponent(String(e))),r=new URL(s,o.DUMMY_BASE_URL),n;i&&(n=i.baseOptions);let c=Object.assign(Object.assign({method:"GET"},n),a),l={},d={};t!==void 0&&(d.stream=t),o.setSearchParams(r,d);let u=n&&n.headers?n.headers:{};return c.headers=Object.assign(Object.assign(Object.assign({},l),u),a.headers),{url:o.toPathString(r),options:c}}),listFineTunes:(e={})=>h(this,void 0,void 0,function*(){let t="/fine-tunes",a=new URL(t,o.DUMMY_BASE_URL),s;i&&(s=i.baseOptions);let r=Object.assign(Object.assign({method:"GET"},s),e),n={},c={};o.setSearchParams(a,c);let l=s&&s.headers?s.headers:{};return r.headers=Object.assign(Object.assign(Object.assign({},n),l),e.headers),{url:o.toPathString(a),options:r}}),listModels:(e={})=>h(this,void 0,void 0,function*(){let t="/models",a=new URL(t,o.DUMMY_BASE_URL),s;i&&(s=i.baseOptions);let r=Object.assign(Object.assign({method:"GET"},s),e),n={},c={};o.setSearchParams(a,c);let l=s&&s.headers?s.headers:{};return r.headers=Object.assign(Object.assign(Object.assign({},n),l),e.headers),{url:o.toPathString(a),options:r}}),retrieveEngine:(e,t={})=>h(this,void 0,void 0,function*(){o.assertParamExists("retrieveEngine","engineId",e);let a="/engines/{engine_id}".replace("{engine_id}",encodeURIComponent(String(e))),s=new URL(a,o.DUMMY_BASE_URL),r;i&&(r=i.baseOptions);let n=Object.assign(Object.assign({method:"GET"},r),t),c={},l={};o.setSearchParams(s,l);let d=r&&r.headers?r.headers:{};return n.headers=Object.assign(Object.assign(Object.assign({},c),d),t.headers),{url:o.toPathString(s),options:n}}),retrieveFile:(e,t={})=>h(this,void 0,void 0,function*(){o.assertParamExists("retrieveFile","fileId",e);let a="/files/{file_id}".replace("{file_id}",encodeURIComponent(String(e))),s=new URL(a,o.DUMMY_BASE_URL),r;i&&(r=i.baseOptions);let n=Object.assign(Object.assign({method:"GET"},r),t),c={},l={};o.setSearchParams(s,l);let d=r&&r.headers?r.headers:{};return n.headers=Object.assign(Object.assign(Object.assign({},c),d),t.headers),{url:o.toPathString(s),options:n}}),retrieveFineTune:(e,t={})=>h(this,void 0,void 0,function*(){o.assertParamExists("retrieveFineTune","fineTuneId",e);let a="/fine-tunes/{fine_tune_id}".replace("{fine_tune_id}",encodeURIComponent(String(e))),s=new URL(a,o.DUMMY_BASE_URL),r;i&&(r=i.baseOptions);let n=Object.assign(Object.assign({method:"GET"},r),t),c={},l={};o.setSearchParams(s,l);let d=r&&r.headers?r.headers:{};return n.headers=Object.assign(Object.assign(Object.assign({},c),d),t.headers),{url:o.toPathString(s),options:n}}),retrieveModel:(e,t={})=>h(this,void 0,void 0,function*(){o.assertParamExists("retrieveModel","model",e);let a="/models/{model}".replace("{model}",encodeURIComponent(String(e))),s=new URL(a,o.DUMMY_BASE_URL),r;i&&(r=i.baseOptions);let n=Object.assign(Object.assign({method:"GET"},r),t),c={},l={};o.setSearchParams(s,l);let d=r&&r.headers?r.headers:{};return n.headers=Object.assign(Object.assign(Object.assign({},c),d),t.headers),{url:o.toPathString(s),options:n}})}};p.OpenAIApiFp=function(i){let e=p.OpenAIApiAxiosParamCreator(i);return{cancelFineTune(t,a){return h(this,void 0,void 0,function*(){let s=yield e.cancelFineTune(t,a);return o.createRequestFunction(s,b.default,m.BASE_PATH,i)})},createAnswer(t,a){return h(this,void 0,void 0,function*(){let s=yield e.createAnswer(t,a);return o.createRequestFunction(s,b.default,m.BASE_PATH,i)})},createChatCompletion(t,a){return h(this,void 0,void 0,function*(){let s=yield e.createChatCompletion(t,a);return o.createRequestFunction(s,b.default,m.BASE_PATH,i)})},createClassification(t,a){return h(this,void 0,void 0,function*(){let s=yield e.createClassification(t,a);return o.createRequestFunction(s,b.default,m.BASE_PATH,i)})},createCompletion(t,a){return h(this,void 0,void 0,function*(){let s=yield e.createCompletion(t,a);return o.createRequestFunction(s,b.default,m.BASE_PATH,i)})},createEdit(t,a){return h(this,void 0,void 0,function*(){let s=yield e.createEdit(t,a);return o.createRequestFunction(s,b.default,m.BASE_PATH,i)})},createEmbedding(t,a){return h(this,void 0,void 0,function*(){let s=yield e.createEmbedding(t,a);return o.createRequestFunction(s,b.default,m.BASE_PATH,i)})},createFile(t,a,s){return h(this,void 0,void 0,function*(){let r=yield e.createFile(t,a,s);return o.createRequestFunction(r,b.default,m.BASE_PATH,i)})},createFineTune(t,a){return h(this,void 0,void 0,function*(){let s=yield e.createFineTune(t,a);return o.createRequestFunction(s,b.default,m.BASE_PATH,i)})},createImage(t,a){return h(this,void 0,void 0,function*(){let s=yield e.createImage(t,a);return o.createRequestFunction(s,b.default,m.BASE_PATH,i)})},createImageEdit(t,a,s,r,n,c,l,d){return h(this,void 0,void 0,function*(){let u=yield e.createImageEdit(t,a,s,r,n,c,l,d);return o.createRequestFunction(u,b.default,m.BASE_PATH,i)})},createImageVariation(t,a,s,r,n,c){return h(this,void 0,void 0,function*(){let l=yield e.createImageVariation(t,a,s,r,n,c);return o.createRequestFunction(l,b.default,m.BASE_PATH,i)})},createModeration(t,a){return h(this,void 0,void 0,function*(){let s=yield e.createModeration(t,a);return o.createRequestFunction(s,b.default,m.BASE_PATH,i)})},createSearch(t,a,s){return h(this,void 0,void 0,function*(){let r=yield e.createSearch(t,a,s);return o.createRequestFunction(r,b.default,m.BASE_PATH,i)})},createTranscription(t,a,s,r,n,c,l){return h(this,void 0,void 0,function*(){let d=yield e.createTranscription(t,a,s,r,n,c,l);return o.createRequestFunction(d,b.default,m.BASE_PATH,i)})},createTranslation(t,a,s,r,n,c){return h(this,void 0,void 0,function*(){let l=yield e.createTranslation(t,a,s,r,n,c);return o.createRequestFunction(l,b.default,m.BASE_PATH,i)})},deleteFile(t,a){return h(this,void 0,void 0,function*(){let s=yield e.deleteFile(t,a);return o.createRequestFunction(s,b.default,m.BASE_PATH,i)})},deleteModel(t,a){return h(this,void 0,void 0,function*(){let s=yield e.deleteModel(t,a);return o.createRequestFunction(s,b.default,m.BASE_PATH,i)})},downloadFile(t,a){return h(this,void 0,void 0,function*(){let s=yield e.downloadFile(t,a);return o.createRequestFunction(s,b.default,m.BASE_PATH,i)})},listEngines(t){return h(this,void 0,void 0,function*(){let a=yield e.listEngines(t);return o.createRequestFunction(a,b.default,m.BASE_PATH,i)})},listFiles(t){return h(this,void 0,void 0,function*(){let a=yield e.listFiles(t);return o.createRequestFunction(a,b.default,m.BASE_PATH,i)})},listFineTuneEvents(t,a,s){return h(this,void 0,void 0,function*(){let r=yield e.listFineTuneEvents(t,a,s);return o.createRequestFunction(r,b.default,m.BASE_PATH,i)})},listFineTunes(t){return h(this,void 0,void 0,function*(){let a=yield e.listFineTunes(t);return o.createRequestFunction(a,b.default,m.BASE_PATH,i)})},listModels(t){return h(this,void 0,void 0,function*(){let a=yield e.listModels(t);return o.createRequestFunction(a,b.default,m.BASE_PATH,i)})},retrieveEngine(t,a){return h(this,void 0,void 0,function*(){let s=yield e.retrieveEngine(t,a);return o.createRequestFunction(s,b.default,m.BASE_PATH,i)})},retrieveFile(t,a){return h(this,void 0,void 0,function*(){let s=yield e.retrieveFile(t,a);return o.createRequestFunction(s,b.default,m.BASE_PATH,i)})},retrieveFineTune(t,a){return h(this,void 0,void 0,function*(){let s=yield e.retrieveFineTune(t,a);return o.createRequestFunction(s,b.default,m.BASE_PATH,i)})},retrieveModel(t,a){return h(this,void 0,void 0,function*(){let s=yield e.retrieveModel(t,a);return o.createRequestFunction(s,b.default,m.BASE_PATH,i)})}}};p.OpenAIApiFactory=function(i,e,t){let a=p.OpenAIApiFp(i);return{cancelFineTune(s,r){return a.cancelFineTune(s,r).then(n=>n(t,e))},createAnswer(s,r){return a.createAnswer(s,r).then(n=>n(t,e))},createChatCompletion(s,r){return a.createChatCompletion(s,r).then(n=>n(t,e))},createClassification(s,r){return a.createClassification(s,r).then(n=>n(t,e))},createCompletion(s,r){return a.createCompletion(s,r).then(n=>n(t,e))},createEdit(s,r){return a.createEdit(s,r).then(n=>n(t,e))},createEmbedding(s,r){return a.createEmbedding(s,r).then(n=>n(t,e))},createFile(s,r,n){return a.createFile(s,r,n).then(c=>c(t,e))},createFineTune(s,r){return a.createFineTune(s,r).then(n=>n(t,e))},createImage(s,r){return a.createImage(s,r).then(n=>n(t,e))},createImageEdit(s,r,n,c,l,d,u,O){return a.createImageEdit(s,r,n,c,l,d,u,O).then(j=>j(t,e))},createImageVariation(s,r,n,c,l,d){return a.createImageVariation(s,r,n,c,l,d).then(u=>u(t,e))},createModeration(s,r){return a.createModeration(s,r).then(n=>n(t,e))},createSearch(s,r,n){return a.createSearch(s,r,n).then(c=>c(t,e))},createTranscription(s,r,n,c,l,d,u){return a.createTranscription(s,r,n,c,l,d,u).then(O=>O(t,e))},createTranslation(s,r,n,c,l,d){return a.createTranslation(s,r,n,c,l,d).then(u=>u(t,e))},deleteFile(s,r){return a.deleteFile(s,r).then(n=>n(t,e))},deleteModel(s,r){return a.deleteModel(s,r).then(n=>n(t,e))},downloadFile(s,r){return a.downloadFile(s,r).then(n=>n(t,e))},listEngines(s){return a.listEngines(s).then(r=>r(t,e))},listFiles(s){return a.listFiles(s).then(r=>r(t,e))},listFineTuneEvents(s,r,n){return a.listFineTuneEvents(s,r,n).then(c=>c(t,e))},listFineTunes(s){return a.listFineTunes(s).then(r=>r(t,e))},listModels(s){return a.listModels(s).then(r=>r(t,e))},retrieveEngine(s,r){return a.retrieveEngine(s,r).then(n=>n(t,e))},retrieveFile(s,r){return a.retrieveFile(s,r).then(n=>n(t,e))},retrieveFineTune(s,r){return a.retrieveFineTune(s,r).then(n=>n(t,e))},retrieveModel(s,r){return a.retrieveModel(s,r).then(n=>n(t,e))}}};var Y=class extends m.BaseAPI{cancelFineTune(e,t){return p.OpenAIApiFp(this.configuration).cancelFineTune(e,t).then(a=>a(this.axios,this.basePath))}createAnswer(e,t){return p.OpenAIApiFp(this.configuration).createAnswer(e,t).then(a=>a(this.axios,this.basePath))}createChatCompletion(e,t){return p.OpenAIApiFp(this.configuration).createChatCompletion(e,t).then(a=>a(this.axios,this.basePath))}createClassification(e,t){return p.OpenAIApiFp(this.configuration).createClassification(e,t).then(a=>a(this.axios,this.basePath))}createCompletion(e,t){return p.OpenAIApiFp(this.configuration).createCompletion(e,t).then(a=>a(this.axios,this.basePath))}createEdit(e,t){return p.OpenAIApiFp(this.configuration).createEdit(e,t).then(a=>a(this.axios,this.basePath))}createEmbedding(e,t){return p.OpenAIApiFp(this.configuration).createEmbedding(e,t).then(a=>a(this.axios,this.basePath))}createFile(e,t,a){return p.OpenAIApiFp(this.configuration).createFile(e,t,a).then(s=>s(this.axios,this.basePath))}createFineTune(e,t){return p.OpenAIApiFp(this.configuration).createFineTune(e,t).then(a=>a(this.axios,this.basePath))}createImage(e,t){return p.OpenAIApiFp(this.configuration).createImage(e,t).then(a=>a(this.axios,this.basePath))}createImageEdit(e,t,a,s,r,n,c,l){return p.OpenAIApiFp(this.configuration).createImageEdit(e,t,a,s,r,n,c,l).then(d=>d(this.axios,this.basePath))}createImageVariation(e,t,a,s,r,n){return p.OpenAIApiFp(this.configuration).createImageVariation(e,t,a,s,r,n).then(c=>c(this.axios,this.basePath))}createModeration(e,t){return p.OpenAIApiFp(this.configuration).createModeration(e,t).then(a=>a(this.axios,this.basePath))}createSearch(e,t,a){return p.OpenAIApiFp(this.configuration).createSearch(e,t,a).then(s=>s(this.axios,this.basePath))}createTranscription(e,t,a,s,r,n,c){return p.OpenAIApiFp(this.configuration).createTranscription(e,t,a,s,r,n,c).then(l=>l(this.axios,this.basePath))}createTranslation(e,t,a,s,r,n){return p.OpenAIApiFp(this.configuration).createTranslation(e,t,a,s,r,n).then(c=>c(this.axios,this.basePath))}deleteFile(e,t){return p.OpenAIApiFp(this.configuration).deleteFile(e,t).then(a=>a(this.axios,this.basePath))}deleteModel(e,t){return p.OpenAIApiFp(this.configuration).deleteModel(e,t).then(a=>a(this.axios,this.basePath))}downloadFile(e,t){return p.OpenAIApiFp(this.configuration).downloadFile(e,t).then(a=>a(this.axios,this.basePath))}listEngines(e){return p.OpenAIApiFp(this.configuration).listEngines(e).then(t=>t(this.axios,this.basePath))}listFiles(e){return p.OpenAIApiFp(this.configuration).listFiles(e).then(t=>t(this.axios,this.basePath))}listFineTuneEvents(e,t,a){return p.OpenAIApiFp(this.configuration).listFineTuneEvents(e,t,a).then(s=>s(this.axios,this.basePath))}listFineTunes(e){return p.OpenAIApiFp(this.configuration).listFineTunes(e).then(t=>t(this.axios,this.basePath))}listModels(e){return p.OpenAIApiFp(this.configuration).listModels(e).then(t=>t(this.axios,this.basePath))}retrieveEngine(e,t){return p.OpenAIApiFp(this.configuration).retrieveEngine(e,t).then(a=>a(this.axios,this.basePath))}retrieveFile(e,t){return p.OpenAIApiFp(this.configuration).retrieveFile(e,t).then(a=>a(this.axios,this.basePath))}retrieveFineTune(e,t){return p.OpenAIApiFp(this.configuration).retrieveFineTune(e,t).then(a=>a(this.axios,this.basePath))}retrieveModel(e,t){return p.OpenAIApiFp(this.configuration).retrieveModel(e,t).then(a=>a(this.axios,this.basePath))}};p.OpenAIApi=Y});var k=_((_e,ce)=>{ce.exports={name:"openai",version:"3.3.0",description:"Node.js library for the OpenAI API",repository:{type:"git",url:"git@github.com:openai/openai-node.git"},keywords:["openai","open","ai","gpt-3","gpt3"],author:"OpenAI",license:"MIT",main:"./dist/index.js",types:"./dist/index.d.ts",scripts:{build:"tsc --outDir dist/"},dependencies:{axios:"^0.26.0","form-data":"^4.0.0"},devDependencies:{"@types/node":"^12.11.5",typescript:"^3.6.4"}}});var W=_((Te,J)=>{f();J.exports=typeof self=="object"?self.FormData:window.FormData});var X=_(B=>{"use strict";f();Object.defineProperty(B,"__esModule",{value:!0});B.Configuration=void 0;var le=k(),z=class{constructor(e={}){this.apiKey=e.apiKey,this.organization=e.organization,this.username=e.username,this.password=e.password,this.accessToken=e.accessToken,this.basePath=e.basePath,this.baseOptions=e.baseOptions,this.formDataCtor=e.formDataCtor,this.baseOptions||(this.baseOptions={}),this.baseOptions.headers=Object.assign({"User-Agent":`OpenAI/NodeJS/${le.version}`,Authorization:`Bearer ${this.apiKey}`},this.baseOptions.headers),this.organization&&(this.baseOptions.headers["OpenAI-Organization"]=this.organization),this.formDataCtor||(this.formDataCtor=W())}isJsonMime(e){let t=new RegExp("^(application/json|[^;/ 	]+/[^;/ 	]+[+]json)[ 	]*(;.*)?$","i");return e!==null&&(t.test(e)||e.toLowerCase()==="application/json-patch+json")}};B.Configuration=z});var ee=_(R=>{"use strict";f();var de=R&&R.__createBinding||(Object.create?function(i,e,t,a){a===void 0&&(a=t),Object.defineProperty(i,a,{enumerable:!0,get:function(){return e[t]}})}:function(i,e,t,a){a===void 0&&(a=t),i[a]=e[t]}),Z=R&&R.__exportStar||function(i,e){for(var t in i)t!=="default"&&!e.hasOwnProperty(t)&&de(e,i,t)};Object.defineProperty(R,"__esModule",{value:!0});Z(G(),R);Z(X(),R)});var ue=_(y=>{f();Object.defineProperty(y,"__esModule",{value:!0});y.apply=y.Config=y.name=void 0;var v=(N(),x(M)),te=ee();y.name="openai-chatbot";y.Config=v.Schema.object({apiKey:v.Schema.string().required().description("OpenAI API Key: https://platform.openai.com/account/api-keys"),triggerWord:v.Schema.string().default("请问，").description("触发机器人回答的关键词。"),system:v.Schema.string().default("你是一个人工智能问答机器人，部署在QQ群中。你将使用中文友善地回答用户提出的问题。").description("用于约束整段对话的背景信息。"),model:v.Schema.union(["text-davinci-003","text-ada-001","text-babbage-001","text-curie-001","gpt-3.5-turbo"]).default("gpt-3.5-turbo"),temperature:v.Schema.number().default(.6).description("温度，更高的值意味着模型将承担更多的风险。对于更有创造性的应用，可以尝试0.9，而对于有明确答案的应用，可以尝试0（argmax采样）。"),max_tokens:v.Schema.number().default(500).description("生成的最大令牌数。"),top_p:v.Schema.number().default(1),frequency_penalty:v.Schema.number().default(0).description("数值在-2.0和2.0之间。正值是根据到目前为止它们在文本中的现有频率来惩罚新的标记，减少模型逐字逐句地重复同一行的可能性。"),presence_penalty:v.Schema.number().default(0).description("数值在-2.0和2.0之间。正值根据新标记在文本中的现有频率对其进行惩罚，减少了模型（model）逐字重复同一行的可能性。"),errorMessage:v.Schema.string().default("回答出错了。可能是问得太快了。").description("回答出错时的提示信息。")});function he(i,e){let t=new te.Configuration({apiKey:e.apiKey}),a=new te.OpenAIApi(t);i.on("message",s=>{if(s.content.startsWith(e.triggerWord)){let r=s.content.replace(e.triggerWord,"");a.createChatCompletion({model:e.model,messages:[{role:"system",content:e.system},{role:"user",content:r}],temperature:e.temperature,max_tokens:e.max_tokens,top_p:e.top_p,frequency_penalty:e.frequency_penalty,presence_penalty:e.presence_penalty}).then(n=>{s.send(n.data.choices[0].message.content)}).catch(()=>{s.send(e.errorMessage)})}})}y.apply=he});export default ue();
