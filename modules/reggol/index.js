var Fe=Object.create;var ue=Object.defineProperty;var Ve=Object.getOwnPropertyDescriptor;var He=Object.getOwnPropertyNames;var Je=Object.getPrototypeOf,Ge=Object.prototype.hasOwnProperty;var Ke=(e,t)=>()=>(e&&(t=e(e=0)),t);var V=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var Qe=(e,t,o,c)=>{if(t&&typeof t=="object"||typeof t=="function")for(let l of He(t))!Ge.call(e,l)&&l!==o&&ue(e,l,{get:()=>t[l],enumerable:!(c=Ve(t,l))||c.enumerable});return e};var se=(e,t,o)=>(o=e!=null?Fe(Je(e)):{},Qe(t||!e||!e.__esModule?ue(o,"default",{value:e,enumerable:!0}):o,e));import{Buffer as C}from"https://registry.koishi.chat/modules/buffer/index.js";import N from"https://registry.koishi.chat/modules/process/index.js";var v=Ke(()=>{});var he=V((xt,ye)=>{"use strict";v();function Ze(){let e=/(Chrome|Chromium)\/(?<chromeVersion>\d+)\./.exec(navigator.userAgent);if(e)return Number.parseInt(e.groups.chromeVersion,10)}var pe=Ze()>=69?{level:1,hasBasic:!0,has256:!1,has16m:!1}:!1;ye.exports={stdout:pe,stderr:pe}});var ge=V(()=>{v()});var De=V((Ut,Pe)=>{v();var ee=typeof Map=="function"&&Map.prototype,H=Object.getOwnPropertyDescriptor&&ee?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,P=ee&&H&&typeof H.get=="function"?H.get:null,me=ee&&Map.prototype.forEach,te=typeof Set=="function"&&Set.prototype,J=Object.getOwnPropertyDescriptor&&te?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,D=te&&J&&typeof J.get=="function"?J.get:null,ve=te&&Set.prototype.forEach,Xe=typeof WeakMap=="function"&&WeakMap.prototype,L=Xe?WeakMap.prototype.has:null,Ye=typeof WeakSet=="function"&&WeakSet.prototype,R=Ye?WeakSet.prototype.has:null,je=typeof WeakRef=="function"&&WeakRef.prototype,Se=je?WeakRef.prototype.deref:null,et=Boolean.prototype.valueOf,tt=Object.prototype.toString,rt=Function.prototype.toString,nt=String.prototype.match,re=String.prototype.slice,d=String.prototype.replace,ot=String.prototype.toUpperCase,de=String.prototype.toLowerCase,Re=RegExp.prototype.test,Oe=Array.prototype.concat,m=Array.prototype.join,at=Array.prototype.slice,we=Math.floor,Q=typeof BigInt=="function"?BigInt.prototype.valueOf:null,G=Object.getOwnPropertySymbols,Z=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,$=typeof Symbol=="function"&&typeof Symbol.iterator=="object",W=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===$||!0)?Symbol.toStringTag:null,We=Object.prototype.propertyIsEnumerable,Ee=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(e){return e.__proto__}:null);function _e(e,t){if(e===1/0||e===-1/0||e!==e||e&&e>-1e3&&e<1e3||Re.call(/e/,t))return t;var o=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof e=="number"){var c=e<0?-we(-e):we(e);if(c!==e){var l=String(c),a=re.call(t,l.length+1);return d.call(l,o,"$&_")+"."+d.call(d.call(a,/([0-9]{3})/g,"$&_"),/_$/,"")}}return d.call(t,o,"$&_")}var X=ge(),Me=X.custom,$e=Ce(Me)?Me:null,Ae={__proto__:null,double:'"',single:"'"},it={__proto__:null,double:/(["\\])/g,single:/(['\\])/g};Pe.exports=function e(t,o,c,l){var a=o||{};if(S(a,"quoteStyle")&&!S(Ae,a.quoteStyle))throw new TypeError('option "quoteStyle" must be "single" or "double"');if(S(a,"maxStringLength")&&(typeof a.maxStringLength=="number"?a.maxStringLength<0&&a.maxStringLength!==1/0:a.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var p=S(a,"customInspect")?a.customInspect:!0;if(typeof p!="boolean"&&p!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(S(a,"indent")&&a.indent!==null&&a.indent!=="	"&&!(parseInt(a.indent,10)===a.indent&&a.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(S(a,"numericSeparator")&&typeof a.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var n=a.numericSeparator;if(typeof t>"u")return"undefined";if(t===null)return"null";if(typeof t=="boolean")return t?"true":"false";if(typeof t=="string")return qe(t,a);if(typeof t=="number"){if(t===0)return 1/0/t>0?"0":"-0";var r=String(t);return n?_e(t,r):r}if(typeof t=="bigint"){var i=String(t)+"n";return n?_e(t,i):i}var s=typeof a.depth>"u"?5:a.depth;if(typeof c>"u"&&(c=0),c>=s&&s>0&&typeof t=="object")return Y(t)?"[Array]":"[Object]";var f=Mt(a,c);if(typeof l>"u")l=[];else if(Ne(l,t)>=0)return"[Circular]";function u(M,T,Ue){if(T&&(l=at.call(l),l.push(T)),Ue){var fe={depth:a.depth};return S(a,"quoteStyle")&&(fe.quoteStyle=a.quoteStyle),e(M,fe,c+1,l)}return e(M,a,c+1,l)}if(typeof t=="function"&&!Ie(t)){var g=gt(t),h=q(t,u);return"[Function"+(g?": "+g:" (anonymous)")+"]"+(h.length>0?" { "+m.call(h,", ")+" }":"")}if(Ce(t)){var w=$?d.call(String(t),/^(Symbol\(.*\))_[^)]*$/,"$1"):Z.call(t);return typeof t=="object"&&!$?I(w):w}if(wt(t)){for(var E="<"+de.call(String(t.nodeName)),k=t.attributes||[],A=0;A<k.length;A++)E+=" "+k[A].name+"="+Te(lt(k[A].value),"double",a);return E+=">",t.childNodes&&t.childNodes.length&&(E+="..."),E+="</"+de.call(String(t.nodeName))+">",E}if(Y(t)){if(t.length===0)return"[]";var B=q(t,u);return f&&!_t(B)?"["+j(B,f)+"]":"[ "+m.call(B,", ")+" ]"}if(ft(t)){var b=q(t,u);return!("cause"in Error.prototype)&&"cause"in t&&!We.call(t,"cause")?"{ ["+String(t)+"] "+m.call(Oe.call("[cause]: "+u(t.cause),b),", ")+" }":b.length===0?"["+String(t)+"]":"{ ["+String(t)+"] "+m.call(b,", ")+" }"}if(typeof t=="object"&&p){if($e&&typeof t[$e]=="function"&&X)return X(t,{depth:s-c});if(p!=="symbol"&&typeof t.inspect=="function")return t.inspect()}if(mt(t)){var ae=[];return me&&me.call(t,function(M,T){ae.push(u(T,t,!0)+" => "+u(M,t))}),Le("Map",P.call(t),ae,f)}if(dt(t)){var ie=[];return ve&&ve.call(t,function(M){ie.push(u(M,t))}),Le("Set",D.call(t),ie,f)}if(vt(t))return K("WeakMap");if(Ot(t))return K("WeakSet");if(St(t))return K("WeakRef");if(st(t))return I(u(Number(t)));if(yt(t))return I(u(Q.call(t)));if(pt(t))return I(et.call(t));if(ut(t))return I(u(String(t)));if(typeof window<"u"&&t===window)return"{ [object Window] }";if(typeof globalThis<"u"&&t===globalThis||typeof globalThis<"u"&&t===globalThis)return"{ [object globalThis] }";if(!ct(t)&&!Ie(t)){var z=q(t,u),le=Ee?Ee(t)===Object.prototype:t instanceof Object||t.constructor===Object,U=t instanceof Object?"":"null prototype",ce=!le&&W&&Object(t)===t&&W in t?re.call(O(t),8,-1):U?"Object":"",ze=le||typeof t.constructor!="function"?"":t.constructor.name?t.constructor.name+" ":"",F=ze+(ce||U?"["+m.call(Oe.call([],ce||[],U||[]),": ")+"] ":"");return z.length===0?F+"{}":f?F+"{"+j(z,f)+"}":F+"{ "+m.call(z,", ")+" }"}return String(t)};function Te(e,t,o){var c=o.quoteStyle||t,l=Ae[c];return l+e+l}function lt(e){return d.call(String(e),/"/g,"&quot;")}function _(e){return!W||!(typeof e=="object"&&(W in e||typeof e[W]<"u"))}function Y(e){return O(e)==="[object Array]"&&_(e)}function ct(e){return O(e)==="[object Date]"&&_(e)}function Ie(e){return O(e)==="[object RegExp]"&&_(e)}function ft(e){return O(e)==="[object Error]"&&_(e)}function ut(e){return O(e)==="[object String]"&&_(e)}function st(e){return O(e)==="[object Number]"&&_(e)}function pt(e){return O(e)==="[object Boolean]"&&_(e)}function Ce(e){if($)return e&&typeof e=="object"&&e instanceof Symbol;if(typeof e=="symbol")return!0;if(!e||typeof e!="object"||!Z)return!1;try{return Z.call(e),!0}catch{}return!1}function yt(e){if(!e||typeof e!="object"||!Q)return!1;try{return Q.call(e),!0}catch{}return!1}var ht=Object.prototype.hasOwnProperty||function(e){return e in this};function S(e,t){return ht.call(e,t)}function O(e){return tt.call(e)}function gt(e){if(e.name)return e.name;var t=nt.call(rt.call(e),/^function\s*([\w$]+)/);return t?t[1]:null}function Ne(e,t){if(e.indexOf)return e.indexOf(t);for(var o=0,c=e.length;o<c;o++)if(e[o]===t)return o;return-1}function mt(e){if(!P||!e||typeof e!="object")return!1;try{P.call(e);try{D.call(e)}catch{return!0}return e instanceof Map}catch{}return!1}function vt(e){if(!L||!e||typeof e!="object")return!1;try{L.call(e,L);try{R.call(e,R)}catch{return!0}return e instanceof WeakMap}catch{}return!1}function St(e){if(!Se||!e||typeof e!="object")return!1;try{return Se.call(e),!0}catch{}return!1}function dt(e){if(!D||!e||typeof e!="object")return!1;try{D.call(e);try{P.call(e)}catch{return!0}return e instanceof Set}catch{}return!1}function Ot(e){if(!R||!e||typeof e!="object")return!1;try{R.call(e,R);try{L.call(e,L)}catch{return!0}return e instanceof WeakSet}catch{}return!1}function wt(e){return!e||typeof e!="object"?!1:typeof HTMLElement<"u"&&e instanceof HTMLElement?!0:typeof e.nodeName=="string"&&typeof e.getAttribute=="function"}function qe(e,t){if(e.length>t.maxStringLength){var o=e.length-t.maxStringLength,c="... "+o+" more character"+(o>1?"s":"");return qe(re.call(e,0,t.maxStringLength),t)+c}var l=it[t.quoteStyle||"single"];l.lastIndex=0;var a=d.call(d.call(e,l,"\\$1"),/[\x00-\x1f]/g,Et);return Te(a,"single",t)}function Et(e){var t=e.charCodeAt(0),o={8:"b",9:"t",10:"n",12:"f",13:"r"}[t];return o?"\\"+o:"\\x"+(t<16?"0":"")+ot.call(t.toString(16))}function I(e){return"Object("+e+")"}function K(e){return e+" { ? }"}function Le(e,t,o,c){var l=c?j(o,c):m.call(o,", ");return e+" ("+t+") {"+l+"}"}function _t(e){for(var t=0;t<e.length;t++)if(Ne(e[t],`
`)>=0)return!1;return!0}function Mt(e,t){var o;if(e.indent==="	")o="	";else if(typeof e.indent=="number"&&e.indent>0)o=m.call(Array(e.indent+1)," ");else return null;return{base:o,prev:m.call(Array(t+1),o)}}function j(e,t){if(e.length===0)return"";var o=`
`+t.prev+t.base;return o+m.call(e,","+o)+`
`+t.prev}function q(e,t){var o=Y(e),c=[];if(o){c.length=e.length;for(var l=0;l<e.length;l++)c[l]=S(e,l)?t(e[l],e):""}var a=typeof G=="function"?G(e):[],p;if($){p={};for(var n=0;n<a.length;n++)p["$"+a[n]]=a[n]}for(var r in e)S(e,r)&&(o&&String(Number(r))===r&&r<e.length||$&&p["$"+r]instanceof Symbol||(Re.call(/[^\w$]/,r)?c.push(t(r,e)+": "+t(e[r],e)):c.push(r+": "+t(e[r],e))));if(typeof G=="function")for(var i=0;i<a.length;i++)We.call(e,a[i])&&c.push("["+t(a[i])+"]: "+t(e[a[i]],e));return c}});v();var ne=se(he(),1),be=se(De(),1);import{Time as xe}from"https://registry.koishi.chat/modules/cosmokit/index.js";var $t=Object.create,oe=Object.defineProperty,It=Object.getOwnPropertyDescriptor,ke=Object.getOwnPropertyNames,Lt=Object.getPrototypeOf,Rt=Object.prototype.hasOwnProperty,x=(e,t)=>oe(e,"name",{value:t,configurable:!0}),Be=(e,t)=>function(){return t||(0,e[ke(e)[0]])((t={exports:{}}).exports,t),t.exports},Wt=(e,t,o,c)=>{if(t&&typeof t=="object"||typeof t=="function")for(let l of ke(t))!Rt.call(e,l)&&l!==o&&oe(e,l,{get:()=>t[l],enumerable:!(c=It(t,l))||c.enumerable});return e},At=(e,t,o)=>(o=e!=null?$t(Lt(e)):{},Wt(t||!e||!e.__esModule?oe(o,"default",{value:e,enumerable:!0}):o,e)),Tt=Be({"src/shared.ts"(e,t){"use strict";var o=[6,2,3,4,5,1],c=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221];function l(p){return p instanceof Error&&Array.isArray(p.errors)}x(l,"isAggregateError");var a=class y{constructor(n,r){this.name=n,this.meta=r,this.createMethod("success",y.SUCCESS),this.createMethod("error",y.ERROR),this.createMethod("info",y.INFO),this.createMethod("warn",y.WARN),this.createMethod("debug",y.DEBUG)}static{x(this,"Logger")}static SILENT=0;static SUCCESS=1;static ERROR=1;static INFO=2;static WARN=2;static DEBUG=3;static id=0;static targets=[{colors:ne.stdout&&ne.stdout.level,print(n){}}];static formatters=Object.create(null);static format(n,r){this.formatters[n]=r}static levels={base:2};static color(n,r,i,s=""){return n.colors?`\x1B[3${r<8?r:"8;5;"+r}${n.colors>=2?s:""}m${i}\x1B[0m`:""+i}static code(n,r){let i=0;for(let f=0;f<n.length;f++)i=(i<<3)-i+n.charCodeAt(f)+13,i|=0;let s=r.colors?r.colors>=2?c:o:[];return s[Math.abs(i)%s.length]}static render(n,r){let i=`[${r.type[0].toUpperCase()}]`,s=" ".repeat(n.label?.margin??1),f=3+s.length,u="";n.showTime&&(f+=n.showTime.length+s.length,u+=y.color(n,8,xe.template(n.showTime))+s);let g=y.code(r.name,n),h=y.color(n,g,r.name,";1"),w=(n.label?.width??0)+h.length-r.name.length;if(n.label?.align==="right"?(u+=h.padStart(w)+s+i+s,f+=(n.label.width??0)+s.length):u+=i+s+h.padEnd(w)+s,u+=r.content.replace(/\n/g,`
`+" ".repeat(f)),n.showDiff&&n.timestamp){let E=r.timestamp-n.timestamp;u+=y.color(n,g," +"+xe.format(E))}return u}extend=x(n=>new y(`${this.name}:${n}`,this.meta),"extend");warning=x((n,...r)=>{this.warn(n,...r)},"warning");createMethod(n,r){this[n]=(...i)=>{if(i.length===1&&i[0]instanceof Error){if(i[0].cause)this[n](i[0].cause);else if(l(i[0])){i[0].errors.forEach(u=>this[n](u));return}}let s=++y.id,f=Date.now();for(let u of y.targets){if(this.getLevel(u)<r)continue;let g=this.format(u,...i),h={id:s,type:n,level:r,name:this.name,meta:this.meta,content:g,timestamp:f};if(u.record)u.record(h);else{let{print:w=console.log}=u;w(y.render(u,h))}u.timestamp=f}}}format(n,...r){r[0]instanceof Error?(r[0]=r[0].stack||r[0].message,r.unshift("%s")):typeof r[0]!="string"&&r.unshift("%o");let i=r.shift();i=i.replace(/%([a-zA-Z%])/g,(f,u)=>{if(f==="%%")return"%";let g=y.formatters[u];if(typeof g=="function"){let h=r.shift();return g(h,n,this)}return f});for(let f of r)typeof f=="object"&&f&&(f=y.formatters.o(f,n,this)),i+=" "+f;let{maxLength:s=10240}=n;return i.split(/\r?\n/g).map(f=>f.slice(0,s)+(f.length>s?"...":"")).join(`
`)}getLevel(n){let r=this.name.split(":"),i=n?.levels||y.levels;do i=i[r.shift()]??i.base;while(r.length&&typeof i=="object");return i}get level(){return this.getLevel()}set level(n){let r=this.name.split(":"),i=y.levels;for(;r.length>1;){let s=r.shift(),f=i[s];typeof f=="object"?i=f:i=i[s]={base:f??i.base}}i[r[0]]=n}};a.format("s",p=>p),a.format("d",p=>+p),a.format("j",p=>JSON.stringify(p)),a.format("c",(p,n,r)=>a.color(n,a.code(r.name,n),p)),a.format("C",(p,n)=>a.color(n,15,p,";1")),t.exports=a}}),Ct=Be({"src/browser.ts"(e,t){var o=At(Tt());o.default.format("o",(c,l)=>(0,be.default)(c,{depth:1/0}).replace(/\s*\n\s*/g," ")),t.exports=o.default}}),Ht=Ct();export{Ht as default};
