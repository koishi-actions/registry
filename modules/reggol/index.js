var ze=Object.create;var fe=Object.defineProperty;var Ue=Object.getOwnPropertyDescriptor;var Fe=Object.getOwnPropertyNames;var Ve=Object.getPrototypeOf,He=Object.prototype.hasOwnProperty;var Je=(e,t)=>()=>(e&&(t=e(e=0)),t);var F=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var Ge=(e,t,o,c)=>{if(t&&typeof t=="object"||typeof t=="function")for(let l of Fe(t))!He.call(e,l)&&l!==o&&fe(e,l,{get:()=>t[l],enumerable:!(c=Ue(t,l))||c.enumerable});return e};var ue=(e,t,o)=>(o=e!=null?ze(Ve(e)):{},Ge(t||!e||!e.__esModule?fe(o,"default",{value:e,enumerable:!0}):o,e));import{Buffer as C}from"https://registry.koishi.chat/modules/buffer/index.js";import N from"https://registry.koishi.chat/modules/process/index.js";var S=Je(()=>{});var ye=F((Pt,pe)=>{"use strict";S();function Ke(){let e=/(Chrome|Chromium)\/(?<chromeVersion>\d+)\./.exec(navigator.userAgent);if(e)return Number.parseInt(e.groups.chromeVersion,10)}var se=Ke()>=69?{level:1,hasBasic:!0,has256:!1,has16m:!1}:!1;pe.exports={stdout:se,stderr:se}});var he=F(()=>{S()});var Pe=F((Bt,Te)=>{S();var j=typeof Map=="function"&&Map.prototype,V=Object.getOwnPropertyDescriptor&&j?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,P=j&&V&&typeof V.get=="function"?V.get:null,me=j&&Map.prototype.forEach,ee=typeof Set=="function"&&Set.prototype,H=Object.getOwnPropertyDescriptor&&ee?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,D=ee&&H&&typeof H.get=="function"?H.get:null,ge=ee&&Set.prototype.forEach,Qe=typeof WeakMap=="function"&&WeakMap.prototype,W=Qe?WeakMap.prototype.has:null,Ze=typeof WeakSet=="function"&&WeakSet.prototype,I=Ze?WeakSet.prototype.has:null,Xe=typeof WeakRef=="function"&&WeakRef.prototype,ve=Xe?WeakRef.prototype.deref:null,Ye=Boolean.prototype.valueOf,je=Object.prototype.toString,et=Function.prototype.toString,tt=String.prototype.match,te=String.prototype.slice,O=String.prototype.replace,rt=String.prototype.toUpperCase,Se=String.prototype.toLowerCase,We=RegExp.prototype.test,de=Array.prototype.concat,v=Array.prototype.join,nt=Array.prototype.slice,Oe=Math.floor,K=typeof BigInt=="function"?BigInt.prototype.valueOf:null,J=Object.getOwnPropertySymbols,Q=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,_=typeof Symbol=="function"&&typeof Symbol.iterator=="object",h=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===_||!0)?Symbol.toStringTag:null,Ie=Object.prototype.propertyIsEnumerable,we=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(e){return e.__proto__}:null);function Ee(e,t){if(e===1/0||e===-1/0||e!==e||e&&e>-1e3&&e<1e3||We.call(/e/,t))return t;var o=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof e=="number"){var c=e<0?-Oe(-e):Oe(e);if(c!==e){var l=String(c),a=te.call(t,l.length+1);return O.call(l,o,"$&_")+"."+O.call(O.call(a,/([0-9]{3})/g,"$&_"),/_$/,"")}}return O.call(t,o,"$&_")}var Z=he(),Me=Z.custom,$e=Re(Me)?Me:null;Te.exports=function e(t,o,c,l){var a=o||{};if(d(a,"quoteStyle")&&a.quoteStyle!=="single"&&a.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(d(a,"maxStringLength")&&(typeof a.maxStringLength=="number"?a.maxStringLength<0&&a.maxStringLength!==1/0:a.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var p=d(a,"customInspect")?a.customInspect:!0;if(typeof p!="boolean"&&p!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(d(a,"indent")&&a.indent!==null&&a.indent!=="	"&&!(parseInt(a.indent,10)===a.indent&&a.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(d(a,"numericSeparator")&&typeof a.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var n=a.numericSeparator;if(typeof t>"u")return"undefined";if(t===null)return"null";if(typeof t=="boolean")return t?"true":"false";if(typeof t=="string")return Ne(t,a);if(typeof t=="number"){if(t===0)return 1/0/t>0?"0":"-0";var r=String(t);return n?Ee(t,r):r}if(typeof t=="bigint"){var i=String(t)+"n";return n?Ee(t,i):i}var s=typeof a.depth>"u"?5:a.depth;if(typeof c>"u"&&(c=0),c>=s&&s>0&&typeof t=="object")return X(t)?"[Array]":"[Object]";var f=wt(a,c);if(typeof l>"u")l=[];else if(Ce(l,t)>=0)return"[Circular]";function u($,R,be){if(R&&(l=nt.call(l),l.push(R)),be){var le={depth:a.depth};return d(a,"quoteStyle")&&(le.quoteStyle=a.quoteStyle),e($,le,c+1,l)}return e($,a,c+1,l)}if(typeof t=="function"&&!_e(t)){var g=pt(t),m=T(t,u);return"[Function"+(g?": "+g:" (anonymous)")+"]"+(m.length>0?" { "+v.call(m,", ")+" }":"")}if(Re(t)){var E=_?O.call(String(t),/^(Symbol\(.*\))_[^)]*$/,"$1"):Q.call(t);return typeof t=="object"&&!_?L(E):E}if(St(t)){for(var M="<"+Se.call(String(t.nodeName)),k=t.attributes||[],A=0;A<k.length;A++)M+=" "+k[A].name+"="+Ae(ot(k[A].value),"double",a);return M+=">",t.childNodes&&t.childNodes.length&&(M+="..."),M+="</"+Se.call(String(t.nodeName))+">",M}if(X(t)){if(t.length===0)return"[]";var x=T(t,u);return f&&!Ot(x)?"["+Y(x,f)+"]":"[ "+v.call(x,", ")+" ]"}if(it(t)){var B=T(t,u);return!("cause"in Error.prototype)&&"cause"in t&&!Ie.call(t,"cause")?"{ ["+String(t)+"] "+v.call(de.call("[cause]: "+u(t.cause),B),", ")+" }":B.length===0?"["+String(t)+"]":"{ ["+String(t)+"] "+v.call(B,", ")+" }"}if(typeof t=="object"&&p){if($e&&typeof t[$e]=="function"&&Z)return Z(t,{depth:s-c});if(p!=="symbol"&&typeof t.inspect=="function")return t.inspect()}if(yt(t)){var oe=[];return me&&me.call(t,function($,R){oe.push(u(R,t,!0)+" => "+u($,t))}),Le("Map",P.call(t),oe,f)}if(gt(t)){var ae=[];return ge&&ge.call(t,function($){ae.push(u($,t))}),Le("Set",D.call(t),ae,f)}if(ht(t))return G("WeakMap");if(vt(t))return G("WeakSet");if(mt(t))return G("WeakRef");if(lt(t))return L(u(Number(t)));if(ut(t))return L(u(K.call(t)));if(ft(t))return L(Ye.call(t));if(ct(t))return L(u(String(t)));if(typeof window<"u"&&t===window)return"{ [object Window] }";if(typeof globalThis<"u"&&t===globalThis||typeof globalThis<"u"&&t===globalThis)return"{ [object globalThis] }";if(!at(t)&&!_e(t)){var b=T(t,u),ie=we?we(t)===Object.prototype:t instanceof Object||t.constructor===Object,z=t instanceof Object?"":"null prototype",ce=!ie&&h&&Object(t)===t&&h in t?te.call(w(t),8,-1):z?"Object":"",Be=ie||typeof t.constructor!="function"?"":t.constructor.name?t.constructor.name+" ":"",U=Be+(ce||z?"["+v.call(de.call([],ce||[],z||[]),": ")+"] ":"");return b.length===0?U+"{}":f?U+"{"+Y(b,f)+"}":U+"{ "+v.call(b,", ")+" }"}return String(t)};function Ae(e,t,o){var c=(o.quoteStyle||t)==="double"?'"':"'";return c+e+c}function ot(e){return O.call(String(e),/"/g,"&quot;")}function X(e){return w(e)==="[object Array]"&&(!h||!(typeof e=="object"&&h in e))}function at(e){return w(e)==="[object Date]"&&(!h||!(typeof e=="object"&&h in e))}function _e(e){return w(e)==="[object RegExp]"&&(!h||!(typeof e=="object"&&h in e))}function it(e){return w(e)==="[object Error]"&&(!h||!(typeof e=="object"&&h in e))}function ct(e){return w(e)==="[object String]"&&(!h||!(typeof e=="object"&&h in e))}function lt(e){return w(e)==="[object Number]"&&(!h||!(typeof e=="object"&&h in e))}function ft(e){return w(e)==="[object Boolean]"&&(!h||!(typeof e=="object"&&h in e))}function Re(e){if(_)return e&&typeof e=="object"&&e instanceof Symbol;if(typeof e=="symbol")return!0;if(!e||typeof e!="object"||!Q)return!1;try{return Q.call(e),!0}catch{}return!1}function ut(e){if(!e||typeof e!="object"||!K)return!1;try{return K.call(e),!0}catch{}return!1}var st=Object.prototype.hasOwnProperty||function(e){return e in this};function d(e,t){return st.call(e,t)}function w(e){return je.call(e)}function pt(e){if(e.name)return e.name;var t=tt.call(et.call(e),/^function\s*([\w$]+)/);return t?t[1]:null}function Ce(e,t){if(e.indexOf)return e.indexOf(t);for(var o=0,c=e.length;o<c;o++)if(e[o]===t)return o;return-1}function yt(e){if(!P||!e||typeof e!="object")return!1;try{P.call(e);try{D.call(e)}catch{return!0}return e instanceof Map}catch{}return!1}function ht(e){if(!W||!e||typeof e!="object")return!1;try{W.call(e,W);try{I.call(e,I)}catch{return!0}return e instanceof WeakMap}catch{}return!1}function mt(e){if(!ve||!e||typeof e!="object")return!1;try{return ve.call(e),!0}catch{}return!1}function gt(e){if(!D||!e||typeof e!="object")return!1;try{D.call(e);try{P.call(e)}catch{return!0}return e instanceof Set}catch{}return!1}function vt(e){if(!I||!e||typeof e!="object")return!1;try{I.call(e,I);try{W.call(e,W)}catch{return!0}return e instanceof WeakSet}catch{}return!1}function St(e){return!e||typeof e!="object"?!1:typeof HTMLElement<"u"&&e instanceof HTMLElement?!0:typeof e.nodeName=="string"&&typeof e.getAttribute=="function"}function Ne(e,t){if(e.length>t.maxStringLength){var o=e.length-t.maxStringLength,c="... "+o+" more character"+(o>1?"s":"");return Ne(te.call(e,0,t.maxStringLength),t)+c}var l=O.call(O.call(e,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,dt);return Ae(l,"single",t)}function dt(e){var t=e.charCodeAt(0),o={8:"b",9:"t",10:"n",12:"f",13:"r"}[t];return o?"\\"+o:"\\x"+(t<16?"0":"")+rt.call(t.toString(16))}function L(e){return"Object("+e+")"}function G(e){return e+" { ? }"}function Le(e,t,o,c){var l=c?Y(o,c):v.call(o,", ");return e+" ("+t+") {"+l+"}"}function Ot(e){for(var t=0;t<e.length;t++)if(Ce(e[t],`
`)>=0)return!1;return!0}function wt(e,t){var o;if(e.indent==="	")o="	";else if(typeof e.indent=="number"&&e.indent>0)o=v.call(Array(e.indent+1)," ");else return null;return{base:o,prev:v.call(Array(t+1),o)}}function Y(e,t){if(e.length===0)return"";var o=`
`+t.prev+t.base;return o+v.call(e,","+o)+`
`+t.prev}function T(e,t){var o=X(e),c=[];if(o){c.length=e.length;for(var l=0;l<e.length;l++)c[l]=d(e,l)?t(e[l],e):""}var a=typeof J=="function"?J(e):[],p;if(_){p={};for(var n=0;n<a.length;n++)p["$"+a[n]]=a[n]}for(var r in e)d(e,r)&&(o&&String(Number(r))===r&&r<e.length||_&&p["$"+r]instanceof Symbol||(We.call(/[^\w$]/,r)?c.push(t(r,e)+": "+t(e[r],e)):c.push(r+": "+t(e[r],e))));if(typeof J=="function")for(var i=0;i<a.length;i++)Ie.call(e,a[i])&&c.push("["+t(a[i])+"]: "+t(e[a[i]],e));return c}});S();var re=ue(ye(),1),xe=ue(Pe(),1);import{Time as De}from"https://registry.koishi.chat/modules/cosmokit/index.js";var Et=Object.create,ne=Object.defineProperty,Mt=Object.getOwnPropertyDescriptor,qe=Object.getOwnPropertyNames,$t=Object.getPrototypeOf,_t=Object.prototype.hasOwnProperty,q=(e,t)=>ne(e,"name",{value:t,configurable:!0}),ke=(e,t)=>function(){return t||(0,e[qe(e)[0]])((t={exports:{}}).exports,t),t.exports},Lt=(e,t,o,c)=>{if(t&&typeof t=="object"||typeof t=="function")for(let l of qe(t))!_t.call(e,l)&&l!==o&&ne(e,l,{get:()=>t[l],enumerable:!(c=Mt(t,l))||c.enumerable});return e},Wt=(e,t,o)=>(o=e!=null?Et($t(e)):{},Lt(t||!e||!e.__esModule?ne(o,"default",{value:e,enumerable:!0}):o,e)),It=ke({"src/shared.ts"(e,t){"use strict";var o=[6,2,3,4,5,1],c=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221];function l(p){return p instanceof Error&&Array.isArray(p.errors)}q(l,"isAggregateError");var a=class y{constructor(n,r){this.name=n,this.meta=r,this.createMethod("success",y.SUCCESS),this.createMethod("error",y.ERROR),this.createMethod("info",y.INFO),this.createMethod("warn",y.WARN),this.createMethod("debug",y.DEBUG)}static{q(this,"Logger")}static SILENT=0;static SUCCESS=1;static ERROR=1;static INFO=2;static WARN=2;static DEBUG=3;static id=0;static targets=[{colors:re.stdout&&re.stdout.level,print(n){}}];static formatters=Object.create(null);static format(n,r){this.formatters[n]=r}static levels={base:2};static color(n,r,i,s=""){return n.colors?`\x1B[3${r<8?r:"8;5;"+r}${n.colors>=2?s:""}m${i}\x1B[0m`:""+i}static code(n,r){let i=0;for(let f=0;f<n.length;f++)i=(i<<3)-i+n.charCodeAt(f)+13,i|=0;let s=r.colors?r.colors>=2?c:o:[];return s[Math.abs(i)%s.length]}static render(n,r){let i=`[${r.type[0].toUpperCase()}]`,s=" ".repeat(n.label?.margin??1),f=3+s.length,u="";n.showTime&&(f+=n.showTime.length+s.length,u+=y.color(n,8,De.template(n.showTime))+s);let g=y.code(r.name,n),m=y.color(n,g,r.name,";1"),E=(n.label?.width??0)+m.length-r.name.length;if(n.label?.align==="right"?(u+=m.padStart(E)+s+i+s,f+=(n.label.width??0)+s.length):u+=i+s+m.padEnd(E)+s,u+=r.content.replace(/\n/g,`
`+" ".repeat(f)),n.showDiff&&n.timestamp){let M=r.timestamp-n.timestamp;u+=y.color(n,g," +"+De.format(M))}return u}extend=q(n=>new y(`${this.name}:${n}`,this.meta),"extend");warning=q((n,...r)=>{this.warn(n,...r)},"warning");createMethod(n,r){this[n]=(...i)=>{if(i.length===1&&i[0]instanceof Error){if(i[0].cause)this[n](i[0].cause);else if(l(i[0])){i[0].errors.forEach(u=>this[n](u));return}}let s=++y.id,f=Date.now();for(let u of y.targets){if(this.getLevel(u)<r)continue;let g=this.format(u,...i),m={id:s,type:n,level:r,name:this.name,meta:this.meta,content:g,timestamp:f};if(u.record)u.record(m);else{let{print:E=console.log}=u;E(y.render(u,m))}u.timestamp=f}}}format(n,...r){r[0]instanceof Error?(r[0]=r[0].stack||r[0].message,r.unshift("%s")):typeof r[0]!="string"&&r.unshift("%o");let i=r.shift();i=i.replace(/%([a-zA-Z%])/g,(f,u)=>{if(f==="%%")return"%";let g=y.formatters[u];if(typeof g=="function"){let m=r.shift();return g(m,n,this)}return f});for(let f of r)typeof f=="object"&&f&&(f=y.formatters.o(f,n,this)),i+=" "+f;let{maxLength:s=10240}=n;return i.split(/\r?\n/g).map(f=>f.slice(0,s)+(f.length>s?"...":"")).join(`
`)}getLevel(n){let r=this.name.split(":"),i=n?.levels||y.levels;do i=i[r.shift()]??i.base;while(r.length&&typeof i=="object");return i}get level(){return this.getLevel()}set level(n){let r=this.name.split(":"),i=y.levels;for(;r.length>1;){let s=r.shift(),f=i[s];typeof f=="object"?i=f:i=i[s]={base:f??i.base}}i[r[0]]=n}};a.format("s",p=>p),a.format("d",p=>+p),a.format("j",p=>JSON.stringify(p)),a.format("c",(p,n,r)=>a.color(n,a.code(r.name,n),p)),a.format("C",(p,n)=>a.color(n,15,p,";1")),t.exports=a}}),At=ke({"src/browser.ts"(e,t){var o=Wt(It());o.default.format("o",(c,l)=>(0,xe.default)(c,{depth:1/0}).replace(/\s*\n\s*/g," ")),t.exports=o.default}}),Ut=At();export{Ut as default};
