import{Buffer as p}from"https://registry.koishi.chat/modules/buffer/index.js";import x from"https://registry.koishi.chat/modules/process/index.js";function E(){}function d(e){return e==null}function F(e){return!d(e)}function H(e){return e&&typeof e=="object"&&!Array.isArray(e)}function L(e,t){return Object.fromEntries(Object.entries(e).filter(([f,a])=>t(f,a)))}function N(e,t){return Object.fromEntries(Object.entries(e).map(([f,a])=>[f,t(a,f)]))}function P(e,t,f){if(!t)return{...e};let a={};for(let n of t)(f||e[n]!==void 0)&&(a[n]=e[n]);return a}function U(e,t){if(!t)return{...e};let f={...e};for(let a of t)Reflect.deleteProperty(f,a);return f}function k(e,t,f){return Object.defineProperty(e,t,{writable:!0,value:f,enumerable:!1})}function V(e,t){return t.every(f=>e.includes(f))}function Y(e,t){return e.filter(f=>t.includes(f))}function K(e,t){return e.filter(f=>!t.includes(f))}function _(e,t){return Array.from(new Set([...e,...t]))}function q(e){return[...new Set(e)]}function I(e,t){let f=e?.indexOf(t);return f>=0?(e.splice(f,1),!0):!1}function J(e){return Array.isArray(e)?e:d(e)?[]:[e]}function h(e,t){return arguments.length===1?f=>h(e,f):e in globalThis&&t instanceof globalThis[e]||Object.prototype.toString.call(t).slice(8,-1)===e}function b(e){return h("ArrayBuffer",e)||h("SharedArrayBuffer",e)}function $(e){return b(e)||ArrayBuffer.isView(e)}var g;(e=>{e.is=b,e.isSource=$;function t(r){return ArrayBuffer.isView(r)?r.buffer.slice(r.byteOffset,r.byteOffset+r.byteLength):r}e.fromSource=t;function f(r){if(r=t(r),typeof p<"u")return p.from(r).toString("base64");let l="",s=new Uint8Array(r);for(let c=0;c<s.byteLength;c++)l+=String.fromCharCode(s[c]);return btoa(l)}e.toBase64=f;function a(r){return typeof p<"u"?t(p.from(r,"base64")):Uint8Array.from(atob(r),l=>l.charCodeAt(0))}e.fromBase64=a;function n(r){return r=t(r),typeof p<"u"?p.from(r).toString("hex"):Array.from(new Uint8Array(r),l=>l.toString(16).padStart(2,"0")).join("")}e.toHex=n;function u(r){if(typeof p<"u")return t(p.from(r,"hex"));let l=r.length%2===0?r:r.slice(0,r.length-1),s=[];for(let c=0;c<l.length;c+=2)s.push(parseInt(`${l[c]}${l[c+1]}`,16));return Uint8Array.from(s).buffer}e.fromHex=u})(g||(g={}));var W=g.fromBase64,G=g.toBase64,Q=g.fromHex,X=g.toHex;function w(e,t=new Map){if(!e||typeof e!="object")return e;if(h("Date",e))return new Date(e.valueOf());if(h("RegExp",e))return new RegExp(e.source,e.flags);if(b(e))return e.slice(0);if(ArrayBuffer.isView(e))return e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength);let f=t.get(e);if(f)return f;if(Array.isArray(e)){let n=[];return t.set(e,n),e.forEach((u,r)=>{n[r]=Reflect.apply(w,null,[u,t])}),n}let a=Object.create(Object.getPrototypeOf(e));t.set(e,a);for(let n of Reflect.ownKeys(e)){let u={...Reflect.getOwnPropertyDescriptor(e,n)};"value"in u&&(u.value=Reflect.apply(w,null,[u.value,t])),Reflect.defineProperty(a,n,u)}return a}function A(e,t,f){if(e===t||!f&&d(e)&&d(t))return!0;if(typeof e!=typeof t||typeof e!="object"||!e||!t)return!1;function a(n,u){return n(e)?n(t)?u(e,t):!1:n(t)?!1:void 0}return a(Array.isArray,(n,u)=>n.length===u.length&&n.every((r,l)=>A(r,u[l])))??a(h("Date"),(n,u)=>n.valueOf()===u.valueOf())??a(h("RegExp"),(n,u)=>n.source===u.source&&n.flags===u.flags)??a(b,(n,u)=>{if(n.byteLength!==u.byteLength)return!1;let r=new Uint8Array(n),l=new Uint8Array(u);for(let s=0;s<r.length;s++)if(r[s]!==l[s])return!1;return!0})??Object.keys({...e,...t}).every(n=>A(e[n],t[n],f))}function Z(e){return e.charAt(0).toUpperCase()+e.slice(1)}function T(e){return e.charAt(0).toLowerCase()+e.slice(1)}function j(e){return e.replace(/[_-][a-z]/g,t=>t.slice(1).toUpperCase())}function S(e,t,f){let a=[],n=0;for(let u=0;u<e.length;u++){let r=e.charCodeAt(u);if(r>=65&&r<=90){if(n===1){let l=e.charCodeAt(u+1);l>=97&&l<=122&&a.push(f),a.push(r+32)}else n!==0&&a.push(f),a.push(r+32);n=1}else r>=97&&r<=122?(a.push(r),n=2):t.includes(r)?(n!==0&&a.push(f),n=0):a.push(r)}return String.fromCharCode(...a)}function B(e){return S(e,[45,95],45)}function ee(e){return S(e,[45,95],95)}var te=j,re=B;function ne(e){return typeof e!="string"?`[${e.toString()}]`:/^[a-z_$][\w$]*$/i.test(e)?`.${e}`:`[${JSON.stringify(e)}]`}function z(e){return e.replace(/\/$/,"")}function fe(e){return e.startsWith("/")||(e="/"+e),z(e)}var O;(e=>{e.millisecond=1,e.second=1e3,e.minute=e.second*60,e.hour=e.minute*60,e.day=e.hour*24,e.week=e.day*7;let t=new Date().getTimezoneOffset();function f(o){t=o}e.setTimezoneOffset=f;function a(){return t}e.getTimezoneOffset=a;function n(o=new Date,i){return typeof o=="number"&&(o=new Date(o)),i===void 0&&(i=t),Math.floor((o.valueOf()/e.minute-i)/1440)}e.getDateNumber=n;function u(o,i){let m=new Date(o*e.day);return i===void 0&&(i=t),new Date(+m+i*e.minute)}e.fromDateNumber=u;let r=/\d+(?:\.\d+)?/.source,l=new RegExp(`^${["w(?:eek(?:s)?)?","d(?:ay(?:s)?)?","h(?:our(?:s)?)?","m(?:in(?:ute)?(?:s)?)?","s(?:ec(?:ond)?(?:s)?)?"].map(o=>`(${r}${o})?`).join("")}$`);function s(o){let i=l.exec(o);return i?(parseFloat(i[1])*e.week||0)+(parseFloat(i[2])*e.day||0)+(parseFloat(i[3])*e.hour||0)+(parseFloat(i[4])*e.minute||0)+(parseFloat(i[5])*e.second||0):0}e.parseTime=s;function c(o){let i=s(o);return i?o=Date.now()+i:/^\d{1,2}(:\d{1,2}){1,2}$/.test(o)?o=`${new Date().toLocaleDateString()}-${o}`:/^\d{1,2}-\d{1,2}-\d{1,2}(:\d{1,2}){1,2}$/.test(o)&&(o=`${new Date().getFullYear()}-${o}`),o?new Date(o):new Date}e.parseDate=c;function D(o){let i=Math.abs(o);return i>=e.day-e.hour/2?Math.round(o/e.day)+"d":i>=e.hour-e.minute/2?Math.round(o/e.hour)+"h":i>=e.minute-e.second/2?Math.round(o/e.minute)+"m":i>=e.second?Math.round(o/e.second)+"s":o+"ms"}e.format=D;function y(o,i=2){return o.toString().padStart(i,"0")}e.toDigits=y;function v(o,i=new Date){return o.replace("yyyy",i.getFullYear().toString()).replace("yy",i.getFullYear().toString().slice(2)).replace("MM",y(i.getMonth()+1)).replace("dd",y(i.getDate())).replace("hh",y(i.getHours())).replace("mm",y(i.getMinutes())).replace("ss",y(i.getSeconds())).replace("SSS",y(i.getMilliseconds(),3))}e.template=v})(O||(O={}));export{g as Binary,O as Time,G as arrayBufferToBase64,X as arrayBufferToHex,W as base64ToArrayBuffer,j as camelCase,te as camelize,Z as capitalize,w as clone,V as contain,q as deduplicate,A as deepEqual,k as defineProperty,K as difference,L as filterKeys,ne as formatProperty,Q as hexToArrayBuffer,re as hyphenate,Y as intersection,h as is,F as isNonNullable,d as isNullable,H as isPlainObject,J as makeArray,N as mapValues,E as noop,U as omit,B as paramCase,P as pick,I as remove,fe as sanitize,ee as snakeCase,z as trimSlash,T as uncapitalize,_ as union,N as valueMap};
